<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, viewport-fit=cover, user-scalable=no">
        <!--[S] FAVICON-->
        <link rel="shortcut icon" href="/data/{c.MALL_ID}_data/images/favicon.ico">
        <link rel="icon" type="image/png" sizes="16x16" href="/data/{c.MALL_ID}_data/images/favicon_16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/data/{c.MALL_ID}_data/images/favicon_32.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/data/{c.MALL_ID}_data/images/favicon_152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/data/{c.MALL_ID}_data/images/favicon_180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/data/{c.MALL_ID}_data/images/favicon_192.png">
        <link rel="icon" type="image/png" sizes="256x256" href="/data/{c.MALL_ID}_data/images/favicon_256.png">
        <!--[E] FAVICON-->
        <!-- js library -->
        <script>var forbizCsrf = {name: "{layout.ForbizCsrfName}", hash: "{layout.ForbizCsrfHash}", isLogin: {=json_encode(layoutCommon.isLogin)}};</script>
        <!--{? is_file( c.DOCUMENT_ROOT + '' + layout.LanguageJsSrc)}-->

        <link rel="stylesheet" type="text/css" href="{layoutCommon.templetSrc}/assets/css/main.css?version={c.CLIENT_VERSION}">
        <script src="{layoutCommon.templetSrc}/assets/js/vendor.js?version={c.CLIENT_VERSION}"></script>
        <script src="{layoutCommon.templetSrc}/assets/js/main.js?version={c.CLIENT_VERSION}"></script>
        <!-- 언어 -->
        <script src="{layout.LanguageJsSrc}?version={c.CLIENT_VERSION}"></script>
        <!--{/}-->
        <script src="{layoutCommon.templetSrc}/js/common/ui_common.js?version={c.CLIENT_VERSION}"></script><!-- 퍼블공통 -->
        <script src="{layoutCommon.templetSrc}/js/common/dev_common.js?version={c.CLIENT_VERSION}"></script><!-- 개발공통 -->
        <script src="{layoutCommon.templetSrc}/js/common/dev_ext.js?version={c.CLIENT_VERSION}"></script><!-- 개발확장 -->
        <script src="{layoutCommon.templetSrc}/js/common/layout.js?version={c.CLIENT_VERSION}"></script><!-- 레이아웃 스크립트 -->
        <script src="{layoutCommon.templetSrc}/js/common/wish.js?version={c.CLIENT_VERSION}"></script><!-- 관심상품 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/10.2.0/decimal.min.js"></script><!--decimal 이후 라이브러리로 통합 필요!-->
        <!--구글 script-->
        <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
        <script>
            //set environment
            common.templetSrc = '{layoutCommon.templetSrc}';
            common.environment = "{c.DB_CONNECTION_DIV}";
            common.langType = "{c.BASIC_LANGUAGE}";
            common.bcscale = {? defined('BCSCALE')}{c.BCSCALE}{:}0{/};
            dev_ext.npay.useNpay = '{c.NPAY_USE}';
        </script>

        <!-- 몰 관련 태그 -->
        <title>{layoutCommon.title}</title>
        <meta name="keywords" content="{layoutCommon.keyword}">

        <!--구글 로그인-->
        <meta name="google-signin-client_id" content="{c.GOOGLE_CLIENT_ID}">
        <script>
            function onSignIn(googleUser) {
                var auth2 = gapi.auth2.getAuthInstance();

                if(auth2.isSignedIn.get()) {
                    var profile = auth2.currentUser.get().getBasicProfile();

                    $.ajax({
                        url : '/controller/member/google'
                        , type : 'get'
                        , data : {
                            id : profile.getId()
                            , id_token : googleUser.getAuthResponse().id_token
                        }
                        ,async : true
                        , dataType: 'json'
                    }).done(function(response){
                        if(response.result == 'success') {
                            location.href = response.data.gotoUrl;
                        }else {
                            alert(response.data.msg);
                        }
                    });
                }
            }

            function onSignLink(googleUser) {
                var auth2 = gapi.auth2.getAuthInstance();

                if(auth2.isSignedIn.get()) {
                    var profile = auth2.currentUser.get().getBasicProfile();

                    $.ajax({
                        url : '/controller/member/google/link'
                        , type : 'get'
                        , data : {
                            id : profile.getId()
                            , id_token : googleUser.getAuthResponse().id_token
                        }
                        ,async : true
                        , dataType: 'json'
                    }).done(function(response){
                        if(response.result == 'success') {
                            alert(response.data.msg);
                            $('#devGoogleBtn').attr('disabled', false);
                        }
                    });
                }
            }

            function signOut() {
                try{
                    var auth2 = gapi.auth2.getAuthInstance();
                    auth2.signOut().then(function () {
                        console.log('User signed out.');
                    });
                    auth2.disconnect();
                }catch(e){
                    console.log(e);
                }
            }

            function onLoad() {
                gapi.load('auth2', function() {
                    gapi.auth2.init();
                });
            }
        </script>

        {? layout.isSnsShare}
        <!--SNS 공유-->
        <link rel="image_src" href="{layout.snsShareImage}" />

        <meta property="og:image" content="{layout.snsShareImage}" />
        <meta property="og:title" content="{layout.snsShareTitle}" />
        <meta property="og:url" content="{layout.snsShareUrl}" />
        <meta property="og:description" content="{layout.snsShareDescription}" />
        <meta property="og:type" content="website" />
        <meta property="og:site_name" content="{title_desc}" />

        <meta name="twitter:image" content="{layout.snsShareImage}" />
        <meta name="twitter:title" content="{layout.snsShareTitle}" />
        <meta name="twitter:url" content="{layout.snsShareUrl}" />
        <meta name="twitter:description" content="{layout.snsShareDescription}" />
        <meta name="twitter:card" content="summary_large_image" />

        <meta itemprop="image" content="{layout.snsShareImage}">
        <meta itemprop="name" content="{layout.snsShareTitle}">
        <meta itemprop="description" content="{layout.snsShareDescription}">
        <!--SNS 공유 스크립트 : 공통-->
        <script src="{layoutCommon.templetSrc}/js/common/snsShare.js?version={c.CLIENT_VERSION}"></script>
        <!--SNS 공유 스크립트 : kakao-->
        <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
        <!--/-->
        {:}
        <meta name="description" content="{title_desc}">
        {/}
        <!-- 다음주소 -->
        <script src="https://ssl.daumcdn.net/dmaps/map_js_init/postcode.v2.js"></script>
    </head>
    <body id="{layoutCommon.bodyId}" class="fb">
        <div id="document" class="idx-type">
            <nav id="navigation">{#headerMenu}</nav>

            <div class="panel">
                <header id="header" class="header">
                    {#headerTop}
                </header>

                <div id="container">
                    <article id="content" class="main">
                        {#contents}
                    </article>

                    <a href="#document" class='btn-top'></a>

                    <nav id="dockbar" class="dockbar dockbar--active">
                        <a href="#navigation" class="dockbar__btn dockbar__btn--caterogy">{=trans('카테고리')}</a>
                        <a href="/mypage/orderHistory" class="dockbar__btn dockbar__btn--order">{=trans('주문배송')}</a>
                        <a href="/" class="dockbar__btn dockbar__btn--home">{=trans('홈')}</a>
                        <a href="/mypage/" class="dockbar__btn dockbar__btn--mypage">{=trans('마이페이지')}</a>
                        <a href="/mypage/recentView" class="dockbar__btn dockbar__btn--recently">{=trans('최근본상품')}</a>
                    </nav>
                </div>

                {? !(
                    layoutCommon.bodyId == 'shop_cart'
                    || layoutCommon.bodyId == 'shop_infoInput'
                    || layoutCommon.bodyId == 'shop_paymentComplete'
                    )
                }
                <footer id="footer">
                    {#footerMenu}
                    {#footerDesc}
                </footer>
                {/}
            </div>
        </div>

        <!-- modal -->
        <div class="popup-mask js__modal__mask"></div>
        <div class="fb__popup-layout js__modal">
            <div class="popup-layout js__modal__layer">
                <p class="popup-title">
                    <span id="devModalTitle">{=trans('제목')}</span>
                    <span class="close js__modal__close"></span>
                </p>
                <div id='devModalContent' class="popup-content">{=trans('내용')}</div>
            </div>
            <!-- <button type="button" class="btn-close-bottom" style="display: none; color:#666; background-color:#FFF;">닫기</button> -->
        </div>

        <!-- iframe modal -->
        <div class="popup-frame-layout">
            <p class="popup-title">
                <span id="devIframeModalTitle"></span>
                <span class="close"></span>
            </p>
            <div class="popup-content">
                <iframe id="devIframeModalIframe"></iframe>
            </div>
        </div>

        <!--팝업레이어창-->
        <!--{'<script id="devNotiPopupTpl" type="text/x-handlebars-template">'}-->
        <div class="fb__notice-pop js__notice__popup devNotiPopup" devPopupIx="{[popup_ix]}" style="width:100%; height:auto; top:20%; left:0;">
            <section class="fb__notice-pop__wrapper">
                <div class="fb__notice-pop__inner">{[{\popup_text}]}</div>
            </section>
        </div>
        <!--{'</script>'}-->

        <!--{? is_file( c.DOCUMENT_ROOT + '' + layout.GroupJsSrc ) }-->
        <!-- 퍼블&개발 공통:폴더별 -->
        <script src="{layout.GroupJsSrc}?version={c.CLIENT_VERSION}"></script>
        <!--{/}-->
        <!--{? is_file( c.DOCUMENT_ROOT + '' + layout.PageJsSrc ) }-->
        <!-- 퍼블&개발 공통:각 페이지 별 -->
        <script src="{layout.PageJsSrc}?version={c.CLIENT_VERSION}"></script>
        <!--{/}-->
        <script>
            <!--{? c.DB_CONNECTION_DIV == 'development' }-->
            //load 된 언어 서버요청
            common.lang.jsLanguageCollection();
            <!--{/}-->

            common.noti.popup.load({layout.jsonPopupList});
        </script>
    </body>
</html>