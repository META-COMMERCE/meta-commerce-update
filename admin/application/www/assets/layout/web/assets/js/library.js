/**
 * Created by forbiz on 2019-03-29.
 */
/**
 * Created by Hong on 2018-03-12.
 */
"use strict";


/*!
 * AX5Core
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var e=this,t=this,n=t?t.document:null,r=(t?t.document.documentElement:null,/^(["'](\\.|[^"\\\n\r])*?["']|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/),i=/^-ms-/,o=/[\-_]([\da-z])/gi,a=/([A-Z])/g,u=/\./,s=/[-|+]?[\D]/gi,f=/\D/gi,c=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),l=/&/g,d=/=/,h=/[ ]+/g,p={},g=void 0,m=void 0;p.guid=1,p.getGuid=function(){return p.guid++},p.info=g=function(){function e(e,r){return e={href:t.location.href,param:t.location.search,referrer:n.referrer,pathname:t.location.pathname,hostname:t.location.hostname,port:t.location.port},r=e.href.split(/[\?#]/),e.param=e.param.replace("?",""),e.url=r[0],e.href.search("#")>-1&&(e.hashdata=m.last(r)),r=null,e.baseUrl=m.left(e.href,"?").replace(e.pathname,""),e}function r(e,t,n){return g.errorMsg&&g.errorMsg[e]?{className:e,errorCode:t,methodName:n,msg:g.errorMsg[e][t]}:{className:e,errorCode:t,methodName:n}}var i=arguments,o="1.4.127",a="",u=function(){console.error(m.toArray(i).join(":"))},s={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,SPACE:32},f=[{label:"SUN"},{label:"MON"},{label:"TUE"},{label:"WED"},{label:"THU"},{label:"FRI"},{label:"SAT"}],c=function(e,n,r,i,o,a){return t&&t.navigator?(e=navigator.userAgent.toLowerCase(),n=e.search(/mobile/g)!=-1,a,e.search(/iphone/g)!=-1?{name:"iphone",version:0,mobile:!0}:e.search(/ipad/g)!=-1?{name:"ipad",version:0,mobile:!0}:e.search(/android/g)!=-1?(i=/(android)[ \/]([\w.]+)/.exec(e)||[],a=i[2]||"0",{name:"android",version:a,mobile:n}):(r="",i=/(opr)[ \/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],o=i[1]||"",a=i[2]||"0","msie"==o&&(o="ie"),{name:o,version:a,mobile:n})):{}}(),l=!("undefined"==typeof window||"undefined"==typeof navigator||!t.document),d=t&&/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",h={},p=!!t&&("ontouchstart"in t||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),v=!!t&&(t.FileReader&&t.File&&t.FileList&&t.Blob);return{errorMsg:h,version:o,baseUrl:a,onerror:u,eventKeys:s,weekNames:f,browser:c,isBrowser:l,supportTouch:p,supportFileApi:v,wheelEnm:d,urlUtil:e,getError:r}}(),p.util=m=function(){function v(e,t){if(_(e))return[];var n=void 0,r=0,i=e.length,o=void 0===i||"function"==typeof e;if(o){for(n in e)if("undefined"!=typeof e[n]&&t.call(e[n],n,e[n])===!1)break}else for(;r<i&&("undefined"==typeof e[r]||t.call(e[r],r,e[r++])!==!1););return e}function y(e,t){if(_(e))return[];var n=void 0,r=0,i=e.length,o=[],a=void 0;if(k(e)){for(n in e)if("undefined"!=typeof e[n]){if(a=void 0,(a=t.call(e[n],n,e[n]))===!1)break;o.push(a)}}else for(;r<i;)if("undefined"!=typeof e[r]){if(a=void 0,(a=t.call(e[r],r,e[r++]))===!1)break;o.push(a)}return o}function b(e,t){if(_(e))return-1;if(k(e))for(var n in e){if("undefined"!=typeof e[n]&&F(t)&&t.call(e[n],n,e[n]))return n;if(e[n]==t)return n}else for(var r=0,i=e.length;r<i;r++){if("undefined"!=typeof e[r]&&F(t)&&t.call(e[r],r,e[r]))return r;if(e[r]==t)return r}return-1}function w(e,t,n){var r=void 0,i=void 0,o=void 0;if(F(t)&&"undefined"==typeof n&&(n=t,t=0),"undefined"==typeof t&&(t=0),j(e)){for(r=0,i=e.length;r<i;r++)if("undefined"!=typeof e[r]){if((o=n.call(e[r],e[r]))===!1)break;"undefined"!=typeof o&&(t+=o)}return t}if(k(e)){for(r in e)if("undefined"!=typeof e[r]){if((o=n.call(e[r],e[r]))===!1)break;"undefined"!=typeof o&&(t+=o)}return t}return console.error("argument error : ax5.util.sum - use Array or Object"),t}function x(e,t,n){var r=void 0,i=void 0,o=void 0;if(F(t)&&"undefined"==typeof n&&(n=t,t=0),"undefined"==typeof t&&(t=0),j(e)){for(r=0,i=e.length;r<i;r++)if("undefined"!=typeof e[r]){if((o=n.call(e[r],e[r]))===!1)break;"undefined"!=typeof o&&(t+=o)}return t/i}if(k(e)){i=0;for(r in e)if("undefined"!=typeof e[r]){if((o=n.call(e[r],e[r]))===!1)break;"undefined"!=typeof o&&(t+=o),++i}return t/i}return console.error("argument error : ax5.util.sum - use Array or Object"),t}function M(t,n){var r,i,o;if(j(t)){for(r=0,i=t.length,o=t[r];r<i-1&&("undefined"==typeof t[r]||(o=n.call(e,o,t[++r]))!==!1););return o}if(k(t)){for(r in t)if("undefined"!=typeof t[r]&&(o=n.call(e,o,t[r]))===!1)break;return o}return console.error("argument error : ax5.util.reduce - use Array or Object"),null}function E(t,n){for(var r=t.length-1,i=t[r];r>0&&("undefined"==typeof t[r]||(i=n.call(e,i,t[--r]))!==!1););return i}function T(e,t){if(_(e))return[];var n,r,i=0,o=e.length,a=[];if(k(e))for(n in e)"undefined"!=typeof e[n]&&(r=t.call(e[n],n,e[n]))&&a.push(e[n]);else for(;i<o;)"undefined"!=typeof e[i]&&((r=t.call(e[i],i,e[i]))&&a.push(e[i]),i++);return a}function S(e){var t="";if(p.util.isArray(e)){var n=0,r=e.length;for(t+="[";n<r;n++)n>0&&(t+=","),t+=S(e[n]);t+="]"}else if(p.util.isObject(e)){t+="{";var i=[];v(e,function(e,t){i.push('"'+e+'": '+S(t))}),t+=i.join(", "),t+="}"}else t=p.util.isString(e)?'"'+e+'"':p.util.isNumber(e)?e:p.util.isUndefined(e)?"undefined":p.util.isFunction(e)?'"{Function}"':e;return t}function A(e,t){if(!t&&!r.test(e))return{error:500,msg:"syntax error"};try{return new Function("","return "+e)()}catch(n){return{error:500,msg:"syntax error"}}}function D(e){var t;return null!=e&&e==e.window?t="window":e&&1==e.nodeType?t="element":e&&11==e.nodeType?t="fragment":null===e?t="null":"undefined"==typeof e?t="undefined":"[object Object]"==we.call(e)?t="object":"[object Array]"==we.call(e)?t="array":"[object String]"==we.call(e)?t="string":"[object Number]"==we.call(e)?t="number":"[object NodeList]"==we.call(e)?t="nodelist":"function"==typeof e&&(t="function"),t}function C(e){return null!=e&&e==e.window}function N(e){return!(!e||1!=e.nodeType&&11!=e.nodeType)}function k(e){return"[object Object]"==we.call(e)}function j(e){return"[object Array]"==we.call(e)}function F(e){return"function"==typeof e}function O(e){return"[object String]"==we.call(e)}function R(e){return"[object Number]"==we.call(e)}function I(e){return!!("[object NodeList]"==we.call(e)||"undefined"!=typeof e&&e&&e[0]&&1==e[0].nodeType)}function U(e){return"undefined"==typeof e}function _(e){return"undefined"==typeof e||null===e||""===e}function P(e){return e instanceof Date&&!isNaN(e.valueOf())}function $(e){var t=!1;if(e)if(e instanceof Date&&!isNaN(e.valueOf()))t=!0;else{if(e.length>7&&re(e)instanceof Date)return!0;if(e=e.replace(/\D/g,""),e.length>7){var n=e.substr(4,2),r=e.substr(6,2);e=re(e),e.getMonth()==n-1&&e.getDate()==r&&(t=!0)}}else;return t}function B(e){if(k(e)){var t=Object.keys(e),n={};return n[t[0]]=e[t[0]],n}return j(e)?e[0]:void console.error("ax5.util.object.first","argument type error")}function L(e){if(k(e)){var t=Object.keys(e),n={};return n[t[t.length-1]]=e[t[t.length-1]],n}return j(e)?e[e.length-1]:void console.error("ax5.util.object.last","argument type error")}function z(e,t,r,i){var o;return"number"==typeof r&&(o=new Date,o.setDate(o.getDate()+r)),i=i||{},n.cookie=[escape(e),"=",escape(t),o?"; expires="+o.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}function H(e){for(var t=e+"=",r=n.cookie.split(";"),i=0,o=r.length;i<o;i++){for(var a=r[i];" "==a.charAt(0);)a=a.substring(1);if(a.indexOf(t)!=-1)return unescape(a.substring(t.length,a.length))}return""}function W(e){return t.alert(S(e)),e}function Y(e,t){return"undefined"==typeof e||"undefined"==typeof t?"":O(t)?e.indexOf(t)>-1?e.substr(0,e.indexOf(t)):"":R(t)?e.substr(0,t):""}function q(e,t){return"undefined"==typeof e||"undefined"==typeof t?"":(e=""+e,O(t)?e.lastIndexOf(t)>-1?e.substr(e.lastIndexOf(t)+1):"":R(t)?e.substr(e.length-t):"")}function V(e){return e.replace(i,"ms-").replace(o,function(e,t){return t.toUpperCase()})}function G(e){return V(e).replace(a,function(e,t){return"-"+t.toLowerCase()})}function J(e,t){var n,r,i,o=(""+e).split(u);return r=Number(o[0].replace(/,/g,""))<0||"-0"==o[0],i=0,o[0]=o[0].replace(s,""),o[1]?(o[1]=o[1].replace(f,""),i=Number(o[0]+"."+o[1])||0):i=Number(o[0])||0,n=r?-i:i,v(t,function(e,t){"round"==e&&(n=R(t)?t<0?+(Math.round(n+"e-"+Math.abs(t))+"e+"+Math.abs(t)):+(Math.round(n+"e+"+t)+"e-"+t):Math.round(n)),"floor"==e&&(n=Math.floor(n)),"ceil"==e?n=Math.ceil(n):"money"==e?n=function(e){var t=""+e;if(isNaN(t)||""==t)return"";var n=t.split(".");n[0]+=".";do n[0]=n[0].replace(c,"$1,$2");while(c.test(n[0]));return n.length>1?n.join(""):n[0].split(".")[0]}(n):"abs"==e?n=Math.abs(Number(n)):"byte"==e&&(n=function(e){e=Number(n);var t="KB",r=e/1024;return r/1024>1&&(t="MB",r/=1024),r/1024>1&&(t="GB",r/=1024),J(r,{round:1})+t}(n))}),n}function Q(e){return"undefined"!=typeof e.length?Array.prototype.slice.call(e):[]}function Z(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e}function K(e,t){var n;return O(e)&&"undefined"!=typeof t&&"param"==t?e:O(e)&&"undefined"!=typeof t&&"object"==t||O(e)&&"undefined"==typeof t?(n={},v(e.split(l),function(){var e=this.split(d);n[e[0]]?(O(n[e[0]])&&(n[e[0]]=[n[e[0]]]),n[e[0]].push(e[1])):n[e[0]]=e[1]}),n):(n=[],v(e,function(e,t){n.push(e+"="+escape(t))}),n.join("&"))}function X(e){return encodeURIComponent(e)}function ee(e){return decodeURIComponent(e)}function te(){p.info.onerror.apply(this,arguments)}function ne(e,t,n,r,i,o){var a,u;return u=new Date,t<0&&(t=0),"undefined"==typeof r&&(r=12),"undefined"==typeof i&&(i=0),a=new Date(Date.UTC(e,t,n||1,r,i,o||0)),0==t&&1==n&&a.getUTCHours()+a.getTimezoneOffset()/60<0?a.setUTCHours(0):a.setUTCHours(a.getUTCHours()+a.getTimezoneOffset()/60),a}function re(e,t){var n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,u=void 0,s=void 0,f=void 0,c=void 0,l=void 0,d=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,h=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;if(O(e))if(0==e.length)e=new Date;else if(e.length>15)h.test(e)||d.test(e)?e=new Date(e):(u=e.split(/ /g),c=u[0].split(/\D/g),n=c[0],r=parseFloat(c[1]),i=parseFloat(c[2]),f=u[1]||"09:00",s=f.substring(0,5).split(":"),o=parseFloat(s[0]),a=parseFloat(s[1]),"AM"!==q(f,2)&&"PM"!==q(f,2)||(o+=12),e=ne(n,r-1,i,o,a));else if(14==e.length)l=e.replace(/\D/g,""),e=ne(l.substr(0,4),l.substr(4,2)-1,J(l.substr(6,2)),J(l.substr(8,2)),J(l.substr(10,2)),J(l.substr(12,2)));else if(e.length>7)l=e.replace(/\D/g,""),e=ne(l.substr(0,4),l.substr(4,2)-1,J(l.substr(6,2)));else if(e.length>4)l=e.replace(/\D/g,""),e=ne(l.substr(0,4),l.substr(4,2)-1,1);else{if(e.length>2)return l=e.replace(/\D/g,""),ne(l.substr(0,4),l.substr(4,2)-1,1);e=new Date}return"undefined"==typeof t||"undefined"==typeof e?e:("add"in t&&(e=function(e,t){var n=void 0,r=void 0,i=void 0,o=void 0,a=864e5;return"undefined"!=typeof t.d?e.setTime(e.getTime()+t.d*a):"undefined"!=typeof t.m?(n=e.getFullYear(),r=e.getMonth(),i=e.getDate(),n+=parseInt(t.m/12),r+=t.m%12,o=ae(n,r),o<i&&(i=o),e=new Date(n,r,i,12)):"undefined"!=typeof t.y?e.setTime(e.getTime()+365*t.y*a):"undefined"!=typeof t.h&&e.setTime(e.getTime()+1e3*t.h*60*60),e}(new Date(e),t.add)),"set"in t&&(e=function(e,t){var n=void 0,r=void 0,i=void 0,o={firstDayOfMonth:function(e){return n=e.getFullYear(),r=e.getMonth(),i=1,new Date(n,r,i,12)},lastDayOfMonth:function(e){return n=e.getFullYear(),r=e.getMonth(),i=ae(n,r),new Date(n,r,i,12)}};return t in o?o[t](e):e}(new Date(e),t.set)),"return"in t?function(){var n=t["return"],r=void 0,i=void 0,o=void 0,a=void 0,u=void 0,s=void 0,f=void 0,c=void 0,l=void 0,d=void 0,h=void 0,p=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=void 0,M=void 0,E=void 0,T=void 0;return r=e.getUTCFullYear(),i=ue(e.getMonth()+1,2),o=ue(e.getDate(),2),a=ue(e.getHours(),2),u=ue(e.getMinutes(),2),s=ue(e.getSeconds(),2),f=e.getDay(),c=/[^y]*(yyyy)[^y]*/gi,c.exec(n),l=RegExp.$1,d=/[^m]*(MM)[^m]*/g,d.exec(n),h=RegExp.$1,p=/[^d]*(dd)[^d]*/gi,p.exec(n),m=RegExp.$1,v=/[^h]*(hh)[^h]*/gi,v.exec(n),y=RegExp.$1,b=/[^m]*(mm)[^i]*/g,b.exec(n),w=RegExp.$1,x=/[^s]*(ss)[^s]*/gi,x.exec(n),M=RegExp.$1,E=/[^d]*(dw)[^w]*/gi,E.exec(n),T=RegExp.$1,"yyyy"===l&&(n=n.replace(l,q(r,l.length))),"MM"===h&&(1==h.length&&(i=e.getMonth()+1),n=n.replace(h,i)),"dd"===m&&(1==m.length&&(o=e.getDate()),n=n.replace(m,o)),"hh"===y&&(n=n.replace(y,a)),"mm"===w&&(n=n.replace(w,u)),"ss"===M&&(n=n.replace(M,s)),"dw"==T&&(n=n.replace(T,g.weekNames[f].label)),n}():e)}function ie(e,t){function n(e){return Math.floor(e.getTime()/a)*a}var r,i,o=re(e),a=864e5,u=new Date;return"undefined"==typeof t?r=J((n(o)-n(u))/a,{floor:!0}):(r=J((n(o)-n(u))/a,{floor:!0}),t.today&&(u=re(t.today),r=J((n(o)-n(u))/a,{floor:!0})),t.thisYear&&(i=new Date(u.getFullYear(),o.getMonth(),o.getDate()),r=J((n(i)-n(u))/a,{floor:!0}),r<0&&(i=new Date(u.getFullYear()+1,o.getMonth(),o.getDate()),r=J((n(i)-n(u))/a,{floor:!0}))),t.age&&(i=new Date(u.getFullYear(),o.getMonth(),o.getDate()),r=i.getFullYear()-o.getFullYear()),r)}function oe(e){var t=re(e);return{year:t.getFullYear(),month:t.getMonth()+1,count:parseInt(t.getDate()/7+1)}}function ae(e,t){return 3==t||5==t||8==t||10==t?30:1==t?e%4==0&&e%100!=0||e%400==0?29:28:31}function ue(e,t,n,r){var i=e.toString(r||10);return se(n||"0",t-i.length)+i}function se(e,t){return t<1?"":new Array(t+1).join(e)}function fe(e,t){if(e)for(;function(){var n=!0;if("undefined"==typeof t)e=!!e.parentNode&&e.parentNode;else if(F(t))n=t(e);else if(k(t))for(var r in t)if("tagname"===r){if(e.tagName.toLocaleLowerCase()!=t[r]){n=!1;break}}else if("clazz"===r||"class_name"===r){if(!("className"in e)){n=!1;break}for(var i=e.className.split(h),o=!1,a=0;a<i.length;a++)if(i[a]==t[r]){o=!0;break}n=o}else{if(!e.getAttribute){n=!1;break}if(e.getAttribute(r)!=t[r]){n=!1;break}}return!n}();){if(!e.parentNode||!e.parentNode.parentNode){e=!1;break}e=e.parentNode}return e}function ce(e){var t=/\D?(\d+)([a-zA-Z%]*)/i,n=(""+e).match(t),r=n[2]||"px";return n[1]+r}function le(e){var t;if(k(e)){t="";for(var n in e)t+=n+":"+e[n]+";";return t}if(O(e)){t={};var r=e.split(/[ ]*;[ ]*/g);return r.forEach(function(e){if(""!==(e=e.trim())){var n=e.split(/[ ]*:[ ]*/g);t[n[0]]=n[1]}}),t}}function de(e){if(!e)var e=window.event;return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}function he(e,t,n){function r(t){var n=d,r=h;return d=h=void 0,y=t,g=e.apply(r,n)}function i(e){return y=e,m=setTimeout(u,t),b?r(e):g}function o(e){var n=e-v,r=e-y,i=t-n;return w?Math.min(i,p-r):i}function a(e){var n=e-v,r=e-y;return void 0===v||n>=t||n<0||w&&r>=p}function u(){var e=Date.now();return a(e)?s(e):void(m=setTimeout(u,o(e)))}function s(e){return m=void 0,x&&d?r(e):(d=h=void 0,g)}function f(){void 0!==m&&clearTimeout(m),y=0,d=v=h=m=void 0}function c(){return void 0===m?g:s(Date.now())}function l(){for(var e=Date.now(),n=a(e),o=arguments.length,s=Array(o),f=0;f<o;f++)s[f]=arguments[f];if(d=s,h=this,v=e,n){if(void 0===m)return i(v);if(w)return m=setTimeout(u,t),r(v)}return void 0===m&&(m=setTimeout(u,t)),g}var d=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=0,b=!1,w=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=+t||0,k(n)&&(b=!!n.leading,w="maxWait"in n,p=w?Math.max(+n.maxWait||0,t):p,x="trailing"in n?!!n.trailing:x),l.cancel=f,l.flush=c,l}function pe(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return k(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),he(e,t,{leading:r,maxWait:t,trailing:i})}function ge(e){var t,n;if("object"==("undefined"==typeof e?"undefined":_typeof(e))){if(m.isArray(e)){n=e.length,t=new Array(n);for(var r=0;r<n;r++)t[r]=ge(e[r]);return t}return jQuery.extend({},e)}return e}function me(e){return"[object String]"!=we.call(e)?e:e?e.replace(/[\<\>\&\"]/gm,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";default:return e}}):""}function ve(e){return"[object String]"!=we.call(e)?e:e?e.replace(/(&lt;)|(&gt;)|(&amp;)|(&quot;)/gm,function(e){switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"';default:return e}}):""}function ye(e){return new function(e){this.value=e,this.toString=function(){return this.value},this.format=function(){for(var e=[],t=0,n=arguments.length;t<n;t++)e=e.concat(arguments[t]);return this.value.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})},this.escape=function(){return me(this.value)},this.unescape=function(){return ve(this.value)},this.encode=function(){return X(this.value)},this.decode=function(){return ee(this.value)},this.left=function(e){return Y(this.value,e)},this.right=function(e){return q(this.value,e)},this.camelCase=function(){return V(this.value)},this.snakeCase=function(){return G(this.value)}}(e)}function be(e){function t(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function n(e){return"string"==typeof e&&e.indexOf("%")!=-1}function r(e){return e<=1&&(e=100*e+"%"),e}function i(e){return p.util.number(Math.min(255,Math.max(e,0)),{round:2})}function o(e){return ue(Math.round(e).toString(16),2)}function a(e,r){t(e)&&(e="100%");var i=n(e);return e=Math.min(r,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*r,10)/100),Math.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function u(e,t,n){e=a(e,255),t=a(t,255),n=a(n,255);var r,i,o=Math.max(e,t,n),u=Math.min(e,t,n),s=(o+u)/2;if(o==u)r=i=0;else{var f=o-u;switch(i=s>.5?f/(2-o-u):f/(o+u),o){case e:r=(t-n)/f+(t<n?6:0);break;case t:r=(n-e)/f+2;break;case n:r=(e-t)/f+4}r/=6}return{h:r,s:i,l:s}}function s(e,t,n){function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var i=void 0,o=void 0,u=void 0;if(e=a(e,360),t=a(t,100),n=a(n,100),0===t)i=o=u=n;else{var s=n<.5?n*(1+t):n+t-n*t,f=2*n-s;i=r(f,s,e+1/3),o=r(f,s,e),u=r(f,s,e-1/3)}return{r:255*i,g:255*o,b:255*u}}var f=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),c=function(e){var t=void 0;return(t=f.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=f.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=f.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=f.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=f.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=f.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=f.hex8.exec(e))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4]/255,16),format:"hex8"}:(t=f.hex6.exec(e))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),format:"hex"}:(t=f.hex4.exec(e))?{r:parseInt(t[1]+""+t[1],16),g:parseInt(t[2]+""+t[2],16),b:parseInt(t[3]+""+t[3],16),a:parseInt(t[4]+""+t[4],16),format:"hex8"}:!!(t=f.hex3.exec(e))&&{r:parseInt(t[1]+""+t[1],16),g:parseInt(t[2]+""+t[2],16),b:parseInt(t[3]+""+t[3],16),format:"hex"}};return new function(e){this._originalValue=e,e=c(e),this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a||1,this._format=e.format,this._hex=o(this.r)+o(this.g)+o(this.b),this.getHexValue=function(){return this._hex},this.lighten=function(e){e=0===e?0:e||10;var t=u(this.r,this.g,this.b),n={};return t.l+=e/100,t.l=Math.min(1,Math.max(0,t.l)),t.h=360*t.h,n=s(t.h,r(t.s),r(t.l)),be("rgba("+i(n.r)+", "+i(n.g)+", "+i(n.b)+", "+this.a+")")},this.darken=function(e){e=0===e?0:e||10;var t=u(this.r,this.g,this.b),n={};return t.l-=e/100,t.l=Math.min(1,Math.max(0,t.l)),t.h=360*t.h,n=s(t.h,r(t.s),r(t.l)),be("rgba("+i(n.r)+", "+i(n.g)+", "+i(n.b)+", "+this.a+")")},this.getBrightness=function(){return(299*this.r+587*this.g+114*this.b)/1e3},this.isDark=function(){return this.getBrightness()<128},this.isLight=function(){return!this.isDark()},this.getHsl=function(){var e=u(this.r,this.g,this.b);return e.l=Math.min(1,Math.max(0,e.l)),e.h=360*e.h,{h:e.h,s:e.s,l:e.l}}}(e)}var we=Object.prototype.toString,xe=function(){var e={textRange:{selectAll:function(e,t,n){},arr:function(e,t,n){t.moveStart("character",n[0]),t.collapse(),t.moveEnd("character",n[1])},start:function(e,t,n){t.moveStart("character",0),t.collapse()},end:function(e,t,n){t.moveStart("character",t.text.length),t.collapse()}},range:{selectAll:function(e,t,n){t.selectNodeContents(e)},arr:function(e,t,n){k(n[0])?(t.setStart(n[0].node,n[0].offset),t.setEnd(n[1].node,n[1].offset)):(t.setStart(e.firstChild,n[0]),t.setEnd(e.firstChild,n[1]))},start:function(e,t,n){t.selectNodeContents(e),t.collapse(!0)},end:function(e,t,n){t.selectNodeContents(e),t.collapse(!1)}}};return function(t,r){var i,o,a;if(t instanceof jQuery&&(t=t.get(0)),t){if(n.body.createTextRange?(i=document.body.createTextRange(),i.moveToElementText(t),o="textRange"):window.getSelection&&(a=window.getSelection(),i=document.createRange(),o="range"),"undefined"==typeof r)e[o].selectAll.call(this,t,i,r);else if(j(r))e[o].arr.call(this,t,i,r);else for(var u in e[o])if(r==u){e[o][u].call(this,t,i,r);break}n.body.createTextRange?(i.select(),t.focus()):window.getSelection&&(t.focus(),a.removeAllRanges(),a.addRange(i))}}}();return{alert:W,each:v,map:y,search:b,reduce:M,reduceRight:E,filter:T,sum:w,avg:x,toJson:S,parseJson:A,first:B,last:L,deepCopy:ge,left:Y,right:q,getType:D,isWindow:C,isElement:N,isObject:k,isArray:j,isFunction:F,isString:O,isNumber:R,isNodelist:I,isUndefined:U,isNothing:_,setCookie:z,getCookie:H,camelCase:V,snakeCase:G,number:J,toArray:Q,merge:Z,param:K,error:te,date:re,dday:ie,daysOfMonth:ae,weeksOfMonth:oe,setDigit:ue,times:se,findParentNode:fe,cssNumber:ce,css:le,isDate:P,isDateFormat:$,stopEvent:de,selectRange:xe,debounce:he,throttle:pe,escapeHtml:me,unescapeHtml:ve,string:ye,color:be}}(),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=p:e.ax5=function(){return p}()}).call("undefined"!=typeof window?window:void 0),ax5.def={},ax5.info.errorMsg.ax5dialog={501:"Duplicate call error"},ax5.info.errorMsg.ax5picker={401:"Can not find target element",402:"Can not find boundID",501:"Can not find content key"},ax5.info.errorMsg["single-uploader"]={460:"There are no files to be uploaded.",461:"There is no uploaded files."},ax5.info.errorMsg.ax5calendar={401:"Can not find target element"},ax5.info.errorMsg.ax5formatter={401:"Can not find target element",402:"Can not find boundID",501:"Can not find pattern"},ax5.info.errorMsg.ax5menu={501:"Can not find menu item"},ax5.info.errorMsg.ax5select={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},ax5.info.errorMsg.ax5combobox={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},function(){var e=this,t=/^\s*|\s*$/g;if(Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!==("undefined"==typeof i?"undefined":_typeof(i))&&("function"!=typeof i||null===i))throw new TypeError("type err");var o,a,u=[];for(o in i)e.call(i,o)&&u.push(o);if(t)for(a=0;a<r;a++)e.call(i,n[a])&&u.push(n[a]);return u}}()),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var r,i=arguments[1];for(r=0;r<n;r++)r in t&&e.call(i,t[r],r,t)}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw TypeError("function");var n=[].slice,r=n.call(arguments,1),i=this,o=function(){return i.apply(this instanceof t?this:e,r.concat(n.call(arguments)))};return t.prototype=i.prototype,o.prototype=new t,o}),function(){if(!document.querySelectorAll&&!document.querySelector&&document.createStyleSheet){var e=document.createStyleSheet(),t=function(t,n){var r,i=document.all,o=i.length,a=[];for(e.addRule(t,"foo:bar"),r=0;r<o&&!("bar"===i[r].currentStyle.foo&&(a.push(i[r]),a.length>n));r+=1);return e.removeRule(0),a};document.querySelectorAll=function(e){return t(e,1/0)},document.querySelector=function(e){return t(e,1)[0]||null}}}(),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(t,"")}}(),window.JSON||(window.JSON={parse:function(e){return new Function("","return "+e)()},stringify:function(){var e,t=/["]/g;return e=function(n){var r,i,o;switch(r="undefined"==typeof n?"undefined":_typeof(n)){case"string":return'"'+n.replace(t,'\\"')+'"';case"number":case"boolean":return n.toString();case"undefined":return"undefined";case"function":return'""';case"object":if(!n)return"null";if(r="",n.splice){for(i=0,o=n.length;i<o;i++)r+=","+e(n[i]);return"["+r.substr(1)+"]"}for(i in n)n.hasOwnProperty(i)&&void 0!==n[i]&&"function"!=typeof n[i]&&(r+=',"'+i+'":'+e(n[i]));return"{"+r.substr(1)+"}"}}}()}),function(){if(!document.documentMode||document.documentMode>=9)return!1;var e=Array.prototype.splice;Array.prototype.splice=function(){var t=Array.prototype.slice.call(arguments);return"undefined"==typeof t[1]&&(t[1]=this.length-t[0]),e.apply(this,t)}}(),function(){var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,n){if(n="undefined"!=typeof n?n:this.length,"[object Array]"===Object.prototype.toString.call(this))return e.call(this,t,n);var r,i,o=[],a=this.length,u=t||0;u=u>=0?u:Math.max(0,a+u);var s="number"==typeof n?Math.min(n,a):a;if(n<0&&(s=a+n),i=s-u,i>0)if(o=new Array(i),this.charAt)for(r=0;r<i;r++)o[r]=this.charAt(u+r);else for(r=0;r<i;r++)o[r]=this[u+r];return o}}}(),function(e){for(var t,n,r={},i=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)e[t]=e[t]||r;for(;n=a.pop();)e[n]=e[n]||i}(window.console||{}),!(window.webkitMatchMedia||window.mozMatchMedia||window.oMatchMedia||window.msMatchMedia||window.matchMedia)){var e=document.getElementsByTagName("html")[0];e.className+=" no-matchmedia"}window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===r.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,t=e("only all").matches,n=!1,r=0,i=[],o=function(t){clearTimeout(r),r=setTimeout(function(){for(var t=0,n=i.length;t<n;t++){var r=i[t].mql,o=i[t].listeners||[],a=e(r.media).matches;if(a!==r.matches){r.matches=a;for(var u=0,s=o.length;u<s;u++)o[u].call(window,r)}}},30)};window.matchMedia=function(r){var a=e(r),u=[],s=0;return a.addListener=function(e){t&&(n||(n=!0,window.addEventListener("resize",o,!0)),0===s&&(s=i.push({mql:a,listeners:u})),u.push(e))},a.removeListener=function(e){for(var t=0,n=u.length;t<n;t++)u[t]===e&&u.splice(t,1)},a}}();document.getElementsByTagName("html")[0],document.getElementsByTagName("body")[0]}.call(window),ax5.ui=function(){function e(){this.config={},this.name="root",this.setConfig=function(e,t){return jQuery.extend(!0,this.config,e),"undefined"!=typeof t&&t!==!0||this.init(),this},this.init=function(){console.log(this.config)},this.bindWindowResize=function(e){setTimeout(function(){jQuery(window).resize(function(){this.bindWindowResize__&&clearTimeout(this.bindWindowResize__),this.bindWindowResize__=setTimeout(function(){e.call(this)}.bind(this),10)}.bind(this))}.bind(this),100)},this.stopEvent=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1},this.toString=function(){return this.name+"@"+this.version},this.main=function(){}.apply(this,arguments)}function t(e,t){if(!e||!e.className)throw"invalid call";var n=e.classStore?e.classStore:ax5.ui;if(!n)throw"invalid classStore";ax5.def[e.className]={version:ax5.info.version};var r=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2])}},i=function(e,t,n){return n.name=e,n.version=t,n.instanceId=ax5.getGuid(),n},o=function(t){var n=e.superClass?e.superClass:ax5.ui.root;if(!ax5.util.isFunction(n))throw"invalid superClass";n.call(this),t.prototype=new n},a=function u(){if(!(this&&this instanceof u))throw"invalid call";var n=r(t,arguments);return i(e.className,e.version||"",n)};o.call(this,t),n[e.className]=a}return{root:e,addClass:t}}(),function(e,t){t(e.mustache={})}(window.ax5,function(e){function t(e){return"function"==typeof e}function n(e){return g(e)?"array":"undefined"==typeof e?"undefined":_typeof(e)}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t in e}function o(e,t){return m.call(e,t)}function a(e){return!o(v,e)}function u(e){return String(e).replace(/[&<>"'\/]/g,function(e){return y[e]})}function s(t,n){function i(){if(v&&!y)for(;m.length;)delete p[m.pop()];else m=[];v=!1,y=!1}function o(e){if("string"==typeof e&&(e=e.split(w,2)),!g(e)||2!==e.length)throw new Error("Invalid tags: "+e);u=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),d=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var u,s,d,h=[],p=[],m=[],v=!1,y=!1;o(n||e.tags);for(var T,S,A,D,C,N,k=new l(t);!k.eos();){if(T=k.pos,A=k.scanUntil(u))for(var j=0,F=A.length;j<F;++j)D=A.charAt(j),a(D)?m.push(p.length):y=!0,p.push(["text",D,T,T+1]),T+=1,"\n"===D&&i();if(!k.scan(u))break;if(v=!0,S=k.scan(E)||"name",k.scan(b),"="===S?(A=k.scanUntil(x),k.scan(x),k.scanUntil(s)):"{"===S?(A=k.scanUntil(d),k.scan(M),k.scanUntil(s),S="&"):A=k.scanUntil(s),!k.scan(s))throw new Error("Unclosed tag at "+k.pos);if(C=[S,A,T,k.pos],p.push(C),"#"===S||"^"===S)h.push(C);else if("/"===S){if(N=h.pop(),!N)throw new Error('Unopened section "'+A+'" at '+T);if(N[1]!==A)throw new Error('Unclosed section "'+N[1]+'" at '+T)}else"name"===S||"{"===S||"&"===S?y=!0:"="===S&&o(A)}if(N=h.pop())throw new Error('Unclosed section "'+N[1]+'" at '+k.pos);return c(f(p))}function f(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function c(e){for(var t,n,r=[],i=r,o=[],a=0,u=e.length;a<u;++a)switch(t=e[a],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function l(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.cache={".":this.view,"@each":function(){var e=[];for(var t in this)e.push({"@key":t,"@value":this[t]});return e}},this.parent=t}function h(){this.cache={}}var p=Object.prototype.toString,g=Array.isArray||function(e){return"[object Array]"===p.call(e)},m=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=/\s*/,w=/\s+/,x=/\s*=/,M=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;
    l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},l.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,a,u=this,s=!1;u;){if(e.indexOf(".")>0)for(n=u.view,o=e.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(s=i(n,o[a])),n=n[o[a++]];else n=u.view[e],s=i(u.view,e);if(s)break;u=u.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=s(e,t)),r},h.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof d?t:new d(t);return this.renderTokens(r,i,n,e)},h.prototype.renderTokens=function(e,t,n,r){for(var i,o,a,u="",s=0,f=e.length;s<f;++s)a=void 0,i=e[s],o=i[0],"#"===o?a=this.renderSection(i,t,n,r):"^"===o?a=this.renderInverted(i,t,n,r):">"===o?a=this.renderPartial(i,t,n,r):"&"===o?a=this.unescapedValue(i,t):"name"===o?a=this.escapedValue(i,t):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(u+=a);return u},h.prototype.renderSection=function(e,n,r,i){function o(e){return a.render(e,n,r)}var a=this,u="",s=n.lookup(e[1]);if(s){if(g(s))for(var f=0,c=s.length;f<c;++f)s[f]&&("object"===_typeof(s[f])&&(s[f]["@i"]=f,s[f]["@first"]=0===f),u+=this.renderTokens(e[4],n.push(s[f]),r,i));else if("object"===("undefined"==typeof s?"undefined":_typeof(s))||"string"==typeof s||"number"==typeof s)u+=this.renderTokens(e[4],n.push(s),r,i);else if(t(s)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");s=s.call(n.view,i.slice(e[3],e[5]),o),null!=s&&(u+=s)}else u+=this.renderTokens(e[4],n,r,i);return u}},h.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||g(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},h.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},h.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},h.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.3",e.tags=["{{","}}"];var T=new h;e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,t,r)},e.to_html=function(n,r,i,o){var a=e.render(n,r,i);return t(o)?void o(a):a},e.escape=u,e.Scanner=l,e.Context=d,e.Writer=h});

/*!
 * AX5 Formatter
 */
!function(){var t=ax5.ui,e=ax5.util,n=void 0;t.addClass({className:"formatter"},function(){var t=(new Date,function(t,e){if("undefined"==typeof e&&(e=t.value.length),t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}else t.selectionStart&&(t.focus(),t.selectionStart=e,t.selectionEnd=e)});return function(){var r,a=this;this.instanceId=ax5.getGuid(),this.config={animateTime:250},this.queue=[],this.openTimer=null,this.closeTimer=null,r=this.config;var u={focus:function(t,e,n){t.$input.data("__originValue__")||t.$input.data("__originValue__",t.$input.val())},keydown:function(t,e,n){var r=!1;t.enterableKeyCodes&&(n.which&&t.enterableKeyCodes[n.which]||n.metaKey||n.ctrlKey||n.shiftKey||(r=!0)),r&&ax5.util.stopEvent(n)},keyup:function(e,r,a){var u,i,s,o,l,c=e.$input.get(0);"selectionStart"in c?u=c.selectionStart:document.selection&&(o=document.selection.createRange(),l=document.selection.createRange().text.length,o.moveStart("character",-c.value.length),u=o.text.length-l),i=c.value,s=e.pattern in n.formatter?n.formatter[e.pattern].getPatternValue.call(this,e,r,a,c.value):i,s!=i&&(e.$input.val(s).trigger("change"),t(c,u+s.length-i.length))},blur:function(t,e,r,a){var u,i,s=t.$input.get(0);t.$input.removeData("__originValue__"),u=s.value,i=t.pattern in n.formatter?n.formatter[t.pattern].getPatternValue.call(this,t,e,r,s.value,"blur"):u,a?t.$input.val(i):i!=u&&t.$input.val(i).trigger("change")}},i=function(t,e){if(!t.pattern&&("INPUT"==t.$target.get(0).tagName?t.pattern=t.$target.attr("data-ax5formatter"):t.pattern=t.$target.find('input[type="text"]').attr("data-ax5formatter"),!t.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(t.target),this;var r=/[^\(^\))]+/gi,a=t.pattern.match(r);return t.pattern=a[0],t.patternArgument=a[1]||"",t.pattern in n.formatter&&(t.enterableKeyCodes=n.formatter[t.pattern].getEnterableKeyCodes.call(this,t,e)),t.$input.unbind("focus.ax5formatter").bind("focus.ax5formatter",u.focus.bind(this,this.queue[e],e)),t.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",u.keydown.bind(this,this.queue[e],e)),t.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",u.keyup.bind(this,this.queue[e],e)),t.$input.unbind("blur.ax5formatter").bind("blur.ax5formatter",u.blur.bind(this,this.queue[e],e)),u.blur.call(this,this.queue[e],e),this},s=function(t){return e.isString(t)||(t=jQuery(t).data("data-formatter")),e.search(this.queue,function(){return this.id==t})};this.init=function(){},this.bind=function(t){var n={},u=void 0;if(jQuery.extend(!0,n,r),t&&jQuery.extend(!0,n,t),t=n,!t.target)return console.log(ax5.info.getError("ax5formatter","401","bind")),this;if(t.$target=jQuery(t.target),"INPUT"==t.$target.get(0).tagName)t.$input=t.$target;else if(t.$input=t.$target.find('input[type="text"]'),t.$input.length>1)return t.$input.each(function(){t.target=this,a.bind(t)}),this;return t.$input="INPUT"==t.$target.get(0).tagName?t.$target:t.$target.find('input[type="text"]'),t.id||(t.id=t.$input.data("ax5-formatter")),t.id||(t.id="ax5-formatter-"+ax5.getGuid(),t.$input.data("ax5-formatter",t.id)),u=e.search(this.queue,function(){return this.id==t.id}),u===-1?(this.queue.push(t),i.call(this,this.queue[this.queue.length-1],this.queue.length-1)):(this.queue[u]=t,i.call(this,this.queue[u],u)),this},this.formatting=function(t){var n=e.isNumber(t)?t:s.call(this,t);if(n===-1)for(var r=this.queue.length;r--;)u.blur.call(this,this.queue[r],r,null,!0);else u.blur.call(this,this.queue[n],n,null,!0);return this},this.unbind=function(){},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),n=ax5.ui.formatter}(),function(){var t=ax5.ui.formatter,e=ax5.util,n=new Date,r={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},a={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},u={getEnterableKeyCodes:function(e){var n={188:","};return"int"==e.patternArgument||(n[190]="."),jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,n,r,a,u){a=a.replace(/[^0-9^\.^\-]/g,"");var i,s=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),o=a.split(".");o[0]+=".";do o[0]=o[0].replace(s,"$1,$2");while(s.test(o[0]));return i=o.length>1?e.isNumber(t.maxRound)?o[0]+e.left(o[1],t.maxRound):o.join(""):o[0].split(".")[0]}},i={getEnterableKeyCodes:function(e){var n={190:".",110:"."};return jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,n,r,a,u){a=a.replace(/[^0-9^\.^\-]/g,"");var i,s=a.split(".");return s[0]+=".",i=s.length>1?e.isNumber(t.maxRound)?s[0]+e.left(s[1],t.maxRound):s.join(""):s[0].split(".")[0]}},s={getEnterableKeyCodes:function(e){var n={189:"-",191:"/"};return jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,r,a,u,i){if(u=u.replace(/\D/g,""),""==u)return u;var s=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})?.*$/;"time"==t.patternArgument?s=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})? ?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/:"year"==t.patternArgument?s=/^([0-9]{0,4})?.*$/:"month"==t.patternArgument&&(s=/^([0-9]{4})\-?([0-9]{1,2})?.*$/);var o=u.match(s),l="",c=function(t,r,a,u){var i={Y:function(t){return"undefined"==typeof t&&(t=n.getFullYear()),""!=t&&"0000"!=t||(t=n.getFullYear()),t.length<4?e.setDigit(t,4):t},M:function(t){return"undefined"==typeof t&&(t=n.getMonth()+1),t>12?12:0==t?"01":e.setDigit(t,2)},D:function(t){"undefined"==typeof t&&(t=n.getDate()+1);var r=e.daysOfMonth(u[1],u[2]-1);return t>r?r:0==t?"01":e.setDigit(t,2)},h:function(t){return t||(t=0),t>23?23:e.setDigit(t,2)},m:function(t){return t||(t=0),t>59?59:e.setDigit(t,2)},s:function(t){return t||(t=0),t>59?59:e.setDigit(t,2)}};return a?i[r](t):t};return l=u.replace(s,function(e,n){var r=[];return"year"==t.patternArgument?r.push(c(arguments[1],"Y",i)):"month"==t.patternArgument?(r.push(c(arguments[1],"Y",i)),(arguments[2]||i)&&r.push("-"+c(arguments[2],"M",i))):"time"==t.patternArgument?(r.push(c(arguments[1],"Y",i)),(arguments[2]||i)&&r.push("-"+c(arguments[2],"M",i)),(arguments[3]||i)&&r.push("-"+c(arguments[3],"D",i,arguments)),(arguments[4]||i)&&r.push(" "+c(arguments[4],"h",i)),(arguments[5]||i)&&r.push(":"+c(arguments[5],"m",i)),(arguments[6]||i)&&r.push(":"+c(arguments[6],"s",i))):(r.push(c(arguments[1],"Y",i)),(arguments[2]||i)&&r.push("-"+c(arguments[2],"M",i)),(arguments[3]||i)&&r.push("-"+c(arguments[3],"D",i,arguments))),r.join("")}),"blur"!=i||o?o||(l=l.length>4?e.left(l,4):l):l=function(){var e=[];return"year"==t.patternArgument?e.push(c(0,"Y",i)):"month"==t.patternArgument?(e.push(c(0,"Y",i)),e.push("-"+c(0,"M",i))):"time"==t.patternArgument?(e.push(c(0,"Y",i)),e.push("-"+c(0,"M",i)),e.push("-"+c(0,"D",i,arguments)),e.push(" "+c(0,"h",i)),e.push(":"+c(0,"m",i)),e.push(":"+c(0,"s",i))):(e.push(c(0,"Y",i)),e.push("-"+c(0,"M",i)),e.push("-"+c(0,"D",i,arguments))),e.join("")}(),l}},o={getEnterableKeyCodes:function(e){var n={186:":"};return jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,n,r,a,u){a=a.replace(/\D/g,"");var i=/^([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/,s=a.match(i),o=a.replace(i,function(t,e){var n=[arguments[1]];return arguments[2]&&n.push(":"+arguments[2]),arguments[3]&&n.push(":"+arguments[3]),n.join("")});return s||(o=o.length>2?e.left(o,2):o),o}},l={getEnterableKeyCodes:function(e){var n={189:"-"};return jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,n,r,a){r=r.replace(/\D/g,"");var u=/^([0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,5})?.*$/,i=r.replace(u,function(t,e){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),n.join("-")});return i}},c={getEnterableKeyCodes:function(e){var n={189:"-",188:",",107:"+",187:"+"};return jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,n,r,a){var u=r.replace(/\D/g,""),i=/^([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/;"+"==r.substr(0,1)&&(u="+"+r.replace(/\D/g,""),i=/^\+?([0-9]{2}) ?([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/),"02"==u.substr(0,2)&&(i=/^([0-9]{2})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/);var s=u.replace(i,function(t,e){console.log(t,e);var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),arguments[4]&&n.push(arguments[4]),arguments[5]&&n.push(arguments[5]),n.join("-")});return s}},f={getEnterableKeyCodes:function(e){var n={189:"-"};return jQuery.extend(n,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,n,r,a){r=r.replace(/\D/g,"").substring(0,16);var u=/^([0-9]{4})\-?([0-9]{4})?\-?([0-9]{4})?\-?([0-9]{4})?/,i=r.replace(u,function(t,e){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),arguments[4]&&n.push(arguments[4]),n.join("-")});return i}},h={getEnterableKeyCodes:function(t){return t.getEnterableKeyCodes?t.getEnterableKeyCodes.call(t,{$input:t.$input}):null},getPatternValue:function(t,e,n,r,a){if(t.getPatternValue)return t.getPatternValue.call(t,{event:n,$input:t.$input,value:r})}};t.formatter={ctrlKeys:r,numKeys:a,money:u,number:i,date:s,time:o,bizno:l,phone:c,credit:f,custom:h}}(),ax5.ui.formatter_instance=new ax5.ui.formatter,jQuery.fn.ax5formatter=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"formatting":return ax5.ui.formatter_instance.formatting(this);case"unbind":return ax5.ui.formatter_instance.unbind(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.formatter_instance.bind(t)});return this}}();
//# sourceMappingURL=ax5formatter.min.js.map

/*!
 * AX5 select
 */
!function(){var e=ax5.ui,t=ax5.util,i=void 0;e.addClass({className:"select"},function(){var e=function(){var e=this,n=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:100,lang:{noSelected:"",noOptions:"no options",loading:"now loading..",multipleLabel:'"{{label}}"외 {{length}}건'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,this.xvar={},n=this.config;var o=jQuery(window),s={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},l=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),"changeValue"==t.state&&(e&&e.onChange?e.onChange.call(t,t):this.onChange&&this.onChange.call(t,t)),e=null,t=null,!0},a=function(){for(var e=this.queue.length,i=void 0;e--;)this.queue[e].$display&&(i=Math.max(this.queue[e].$select.outerWidth(),t.number(this.queue[e].minWidth)),this.queue[e].$display.css({"min-width":i}),this.queue[e].reset&&this.queue[e].$display.find(".addon-icon-reset").css({"line-height":this.queue[e].$display.height()+"px"}));return e=null,i=null,this},c=function(e){if(!this.activeSelectOptionGroup)return this;var t=this.queue[this.activeSelectQueueIndex],i={},n=0,s={},l={},a=void 0;e&&jQuery(document.body).append(this.activeSelectOptionGroup),i=t.$target.offset(),s={width:t.$target.outerWidth(),height:t.$target.outerHeight()},l={winWidth:Math.max(o.width(),jQuery(document.body).width()),winHeight:Math.max(o.height(),jQuery(document.body).height()),width:this.activeSelectOptionGroup.outerWidth(),height:this.activeSelectOptionGroup.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction?a=t.direction:(a="top",i.top-l.height-n<0?a="top":i.top+s.height+l.height+n>l.winHeight&&(a="bottom")),e&&this.activeSelectOptionGroup.addClass("direction-"+a),this.activeSelectOptionGroup.css(function(){if("top"==a){if(i.top+s.height+l.height+n>l.winHeight){var e=i.top+s.height/2-l.height/2;return e+l.height+n>l.winHeight&&(e=0),e<0&&(e=0),{left:i.left,top:e,width:s.width}}return{left:i.left,top:i.top+s.height+1,width:s.width}}if("bottom"==a)return{left:i.left,top:i.top-l.height-1,width:s.width}}.call(this))},u=function(e,i){if(!this.activeSelectOptionGroup)return this;var n=this.queue[this.activeSelectQueueIndex],o="display";return(i=t.findParentNode(e.target,function(e){return e.getAttribute("data-option-value")||""==e.getAttribute("data-option-value")?(o="optionItem",!0):n.$target.get(0)==e?(o="display",!0):void 0}))?("optionItem"===o&&(this.val(n.id,{index:{gindex:i.getAttribute("data-option-group-index"),index:i.getAttribute("data-option-index")}},void 0,"internal"),n.$select.trigger("change"),n.$display.focus(),n.multiple||this.close()),this):(this.close(),this)},d=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)this.close();else if(e.which==ax5.info.eventKeys.RETURN)if(this.queue[this.activeSelectQueueIndex].optionFocusIndex>-1){var t=this.activeSelectOptionGroup.find('[data-option-focus-index="'+this.queue[this.activeSelectQueueIndex].optionFocusIndex+'"]');this.val(this.queue[this.activeSelectQueueIndex].id,{index:{gindex:t.attr("data-option-group-index"),index:t.attr("data-option-index")}},void 0,"internal"),this.queue[this.activeSelectQueueIndex].$select.trigger("change"),this.queue[this.activeSelectQueueIndex].multiple||this.close()}else this.close()},p=function(e){var i=this.queue[e],n=[];return t.isArray(i.selected)&&i.selected.length>0?i.selected.forEach(function(e){e.selected&&n.push(e[i.columnKeys.optionText])}):!i.multiple&&i.options&&i.options[0]?i.options[0].optgroup?n[0]=i.options[0].options[0][i.columnKeys.optionText]:n[0]=i.options[0][i.columnKeys.optionText]:n[0]=i.lang.noSelected,function(){if(i.multiple&&n.length>1){var e={label:n[0],length:n.length-1};return ax5.mustache.render(i.lang.multipleLabel,e)}return n[0]}()},r=function(e){this.queue[e].$displayLabel.html(p.call(this,e))},h=function(e,t){var i=[],n=-1,o=this.queue[e].indexedOptions.length-1,s=void 0;if(t){for(;o-n++;){if(s=this.queue[e].indexedOptions[n],(""+s.value).toLowerCase()==t.toLowerCase()){i=[{"@findex":s["@findex"],optionsSort:0}];break}var l=(""+s.value).toLowerCase().search(t.toLowerCase());if(l>-1&&(i.push({"@findex":s["@findex"],optionsSort:l}),i.length>2))break;l=null}i.sort(function(e,t){return e.optionsSort-t.optionsSort})}i&&i.length>0&&x.call(this,e,void 0,i[0]["@findex"]);try{return i}finally{i=null,n=null,o=null,s=null}},x=function(e,t,i){var n=void 0,o=void 0,s=void 0,l=void 0;if(this.activeSelectOptionGroup&&this.queue[e].options&&this.queue[e].options.length>0){"undefined"!=typeof i?n=i:(o=this.queue[e].optionFocusIndex==-1?this.queue[e].optionSelectedIndex||-1:this.queue[e].optionFocusIndex,o==-1?n=t>0?0:this.queue[e].optionItemLength-1:(n=o+t,n<0?n=0:n>this.queue[e].optionItemLength-1&&(n=this.queue[e].optionItemLength-1))),this.queue[e].optionFocusIndex=n,this.activeSelectOptionGroup.find("[data-option-focus-index]").removeClass("hover"),s=this.activeSelectOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),l=this.activeSelectOptionGroup.find('[data-els="content"]');var a=s.outerHeight(),c=l.innerHeight(),u=l.scrollTop(),d=s.position().top+l.scrollTop();c+u<d+a?l.scrollTop(d+a-c):u>d&&l.scrollTop(d)}},f=function(){var o=t.debounce(function(t,i){h.call(e,i,t),e.queue[i].$displayInput.val("")},300),l={click:function(i,n){var o=t.findParentNode(n.target,function(e){if(e.getAttribute("data-selected-clear"))return!0});o?this.val(i,{clear:!0}):e.activeSelectQueueIndex==i?this.queue[i].optionFocusIndex==-1&&e.close():(e.open(i),t.stopEvent(n))},keyUp:function(e,t){t.which==ax5.info.eventKeys.SPACE?l.click.call(this,e,t):s[t.which]||o(this.queue[e].$displayInput.val(),e)},keyDown:function(e,i){i.which==ax5.info.eventKeys.DOWN?(x.call(this,e,1),t.stopEvent(i)):i.which==ax5.info.eventKeys.UP&&(x.call(this,e,-1),t.stopEvent(i))},blur:function(e,t){},selectChange:function(e,t){this.val(e,this.queue[e].$select.val(),!0)}};return function(e){var t=this.queue[e],o={};return t.selected=[],t.options||(t.options=[]),t.options.forEach(function(e){e[n.columnKeys.optionSelected]&&t.selected.push(jQuery.extend({},e))}),t.$display?(t.$displayLabel.html(p.call(this,e)),t.options=m.call(this,e,t.options),a.call(this)):(o.instanceId=this.instanceId,o.id=t.id,o.name=t.name,o.theme=t.theme,o.tabIndex=t.tabIndex,o.multiple=t.multiple,o.reset=t.reset,o.label=p.call(this,e),o.formSize=function(){return t.size?"input-"+t.size:""}(),t.$display=i.tmpl.get.call(this,"tmpl",o),t.$displayLabel=t.$display.find('[data-ax5select-display="label"]'),t.$target.find("select").get(0)?(t.$select=t.$target.find("select"),t.$select.attr("tabindex","-1").attr("class","form-control "+o.formSize),o.name&&t.$select.attr("name","name"),o.multiple&&t.$select.attr("multiple","multiple")):(t.$select=i.tmpl.get.call(this,"selectTmpl",o),t.$target.append(t.$select)),t.$target.append(t.$display),t.$displayInput=t.$display.find('[data-ax5select-display="input"]'),t.options=m.call(this,e,t.options),a.call(this),t.$displayInput.unbind("blur.ax5select").bind("blur.ax5select",l.blur.bind(this,e)).unbind("keyup.ax5select").bind("keyup.ax5select",l.keyUp.bind(this,e)).unbind("keydown.ax5select").bind("keydown.ax5select",l.keyDown.bind(this,e))),t.$display.unbind("click.ax5select").bind("click.ax5select",l.click.bind(this,e)).unbind("keyup.ax5select").bind("keyup.ax5select",l.keyUp.bind(this,e)),t.$select.unbind("change.ax5select").bind("change.ax5select",l.selectChange.bind(this,e)),o=null,t=null,e=null,this}}(),m=function(){var i=function(e,t){t?this.queue[e].multiple?this.queue[e].selected.push(jQuery.extend({},t)):this.queue[e].selected[0]=jQuery.extend({},t):this.queue[e].selected=[]};return function(n,o){var s=this.queue[n],l=void 0,a=void 0,c=void 0,u=0;return i.call(this,n,!1),o?(s.options=o,s.indexedOptions=[],l=[],s.options.forEach(function(t,o){t.optgroup?(t["@gindex"]=o,t.options.forEach(function(t,o){t["@index"]=o,t["@findex"]=u,l.push('<option value="'+t[s.columnKeys.optionValue]+'" '+(t[s.columnKeys.optionSelected]?' selected="selected"':"")+">"+t[s.columnKeys.optionText]+"</option>"),t[s.columnKeys.optionSelected]&&i.call(e,n,t),s.indexedOptions.push({"@findex":u,value:t[s.columnKeys.optionValue],text:t[s.columnKeys.optionText]}),u++})):(t["@index"]=o,t["@findex"]=u,l.push('<option value="'+t[s.columnKeys.optionValue]+'" '+(t[s.columnKeys.optionSelected]?' selected="selected"':"")+">"+t[s.columnKeys.optionText]+"</option>"),t[s.columnKeys.optionSelected]&&i.call(e,n,t),s.indexedOptions.push({"@findex":u,value:t[s.columnKeys.optionValue],text:t[s.columnKeys.optionText]}),u++)}),s.optionItemLength=u,s.$select.html(l.join(""))):(a=t.toArray(s.$select.get(0).options),c=[],a.forEach(function(t,o){var l={};l[s.columnKeys.optionValue]=t.value,l[s.columnKeys.optionText]=t.text,l[s.columnKeys.optionSelected]=t.selected,l["@index"]=o,l["@findex"]=o,t.selected&&i.call(e,n,l),c.push(l),l=null}),s.options=c,s.indexedOptions=c),!s.multiple&&0==s.selected.length&&s.options&&s.options[0]&&(s.options[0].optgroup?(s.options[0].options[0][s.columnKeys.optionSelected]=!0,s.selected.push(jQuery.extend({},s.options[0].options[0]))):(s.options[0][s.columnKeys.optionSelected]=!0,s.selected.push(jQuery.extend({},s.options[0])))),l=null,a=null,c=null,s.options}}(),v=function(e){return t.isString(e)||(e=jQuery(e).data("data-ax5select-id")),t.isString(e)?t.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5select","402","getQueIdx"))};this.init=function(){this.onStateChanged=n.onStateChanged,this.onChange=n.onChange,jQuery(window).bind("resize.ax5select-display-"+this.instanceId,function(){a.call(this)}.bind(this))},this.bind=function(e){var i={},o=void 0;return e=jQuery.extend(!0,i,n,e),e.target?(e.$target=jQuery(e.target),e.id||(e.id=e.$target.data("data-ax5select-id")),e.id||(e.id="ax5select-"+ax5.getGuid(),e.$target.data("data-ax5select-id",e.id)),e.name=e.$target.attr("data-ax5select"),e.options&&(e.options=JSON.parse(JSON.stringify(e.options))),function(i){t.isObject(i)&&!i.error&&(e=jQuery.extend(!0,e,i))}(t.parseJson(e.$target.attr("data-ax5select-config"),!0)),o=t.search(this.queue,function(){return this.id==e.id}),o===-1?(this.queue.push(e),f.call(this,this.queue.length-1)):(this.queue[o].selected=[],this.queue[o].options=e.options,this.queue[o]=jQuery.extend(!0,{},this.queue[o],e),f.call(this,o)),i=null,o=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var e=function(e){e.onExpand.call({self:this,item:e},function(e){if(this.waitOptionsCallback){var n={},o=this.queue[this.activeSelectQueueIndex];!function(e,i){var n={};i.options.forEach(function(t,i){t["@index"]=i,n[t[e.columnKeys.optionValue]]=t}),t.isArray(e.selected)&&e.selected.forEach(function(t){n[t[e.columnKeys.optionValue]]&&(i.options[n[t[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(o,e),o.$displayLabel.html(p.call(this,this.activeSelectQueueIndex)),o.options=m.call(this,this.activeSelectQueueIndex,e.options),a.call(this),n.id=o.id,n.theme=o.theme,n.size="ax5select-option-group-"+o.size,n.multiple=o.multiple,n.lang=o.lang,n.options=o.options,this.activeSelectOptionGroup.find('[data-els="content"]').html(i.tmpl.get.call(this,"optionsTmpl",n,o.columnKeys))}}.bind(this))};return function(o,s){this.waitOptionsCallback=null;var a=t.isNumber(o)?o:v.call(this,o),p=this.queue[a],r={},h=void 0,x=void 0;return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==a?this:s>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(a,(s||0)+1)}.bind(this),n.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),r.id=p.id,r.theme=p.theme,r.size="ax5select-option-group-"+p.size,r.multiple=p.multiple,r.lang=p.lang,p.$display.attr("data-select-option-group-opened","true"),p.onExpand&&(r.waitOptions=!0),r.options=p.options,this.activeSelectOptionGroup=i.tmpl.get.call(this,"optionGroupTmpl",r),this.activeSelectOptionGroup.find('[data-els="content"]').html(i.tmpl.get.call(this,"optionsTmpl",r,p.columnKeys)),this.activeSelectQueueIndex=a,c.call(this,"append"),jQuery(window).bind("resize.ax5select-"+this.instanceId,function(){c.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(x=this.activeSelectOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),x.get(0)&&(h=x.position().top-this.activeSelectOptionGroup.height()/3,this.activeSelectOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:h},p.animateTime,"swing",function(){}))),p.$displayInput.val(""),setTimeout(function(){p.$displayInput.trigger("focus"),jQuery(window).bind("keyup.ax5select-"+this.instanceId,function(e){e=e||window.event,d.call(this,e),t.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5select-"+this.instanceId,function(e){e=e||window.event,u.call(this,e),t.stopEvent(e)}.bind(this))}.bind(this),300),l.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,e.call(this,p)),r=null,h=null,x=null,this))}}(),this.update=function(e){return this.bind(e),this},this.setOptions=function(e,t){var i=v.call(this,e);return this.queue[i].selected=[],this.queue[i].options=t,f.call(this,i),this},this.val=function(){var i=function(e,t,i){return"undefined"==typeof i?!e.multiple||!t:i},n=function(e){this.queue[e].options.forEach(function(e){e.optgroup?e.options.forEach(function(e){e.selected=!1}):e.selected=!1})},o={index:function(n,o,s){var l=this.queue[n];t.isString(o.index.gindex)?(l.options[o.index.gindex].options[o.index.index][l.columnKeys.optionSelected]=i(l,l.options[o.index.gindex].options[o.index.index][l.columnKeys.optionSelected],s),e.activeSelectOptionGroup.find('[data-option-group-index="'+o.index.gindex+'"][data-option-index="'+o.index.index+'"]').attr("data-option-selected",l.options[o.index.gindex].options[o.index.index][l.columnKeys.optionSelected].toString())):(l.options[o.index.index][l.columnKeys.optionSelected]=i(l,l.options[o.index.index][l.columnKeys.optionSelected],s),e.activeSelectOptionGroup.find('[data-option-index="'+o.index.index+'"]').attr("data-option-selected",l.options[o.index.index][l.columnKeys.optionSelected].toString())),m.call(this,n,l.options),r.call(this,n),c.call(this)},arr:function(i,n,s){n.forEach(function(n){if(t.isString(n)||t.isNumber(n))o.value.call(e,i,n,s);else for(var l in o)if(n[l]){o[l].call(e,i,n,s);break}})},value:function(e,n,o){var s=this.queue[e],l=t.search(s.options,function(){return this[s.columnKeys.optionValue]==n});return l>-1?(s.options[l][s.columnKeys.optionSelected]=i(s,s.options[l][s.columnKeys.optionSelected],o),m.call(this,e,s.options),void r.call(this,e)):void console.log(ax5.info.getError("ax5select","501","val"))},text:function(e,n,o){var s=this.queue[e],l=t.search(s.options,function(){return this[s.columnKeys.optionText]==n});return l>-1?(s.options[l][s.columnKeys.optionSelected]=i(s,s.options[l][s.columnKeys.optionSelected],o),m.call(this,e,s.options),void r.call(this,e)):void console.log(ax5.info.getError("ax5select","501","val"))},clear:function(e){n.call(this,e),m.call(this,e,this.queue[e].options),r.call(this,e),this.activeSelectOptionGroup&&this.activeSelectOptionGroup.find("[data-option-index]").attr("data-option-selected","false")}};return function(e,i,s,a){var c=t.isNumber(e)?e:v.call(this,e);if(!this.queue[c])return this;if("undefined"==typeof i||this.queue[c].multiple||n.call(this,c),"undefined"==typeof i)return this.queue[c].selected;if(t.isArray(i))o.arr.call(this,c,i,s);else if(t.isString(i)||t.isNumber(i))o.value.call(this,c,i,s);else if(null===i)o.clear.call(this,c);else for(var u in o)if(i[u]){o[u].call(this,c,i,s);break}return"undefined"!=typeof i&&l.call(this,this.queue[c],{self:this,item:this.queue[c],state:a?"changeValue":"setValue",value:this.queue[c].selected,internal:a}),e=null,this}}(),this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(e=this.queue[this.activeSelectQueueIndex],e.optionFocusIndex=-1,e.$displayInput.val("").trigger("blur"),e.$display.removeAttr("data-select-option-group-opened").trigger("focus"),this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select-"+this.instanceId).unbind("click.ax5select-"+this.instanceId).unbind("keyup.ax5select-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1;var t={self:this,item:e,value:e.selected,state:"close"};l.call(this,e,t),e.onClose&&e.onClose.call(t)}.bind(this),n.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(e){var t=v.call(this,e);return this.queue[t].$display.removeAttr("disabled"),this.queue[t].$select.removeAttr("disabled"),l.call(this,this.queue[t],{self:this,state:"enable"}),this},this.disable=function(e){var t=v.call(this,e);return this.queue[t].$display.attr("disabled","disabled"),this.queue[t].$select.attr("disabled","disabled"),l.call(this,this.queue[t],{self:this,state:"disable"}),this},this.main=function(){arguments&&t.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}()),i=ax5.ui.select}(),ax5.ui.select_instance=new ax5.ui.select,jQuery.fn.ax5select=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.select_instance.val(this);case"enable":return ax5.ui.select_instance.enable(this);case"disable":return ax5.ui.select_instance.disable(this);case"setOptions":return ax5.ui.select_instance.setOptions(this,arguments[1]);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.select_instance.bind(e)});return this}}(),function(){var e=ax5.ui.select,t=function(e){return'\n<div class="ax5select-option-group {{theme}} {{size}}" data-ax5select-option-group="{{id}}">\n    <div class="ax-select-body">\n        <div class="ax-select-option-group-content" data-els="content"></div>\n    </div>\n    <div class="ax-select-arrow"></div> \n</div>\n'},i=function(e){return'\n<a {{^tabIndex}}href="#ax5select-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}class="form-control {{formSize}} ax5select-display {{theme}}" \ndata-ax5select-display="{{id}}" data-ax5select-instance="{{instanceId}}">\n    <div class="ax5select-display-table" data-els="display-table">\n        <div data-ax5select-display="label">{{label}}</div>\n        <div data-ax5select-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n            {{#icons}}\n            <span class="addon-icon-closed">{{clesed}}</span>\n            <span class="addon-icon-opened">{{opened}}</span>\n            {{/icons}}\n            {{^icons}}\n            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n            {{/icons}}\n        </div>\n    </div>\n    <input type="text" tabindex="-1" data-ax5select-display="input" \n    style="position:absolute;z-index:0;left:0px;top:0px;font-size:1px;opacity: 0;width:1px;border: 0px none;color : transparent;text-indent: -9999em;" />\n</a>\n'},n=function(e){return'\n<select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n'},o=function(e){return'\n{{#waitOptions}}\n    <div class="ax-select-option-item">\n            <div class="ax-select-option-item-holder">\n                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                    {{{lang.loading}}}\n                </span>\n            </div>\n        </div>\n{{/waitOptions}}\n{{^waitOptions}}\n    {{#options}}\n        {{#optgroup}}\n            <div class="ax-select-option-group">\n                <div class="ax-select-option-item-holder">\n                    <span class="ax-select-option-group-label">\n                        {{{.}}}\n                    </span>\n                </div>\n                {{#options}}\n                <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                data-option-value="{{'+e.optionValue+'}}" \n                {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                    <div class="ax-select-option-item-holder">\n                        {{#multiple}}\n                        <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                            <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                        </span>\n                        {{/multiple}}\n                        <span class="ax-select-option-item-cell ax-select-option-item-label">{{{'+e.optionText+'}}}</span>\n                    </div>\n                </div>\n                {{/options}}\n            </div>                            \n        {{/optgroup}}\n        {{^optgroup}}\n        <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+e.optionValue+'}}" {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n            <div class="ax-select-option-item-holder">\n                {{#multiple}}\n                <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                    <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                </span>\n                {{/multiple}}\n                <span class="ax-select-option-item-cell ax-select-option-item-label">{{{'+e.optionText+'}}}</span>\n            </div>\n        </div>\n        {{/optgroup}}\n    {{/options}}\n    {{^options}}\n        <div class="ax-select-option-item">\n            <div class="ax-select-option-item-holder">\n                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                    {{{lang.noOptions}}}\n                </span>\n            </div>\n        </div>\n    {{/options}}\n{{/waitOptions}}\n'};e.tmpl={optionGroupTmpl:t,tmpl:i,selectTmpl:n,optionsTmpl:o,get:function(t,i,n){return jQuery(ax5.mustache.render(e.tmpl[t].call(this,n),i))}}}();
//# sourceMappingURL=ax5select.min.js.map

/*!
 * AX5Grid
 */
//var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t=ax5.ui,i=ax5.util,e=void 0;t.addClass({className:"grid"},function(){return function(){var n=this,o=void 0,a={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,debounceTime:250,appendDebouncer:null,appendDebounceTimes:0,appendProgressIcon:"...",appendProgress:!1,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!0,virtualScrollY:!0,virtualScrollX:!0,headerSelect:!0,virtualScrollYCountMargin:0,virtualScrollAccelerated:!0,virtualScrollAcceleratedDelayTime:10,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,remoteSort:!1,header:{display:!0,align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,selector:!0},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1,mergeCells:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,statusDisplay:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__",disableSelection:"__disable_selection__"},tree:{use:!1,hashDigit:8,indentWidth:10,arrowWidth:15,iconWidth:18,icons:{openedArrow:"▾",collapsedArrow:"▸",groupIcon:"⊚",collapsedGroupIcon:"⊚",itemIcon:"⊙"},columnKeys:{parentKey:"pid",selfKey:"id",collapse:"collapse",hidden:"hidden",parentHash:"__hp__",selfHash:"__hs__",children:"__children__",depth:"__depth__"}}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0,scrollTimer:null},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.proxyList=null,this.page=null,this.selectedDataIndexs=[],this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.listIndexMap={},this.contextMenu=null,this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.bodyGroupingMap={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,o=this.config;var l=function(){var t={instanceId:this.id};return this.$target.html(e.tmpl.get("main",t)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height||this.config._height}),this},r=function(t){i.isArray(t)||(t=[]),this.columns=i.deepCopy(t),this.headerTable=e.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=o.frozenColumnIndex||0,this.bodyRowTable=e.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=e.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var n={},a=0,l=this.headerTable.rows.length;a<l;a++)for(var r=this.headerTable.rows[a],s=0,d=r.cols.length;s<d;s++)n[r.cols[s].colIndex]=jQuery.extend({},r.cols[s]);this.colGroup=[];for(var c in n)this.colGroup.push(n[c]);return this},s=function(){r.call(this,this.config.columns),d.call(this),this.config.footSum&&(c.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&h.call(this,this.config.body.grouping),u.call(this,!0),e.header.repaint.call(this,!0),e.body.repaint.call(this,!0),e.scroller.resize.call(this)},d=function(){var t=this.$.container.root.width()-function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t+=o.scroller.size}(),e=0,n=void 0,a=[],l=this.colGroup,r=void 0,s=void 0;for(r=0,s=l.length;r<s;r++)i.isNumber(l[r].width)?e+=l[r]._width=l[r].width:"*"===l[r].width?a.push(r):"%"===i.right(l[r].width,1)&&(e+=l[r]._width=t*i.left(l[r].width,"%")/100);if(a.length>0)for(n=(t-e)/a.length,r=0,s=a.length;r<s;r++)l[a[r]]._width=n},c=function(t){i.isArray(t)?this.footSumTable=e.util.makeFootSumTable.call(this,this.footSumColumns=t):(this.footSumColumns=[],this.footSumTable={})},h=function(t){var i=jQuery.extend({},t);"by"in i&&"columns"in i?(this.bodyGrouping={by:i.by,columns:i.columns},this.bodyGroupingTable=e.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},i=0,e=this.bodyGrouping.by.length;i<e;i++){t[this.bodyGrouping.by[i]]={orderBy:"asc",seq:i,fixed:!0};for(var n=0,o=this.colGroup.length;n<o;n++)this.colGroup[n].key===this.bodyGrouping.by[i]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):o.body.grouping=!1},u=function(t){var i=this.proxyList?this.proxyList:this.list;if(Math.min(this.$target.innerWidth(),this.$target.innerHeight())<5)return!1;this.config.height||this.$.container.root.css({height:this.config._height=this.$target.height()});var e=this.$.container.root.width(),n=this.$.container.root.height(),a=e,l=n,r=o.asidePanelWidth=function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t}(),s=o.frozenPanelWidth=function(t,i){for(var e=0,n=0,o=i;n<o;n++)e+=t[n]._width;return e}(this.colGroup,o.frozenColumnIndex),d=void 0,c=void 0,h=void 0,u=0,g=function(t){return o.frozenRowIndex*t}(this.xvar.bodyTrHeight),f=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),x=o.header.display?this.headerTable.rows.length*o.header.columnHeight:0,p=o.page.display?o.page.height:0;(function(){d=n-x-p-f<i.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,c=function(){for(var t=0,i=e-r-d,n=0,o=this.colGroup.length;n<o;n++)t+=this.colGroup[n]._width;return t>i?this.config.scroller.size:0}.call(this),c>0&&(d=n-x-p-f-c<i.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),a=e-d,l=n-p-c,h=l-x;var v=function(t,i,e,n){var l={},d=!1;switch(e){case"aside":0===r?d=!0:(l.left=0,l.width=r);break;case"left":0===o.frozenColumnIndex?d=!0:(l.left=r,l.width=s);break;case"right":o.rightSum||(d=!0);break;default:"page"!==n&&(0===o.frozenColumnIndex?l.left=r:l.left=s+r,l.width=a-r-s-u)}if(d)return t.hide(),this;if("body"===n)switch(i){case"top":0==o.frozenRowIndex?d=!0:(l.top=0,l.height=g);break;case"bottom":o.footSum?(l.top=h-f,l.height=f):d=!0;break;default:l.top=g,l.height=h-g-f}else"header"===n?l.height=x:"page"===n&&(0==p?d=!0:l.height=p);return d?(t.hide(),this):(t.show().css(l),this)},m=function(t,i,e,n){var o={},r=!1;switch(n){case"vertical":i>0?(o.width=i,o.height=l,o.bottom=e+p):r=!0;break;case"horizontal":e>0?(o.width=a,o.height=e,o.right=i,o.bottom=p):r=!0;break;case"corner":i>0&&e>0?(o.width=i,o.height=e,o.bottom=p):r=!0}return r?(t.hide(),this):void t.show().css(o)};return this.$.container.header.css({height:x}),this.$.container.body.css({height:h}),v.call(this,this.$.panel["aside-header"],"","aside","header"),v.call(this,this.$.panel["left-header"],"","left","header"),v.call(this,this.$.panel.header,"","","header"),v.call(this,this.$.panel["right-header"],"","right","header"),v.call(this,this.$.panel["top-aside-body"],"top","aside","body"),v.call(this,this.$.panel["top-left-body"],"top","left","body"),v.call(this,this.$.panel["top-body"],"top","","body"),v.call(this,this.$.panel["top-right-body"],"top","right","body"),v.call(this,this.$.panel["aside-body"],"","aside","body"),v.call(this,this.$.panel["left-body"],"","left","body"),v.call(this,this.$.panel.body,"","","body"),v.call(this,this.$.panel["right-body"],"","right","body"),v.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),v.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),v.call(this,this.$.panel["bottom-body"],"bottom","","body"),v.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),m.call(this,this.$.scroller.vertical,d,c,"vertical"),m.call(this,this.$.scroller.horizontal,d,c,"horizontal"),m.call(this,this.$.scroller.corner,d,c,"corner"),v.call(this,this.$.container.page,"","","page"),this.xvar.bodyHeight=this.$.panel.body.height(),this.xvar.bodyWidth=this.$.panel.body.width(),!0},g=function(t){if(e.header.repaint.call(this),i.isFunction(this.config.remoteSort)){var n={sortInfo:[]};for(var o in t)n.sortInfo.push({key:o,orderBy:t[o].orderBy,seq:t[o].seq});n.sortInfo.sort(function(t,i){return t.seq>i.seq}),this.config.remoteSort.call(n,n)}else this.config.body.grouping?this.list=e.data.initData.call(this,e.data.sort.call(this,t,e.data.clearGroupingData.call(this,this.list))):this.list=e.data.sort.call(this,t,e.data.clearGroupingData.call(this,this.list),{resetLineNumber:!0}),e.body.repaint.call(this,!0),e.scroller.resize.call(this)};this.init=function(t){if(o=jQuery.extend(!0,{},o,t),!o.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.onStateChanged=o.onStateChanged,this.onClick=o.onClick,this.onLoad=o.onLoad,this.onDataChanged=o.body.onDataChanged,this.$target=jQuery(o.target),function(t){i.isObject(t)&&!t.error&&(o=jQuery.extend(!0,o,t))}.call(this,i.parseJson(this.$target.attr("data-ax5grid-config"),!0));var s=this.config=o;return this.config.height||(this.config._height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+this.instanceId,this.$target.data("data-ax5grid-id",s.id)),e.data.init.call(this),this.config.tree.use&&(this.sortInfo={},this.sortInfo[this.config.tree.columnKeys.selfHash]={orderBy:"asc",seq:0,fixed:!0}),l.call(this),r.call(this,s.columns),d.call(this),s.footSum&&c.call(this,s.footSum),s.body.grouping&&h.call(this,s.body.grouping),u.call(this,!0),e.header.init.call(this),e.header.repaint.call(this),e.body.init.call(this),e.body.repaint.call(this),e.scroller.init.call(this),e.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.id,function(){u.call(n),e.scroller.resize.call(n),e.body.repaint.call(n)}),jQuery(document.body).on("click.ax5grid-"+this.id,function(t){var o=!1,a=i.findParentNode(t.target,function(t){return!!(o=t.getAttribute("data-ax5grid-inline-edit-picker"))||"root"===t.getAttribute("data-ax5grid-container")});a&&a.getAttribute("data-ax5grid-instance")===this.id?n.focused=!0:(n.focused=!1,e.body.blur.call(this))}.bind(this)),jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing?t.which==ax5.info.eventKeys.ESC?n.keyDown("ESC",t.originalEvent):t.which==ax5.info.eventKeys.RETURN?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?(n.keyDown("TAB",t.originalEvent),i.stopEvent(t)):t.which==ax5.info.eventKeys.UP?n.keyDown("RETURN",{shiftKey:!0}):t.which==ax5.info.eventKeys.DOWN&&n.keyDown("RETURN",{}):t.metaKey||t.ctrlKey?67==t.which&&n.copySelect():a[t.which]?(n.keyDown(a[t.which],t.originalEvent),i.stopEvent(t)):t.which==ax5.info.eventKeys.ESC?n.focused&&e.body.blur.call(n):t.which==ax5.info.eventKeys.RETURN||t.which==ax5.info.eventKeys.SPACE?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?i.stopEvent(t):Object.keys(n.focusedColumn).length)}),jQuery(window).on("keyup.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing||t.metaKey||t.ctrlKey||a[t.which]||t.which==ax5.info.eventKeys.ESC||t.which==ax5.info.eventKeys.RETURN||t.which==ax5.info.eventKeys.SPACE||t.which==ax5.info.eventKeys.TAB||Object.keys(n.focusedColumn).length&&n.keyDown("INLINE_EDIT",t.originalEvent))}),setTimeout(function(){this.onLoad&&this.onLoad.call({self:this})}.bind(this)),this},this.align=function(){return u.call(this)&&(e.body.repaint.call(this),e.scroller.resize.call(this)),this},this.repaint=function(){return e.header.repaint.call(this),e.body.repaint.call(this,!0),e.scroller.resize.call(this),this},this.keyDown=function(){var t={KEY_UP:function(){e.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){e.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){e.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){e.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){e.body.moveFocus.call(this,"HOME")},KEY_END:function(){e.body.moveFocus.call(this,"END")},INLINE_EDIT:function(t){e.body.inlineEdit.active.call(this,this.focusedColumn,t),/[0-9a-zA-Z]/.test(t.key)||i.stopEvent(t)},ESC:function(t){e.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(t){var n=0;for(var o in this.inlineEditing){if(n++,!e.body.inlineEdit.keydown.call(this,"RETURN",o))return!1;1==n&&e.body.moveFocus.call(this,t.shiftKey?"UP":"DOWN")&&e.body.inlineEdit.keydown.call(this,"RETURN")}0==n&&(e.body.inlineEdit.keydown.call(this,"RETURN"),i.stopEvent(t))},TAB:function(t){var i=0;for(var n in this.inlineEditing)i++,e.body.inlineEdit.keydown.call(this,"RETURN",n,{moveFocus:!0}),1==i&&e.body.moveFocus.call(this,t.shiftKey?"LEFT":"RIGHT")&&e.body.inlineEdit.keydown.call(this,"RETURN",void 0,{moveFocus:!0})}};return function(i,e){return i in t&&t[i].call(this,e),this}}(),this.copySelect=function(){var t=void 0,i=this.$.form.clipboard,e=[],n="",o=void 0,a=void 0,l=void 0,r=0;for(var s in this.selectedColumn){var d=this.selectedColumn[s];if(d){"undefined"==typeof l&&(l=d.dindex,o=d.rowIndex,a=d.rowIndex),l==d.dindex&&o==d.rowIndex||r++,e[r]||(e[r]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?this.list[d.dindex].__isGrouping?e[r].push(this.list[d.dindex][d.colIndex]):e[r].push(this.list[d.dindex][c.key]):e[r].push(""),l=d.dindex,o=d.rowIndex}}e.forEach(function(t){n+=t.join("\t")+"\n"}),i.get(0).innerText=n,i.select();try{t=document.execCommand("copy")}catch(h){t=!1}return t},this.setData=function(t){var i="undefined"==typeof this.xvar.paintStartRowIndex;return e.data.set.call(this,t),e.body.repaint.call(this),i||e.body.scrollTo.call(this,{top:0}),u.call(this),e.scroller.resize.call(this),e.page.navigationUpdate.call(this),i=null,this},this.getList=function(t){return e.data.getList.call(this,t)},this.setHeight=function(t){return"100%"==t&&(t=this.$target.offsetParent().innerHeight()),this.$target.css({height:t}),this.$.container.root.css({height:t}),u.call(this),e.body.repaint.call(this,"reset"),e.scroller.resize.call(this),this},this.addRow=function(t,i,n){var o=this;return e.data.add.call(this,t,i,n),u.call(this),e.body.repaint.call(this,"reset"),n&&n.focus?setTimeout(function(){e.body.moveFocus.call(o,n.focus)},1):e.scroller.resize.call(this),this},this.appendToList=function(t){return e.data.append.call(this,t,function(){u.call(this),e.body.repaint.call(this),e.scroller.resize.call(this)}.bind(this)),this},this.removeRow=function(t){return e.data.remove.call(this,t),u.call(this),e.body.repaint.call(this,"reset"),e.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),e.scroller.resize.call(this),this},this.updateRow=function(t,i){return e.data.update.call(this,t,i),e.body.repaintRow.call(this,i),this},this.updateChildRows=function(t,i,n){return e.data.updateChild.call(this,t,i,n),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0,e.body.repaint.call(this),this},this.deleteRow=function(t){return e.data.deleteRow.call(this,t),u.call(this),e.body.repaint.call(this,"reset"),e.scroller.resize.call(this),this},this.setValue=function(t,i,n){var o=void 0;if(e.data.setValue.call(this,t,o,i,n)){var a=function(t,i,n,o,a,l){for(var r=0,s=i.length;r<s;r++)for(var d=0,c=i[r].cols.length;d<c;d++)i[r].cols[d].key==a&&(this.xvar.frozenRowIndex>n?e.body.repaintCell.call(this,"top-"+t,n,o,r,d,l):e.body.repaintCell.call(this,t+"-scroll",n,o,r,d,l))};a.call(this,"left-body",this.leftBodyRowData.rows,t,o,i,n),a.call(this,"body",this.bodyRowData.rows,t,o,i,n)}return this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(e,n){if("undefined"==typeof e)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,e);else{if(!i.isNumber(n))throw"invalid argument _cindex";if(i.isArray(e))for(var o=0,a=e.length;o<a;o++)this.config.columns.splice(n+o,0,e[o]);else this.config.columns.splice(n,0,e)}return s.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(e){if("undefined"==typeof e&&(e="last"),e in t)t[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _cindex";this.config.columns.splice(e,1)}return s.call(this),this}}(),this.updateColumn=function(t,e){if(!i.isNumber(e))throw"invalid argument _cindex";return this.config.columns.splice(e,1,t),s.call(this),this},this.setColumnWidth=function(t,i){return this.colGroup[this.xvar.columnResizerIndex]._width=t,this.needToPaintSum=!0,e.header.repaint.call(this),e.body.repaint.call(this,!0),e.scroller.resize.call(this),u.call(this),this},this.getColumnSortInfo=function(){var t={sortInfo:[]};for(var i in this.sortInfo)t.sortInfo.push({key:i,orderBy:this.sortInfo[i].orderBy,seq:this.sortInfo[i].seq});return t.sortInfo.sort(function(t,i){return t.seq>i.seq}),t.sortInfo},this.setColumnSort=function(t){return"undefined"!=typeof t&&(this.sortInfo=t,e.header.applySortStatus.call(this,t)),g.call(this,t||this.sortInfo),this},this.select=function(t,n){if(i.isNumber(t)){var o=t;this.config.multipleSelect?n&&n.selectedClear&&this.clearSelect():this.clearSelect(),e.data.select.call(this,o,void 0,n&&n.selected),e.body.updateRowState.call(this,["selected"],o,void 0)}return this},this.clickBody=function(t){return e.body.click.call(this,t),this},this.DBLClickBody=function(t){return e.body.dblClick.call(this,t),this},this.clearSelect=function(){return e.body.updateRowState.call(this,["selectedClear"]),e.data.clearSelect.call(this),this},this.selectAll=function(t){return e.data.selectAll.call(this,t&&t.selected,t),e.body.updateRowStateAll.call(this,["selected"]),this},this.exportExcel=function(t){var i=[];return i.push('<table border="1">'),i.push(e.header.getExcelString.call(this)),i.push(e.body.getExcelString.call(this)),i.push("</table>"),"undefined"==typeof t?i.join(""):(e.excel["export"].call(this,[i.join("")],t),this)},this.focus=function(t){if(e.body.moveFocus.call(this,t)){var i=void 0;for(var n in this.focusedColumn){i=jQuery.extend({},this.focusedColumn[n],!0);break}i&&this.select(i.dindex,{selectedClear:!0})}else if("undefined"==typeof this.selectedDataIndexs[0])this.select(0);else{var o=this.selectedDataIndexs[0],a={UP:function(){o>0&&(this.select(o-1,{selectedClear:!0}),e.body.moveFocus.call(this,o-1))},DOWN:function(){o<this.list.length-1&&(this.select(o+1,{selectedClear:!0}),e.body.moveFocus.call(this,o+1))},HOME:function(){this.select(0,{selectedClear:!0}),e.body.moveFocus.call(this,0)},END:function(){this.select(this.list.length-1,{selectedClear:!0}),e.body.moveFocus.call(this,this.list.length-1)}};t in a&&a[t].call(this)}return this},this.destroy=function(){var i=this.instanceId;return this.$target.empty(),this.list=[],t.grid_instance=ax5.util.filter(t.grid_instance,function(){return this.instanceId!=i}),null},this.main=function(){t.grid_instance=t.grid_instance||[],t.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),e=ax5.ui.grid}(),function(){var t=ax5.ui.grid,i=ax5.util,e={focusClear:function(){var t=this,i=void 0;for(var e in t.focusedColumn)i=t.focusedColumn[e],i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-focused");t.focusedColumn={}},clear:function(){var t=this,i=void 0;for(var e in t.selectedColumn)i=t.selectedColumn[e],i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-selected");t.selectedColumn={}},init:function(i){var n=this;if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==i.dindex+"_"+i.colIndex+"_"+i.rowIndex)return this;e.focusClear.call(n),n.focusedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]={panelName:i.panelName,dindex:i.dindex,doindex:i.doindex,rowIndex:i.rowIndex,colIndex:i.colIndex,colspan:i.colspan},e.clear.call(n),n.xvar.selectedRange={start:[i.dindex,i.rowIndex,i.colIndex,i.colspan-1],end:null},n.selectedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]=function(t){return!t&&{panelName:i.panelName,dindex:i.dindex,doindex:i.doindex,rowIndex:i.rowIndex,colIndex:i.colIndex,colspan:i.colspan}}(n.selectedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]),this.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&t.body.inlineEdit.deActive.call(this,"RETURN")},update:function(t){var i=this,n=void 0,o=void 0,a=void 0,l=void 0,r=void 0;i.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],e.clear.call(i);var s={r:{s:Math.min(i.xvar.selectedRange.start[0],i.xvar.selectedRange.end[0]),e:Math.max(i.xvar.selectedRange.start[0],i.xvar.selectedRange.end[0])},c:{s:Math.min(i.xvar.selectedRange.start[2],i.xvar.selectedRange.end[2]),e:Math.max(i.xvar.selectedRange.start[2]+i.xvar.selectedRange.start[3],i.xvar.selectedRange.end[2]+i.xvar.selectedRange.end[3])}};for(n=s.r.s;n<=s.r.e;n++)for(r=this.bodyRowTable.rows.length,l=0;l<r;l++)for(a=s.c.s;a<=s.c.e;a++){var d=[],c="";i.xvar.frozenRowIndex>n&&d.push("top"),i.xvar.frozenColumnIndex>a&&d.push("left"),d.push("body"),"top"!==d[0]&&d.push("scroll"),c=d.join("-"),i.selectedColumn[n+"_"+a+"_"+l]={panelName:c,dindex:n,rowIndex:l,colIndex:a,colspan:t.colspan},d=null,c=null}n=null,o=null,a=null,l=null;for(var h in i.selectedColumn){var u=i.selectedColumn[h];u&&i.$.panel[u.panelName].find('[data-ax5grid-tr-data-index="'+u.dindex+'"]').find('[data-ax5grid-column-rowindex="'+u.rowIndex+'"][data-ax5grid-column-colindex="'+u.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},n={on:function(t){var o=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(e.init.call(o,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&(e.update.call(o,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),doindex:Number(this.getAttribute("data-ax5grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),i.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){n.off.call(o)}).on("mouseleave.ax5grid-"+this.instanceId,function(){n.off.call(o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o=function(t,i,e,n){var o=this,a=this.config,l={selected:function(t,i){if(this.list[i])for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[i][a.columnKeys.selected])},selectedClear:function(){var t=this.list.length,i=void 0;if(this.proxyList){for(;t--;)this.list[t][a.columnKeys.selected]=!1;for(t=this.proxyList.length;t--;){if(this.list[e][a.columnKeys.selected])for(i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1);this.proxyList[t][a.columnKeys.selected]=!1;var e=this.proxyList[t].__original_index__}}else for(;t--;){if(this.list[t][a.columnKeys.selected])for(i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1);this.list[t][a.columnKeys.selected]=!1}},cellChecked:function(t,i,e){var n=(e.key,e.rowIndex),o=e.colIndex,a=function(){var i=[];return this.xvar.frozenRowIndex>t&&i.push("top"),this.xvar.frozenColumnIndex>o&&i.push("left"),i.push("body"),"top"!==i[0]&&i.push("scroll"),i.join("-")}.call(this);this.$.panel[a].find('[data-ax5grid-tr-data-index="'+t+'"]').find('[data-ax5grid-column-rowIndex="'+n+'"][data-ax5grid-column-colIndex="'+o+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+e.checked)}};"undefined"==typeof e&&(e=i),t.forEach(function(t){if(!l[t])throw"invaild state name";l[t].call(o,i,e,n)})},a=function(i,e){var n=this,o=(this.config,{selected:function(i){t.body.repaint.call(this,!0)}});i.forEach(function(t){if(!o[t])throw"invaild state name";o[t].call(n,e)})},l=function(){var e=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(i){var n=void 0,a=void 0,l=void 0,r=void 0,s=void 0,d=void 0,c=void 0,h=void 0,u={"default":function(n){var a=e.bodyRowMap[n.rowIndex+"_"+n.colIndex],l={self:e,page:e.page,list:e.list,item:e.list[n.doindex],dindex:n.dindex,doindex:n.doindex,rowIndex:n.rowIndex,colIndex:n.colIndex,column:a,value:e.list[n.dindex][a.key]};if(a.editor&&"checkbox"===a.editor.type){var r=t.data.getValue.call(e,n.dindex,n.doindex,a.key),s=void 0,d=void 0;d=a.editor.config&&a.editor.config.trueValue?(s=!(r==a.editor.config.trueValue))?a.editor.config.trueValue:a.editor.config.falseValue:s=0==r||"false"==r||r<"1"?"true":"false",t.data.setValue.call(e,n.dindex,n.doindex,a.key,d),o.call(e,["cellChecked"],n.dindex,n.doindex,{key:a.key,rowIndex:n.rowIndex,colIndex:n.colIndex,editorConfig:a.editor.config,checked:s})}e.config.body.onClick&&e.config.body.onClick.call(l,l,i)},rowSelector:function(i){var n=e.list[i.doindex];return!n[e.config.columnKeys.disableSelection]&&(e.config.multipleSelect||e.selectedDataIndexs[0]===i.doindex||(o.call(e,["selectedClear"]),t.data.clearSelect.call(e)),t.data.select.call(e,i.dindex,i.doindex,void 0,{internalCall:!0}),void o.call(e,["selected"],i.dindex,i.doindex))},lineNumber:function(t){},"tree-control":function(t,i){y.call(e,t.dindex,t.doindex)}};n=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),c=Number(this.getAttribute("data-ax5grid-column-rowIndex")),h=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),d=Number(this.getAttribute("data-ax5grid-data-o-index")),a in u&&u[a]({panelName:n,attr:a,row:l,col:r,dindex:s,doindex:d,rowIndex:c,colIndex:h},this)}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(n){var o=void 0,a=void 0,l=void 0,r=void 0,s=void 0,d=void 0,c=void 0,h=void 0,u={"default":function(o){if(e.isInlineEditing)for(var a in e.inlineEditing)if(a==o.dindex+"_"+o.colIndex+"_"+o.rowIndex)return this;var l=e.bodyRowMap[o.rowIndex+"_"+o.colIndex],r="";l&&(e.list[s].__isGrouping||(r=t.data.getValue.call(e,s,d,l.key)));var c=e.colGroup[o.colIndex].editor;if(i.isObject(c))t.body.inlineEdit.active.call(e,e.focusedColumn,n,r);else if(e.config.body.onDBLClick){var h={self:e,page:e.page,list:e.list,item:e.list[o.dindex],dindex:o.dindex,doindex:o.doindex,rowIndex:o.rowIndex,colIndex:o.colIndex,column:l,value:e.list[o.dindex][l.key]};e.config.body.onDBLClick.call(h)}},rowSelector:function(t){},lineNumber:function(t){}};o=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),c=Number(this.getAttribute("data-ax5grid-column-rowIndex")),h=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),d=Number(this.getAttribute("data-ax5grid-data-o-index")),a in u&&u[a]({panelName:o,attr:a,row:l,col:r,dindex:s,doindex:d,rowIndex:c,colIndex:h})}),this.config.contextMenu&&this.$.container.body.on("contextmenu",function(t){var n=void 0,o=void 0,a=void 0,l=void 0,r=void 0,s=void 0,d=void 0,c={};n=i.findParentNode(t.target,function(t){if(t.getAttribute("data-ax5grid-column-attr"))return!0}),n&&(l=Number(n.getAttribute("data-ax5grid-column-rowIndex")),r=Number(n.getAttribute("data-ax5grid-column-colIndex")),o=Number(n.getAttribute("data-ax5grid-data-index")),a=Number(n.getAttribute("data-ax5grid-data-o-index")),d=e.bodyRowMap[l+"_"+r],s=e.list[o]),e.contextMenu||(e.contextMenu=new ax5.ui.menu),e.contextMenu.setConfig(e.config.contextMenu),c={element:n,dindex:o,doindex:a,rowIndex:l,colIndex:r,item:s,column:d,gridSelf:e},e.contextMenu.popup(t,{filter:function(){
//    return e.config.contextMenu.popupFilter.call(this,this,c)},param:c}),i.stopEvent(t.originalEvent),n=null,o=null,a=null,l=null,r=null,s=null,d=null,c=null}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){return!e.xvar.touchmoved&&void(this.getAttribute("data-ax5grid-column-rowIndex")&&n.on.call(e,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),doindex:Number(this.getAttribute("data-ax5grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}))}).on("dragstart",function(t){return i.stopEvent(t),!1}),r.call(this),this.xvar.paintRowCountMargin=this.config.virtualScrollYCountMargin,this.xvar.paintRowCountTopMargin=this.config.virtualScrollYCountMargin-Math.floor(this.config.virtualScrollYCountMargin/2),this.config.virtualScrollAccelerated?this.__throttledScroll=i.throttle(function(t,i){this.config.virtualScrollY&&!i.noRepaint&&"top"in t?h.call(this):this.config.virtualScrollX&&!i.noRepaint&&"left"in t&&h.call(this),i.callback&&i.callback()},this.config.virtualScrollAcceleratedDelayTime):this.__throttledScroll=!1},r=function(){var i=this.config,e=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var e={rows:[]},n=0,o=t.rows.length;n<o;n++)if(e.rows[n]={cols:[]},0===n){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};i.showLineNumber&&(l=jQuery.extend({},a,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),e.rows[n].cols.push(l)),i.showRowSelector&&(l=jQuery.extend({},a,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),e.rows[n].cols.push(l))}return e}.call(this,this.bodyRowTable),this.leftBodyRowData=e.leftData,this.bodyRowData=e.rightData,i.body.grouping){var n=t.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(t){for(var e={rows:[]},n=0,o=t.rows.length;n<o;n++)if(e.rows[n]={cols:[]},0===n){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};i.showLineNumber&&(l=jQuery.extend({},a,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),e.rows[n].cols.push(l)),i.showRowSelector&&(l=jQuery.extend({},a,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),e.rows[n].cols.push(l))}return e}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=n.leftData,this.bodyGroupingData=n.rightData,this.bodyGroupingMap=t.util.makeBodyRowMap.call(this,this.bodyGroupingTable)}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},s=function(e,n,o,a,l,r){var s=a.key,d={"<":"&lt;",">":"&gt;"};if("__d-index__"===s)return"undefined"!=typeof n.__index?n.__index+1:"";if("__d-checkbox__"===s)return'<div class="checkBox" style="max-height: '+(a.width-10)+"px;min-height: "+(a.width-10)+'px;"></div>';if(a.editor&&function(i){return i.type in t.inlineEditor&&"inline"==t.inlineEditor[i.type].editMode}(a.editor))return l=l||t.data.getValue.call(this,o,n.__origin_index__,s),i.isFunction(a.editor.disabled)&&a.editor.disabled.call({list:e,dindex:o,item:e[o],key:s,value:l})?l:r?l:t.inlineEditor[a.editor.type].getHtml(this,a.editor,l);var c={formatter:function(){var r={key:s,value:l||t.data.getValue.call(this,o,n.__origin_index__,s),dindex:o,item:n,list:e};return i.isFunction(a.formatter)?a.formatter.call(r):t.formatter[a.formatter].call(r)},"default":function(){var i="";return"undefined"!=typeof l?i=l:(l=/[\.\[\]]/.test(s)?t.data.getValue.call(this,o,n.__origin_index__,s):n[s],null!==l&&"undefined"!=typeof l&&(i=l)),"string"!=typeof i?i:i.replace(/[<>]/g,function(t){return d[t]||t})},treeControl:function(t){var i=this.config,e=this.config.tree.columnKeys,a="";return n[e.children].length?(a+='<a data-ax5grid-data-index="'+o+'" data-ax5grid-column-attr="tree-control" data-ax5grid-tnode-arrow="" style="width: '+i.tree.arrowWidth+"px;padding-left:"+n[e.depth]*i.tree.indentWidth+'px;">',a+=n[e.collapse]?i.tree.icons.collapsedArrow:i.tree.icons.openedArrow,a+="</a>"):a+='<span data-ax5grid-tnode-arrow="" style="width: '+i.tree.arrowWidth+"px;padding-left:"+n[e.depth]*i.tree.indentWidth+'px;">&nbsp;</span>',a+='<span data-ax5grid-tnode-item="'+(n[e.children].length?"group":"item")+'" style="width: '+i.tree.iconWidth+'px;">',a+=n[e.children].length?n[e.collapse]?i.tree.icons.collapsedGroupIcon:i.tree.icons.groupIcon:i.tree.icons.itemIcon,a+="</span>",a+t}},h=a.formatter?c.formatter.call(this):c["default"].call(this);return this.config.tree.use&&a.treeControl&&(h=c.treeControl.call(this,h)),h},d=function(e,n,o){var a=void 0,l=void 0,r=o.key,s=o.label;return"undefined"==typeof r?(l={key:r,list:e.__groupingList,groupBy:e.__groupingBy},a=i.isFunction(s)?s.call(l):s,e[o.colIndex]=a,a):"__d-index__"===r?"":"__d-checkbox__"===r?"":o.collector?(l={key:r,list:e.__groupingList},a=i.isFunction(o.collector)?o.collector.call(l):t.collector[o.collector].call(l),e[o.colIndex]=a,o.formatter?(l.value=a,i.isFunction(o.formatter)?o.formatter.call(l):t.formatter[o.formatter].call(l)):a):"&nbsp;"},c=function(e,n){var o=n.key,a=n.label;if("undefined"==typeof o)return a;if("__d-index__"===o||"__d-checkbox__"===o)return"&nbsp;";if(n.collector){var l={key:o,list:e},r=void 0;return r=i.isFunction(n.collector)?n.collector.call(l):t.collector[n.collector].call(l),n.formatter?(l.value=r,i.isFunction(n.formatter)?n.formatter.call(l):t.formatter[n.formatter].call(l)):r}return"&nbsp;"},h=function(e){var n=this.config,o=this.proxyList?this.proxyList:this.list;e&&(r.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0);var a=void 0,l=void 0;if(this.config.virtualScrollY?(l=a=Math.floor(-this.$.panel["body-scroll"].position().top/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,this.xvar.paintRowCountTopMargin<a&&(a-=this.xvar.paintRowCountTopMargin)):a=this.xvar.frozenRowIndex,isNaN(a))return this;var h=0,u=0,g=null,f=null,x=-this.$.panel["body-scroll"].position().left;if(this.config.virtualScrollX){for(var p=this.xvar.frozenColumnIndex;p<this.colGroup.length;p++)this.colGroup[p]._sx=p==this.xvar.frozenColumnIndex?0:this.colGroup[p-1]._ex,this.colGroup[p]._ex=this.colGroup[p]._sx+this.colGroup[p]._width,this.colGroup[p]._sx<=x&&this.colGroup[p]._ex>=x&&(h=p),this.colGroup[p]._sx<=x+this.xvar.bodyWidth&&this.colGroup[p]._ex>=x+this.xvar.bodyWidth&&(u=p,null===g&&(g=this.colGroup[h]._sx),null===f&&(f=this.xvar.scrollContentWidth-this.colGroup[p]._ex));null===g&&(g=0),null===f&&(f=0),this.$.panel["top-body-scroll"].css({"padding-left":g,"padding-right":f}),this.$.panel["body-scroll"].css({"padding-left":g,"padding-right":f}),this.$.panel["bottom-body-scroll"].css({"padding-left":g,"padding-right":f})}var v="undefined"==typeof this.xvar.paintStartRowIndex,m=this.headerColGroup,y=this.asideBodyRowData,b=this.leftBodyRowData,w=this.bodyRowData,I=this.leftFootSumData,_=this.footSumData,C=this.asideBodyGroupingData,R=this.leftBodyGroupingData,S=this.bodyGroupingData,E=n.body.align,$=void 0,z=void 0;if(this.config.virtualScrollY?(z=Math.ceil(this.xvar.bodyHeight/this.xvar.bodyTrHeight),$=z+(this.xvar.paintRowCountMargin||1)):z=$=o.length,this.xvar.paintRowCountTopMargin<a&&Math.abs(this.xvar.paintStartRowIndex-a)<=this.xvar.paintRowCountTopMargin&&(a=this.xvar.paintStartRowIndex),this.xvar.dataRowCount===o.length&&this.xvar.paintStartRowIndex===a&&this.xvar.paintRowCount===$&&this.xvar.paintStartColumnIndex===h&&this.xvar.paintEndColumnIndex===u)return this;(g||f)&&(m=[].concat(m).splice(h-this.xvar.frozenColumnIndex,u-h+1+this.xvar.frozenColumnIndex),w=t.util.getTableByStartEndColumnIndex(w,h,u),n.body.grouping&&(S=t.util.getTableByStartEndColumnIndex(S,h,u)),n.footSum&&(_=t.util.getTableByStartEndColumnIndex(_,h,u)),this.xvar.paintStartColumnIndex===h&&this.xvar.paintEndColumnIndex===u||(this.needToPaintSum=!0)),this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(o.length-this.xvar.frozenRowIndex),this.xvar.scrollContentHeight<0&&(this.xvar.scrollContentHeight=0),this.$.livePanelKeys=[];var k=function(t,e,o,a,l,r){var c=this.$.panel[t];if(!v&&!r)return this.$.livePanelKeys.push(t),!1;var h=[],u=void 0,g=void 0,f=void 0,x=void 0,p=void 0,m=void 0,y=void 0,b=void 0,w=void 0,I=void 0,_=void 0,C=function(){return"undefined"!=typeof r&&"undefined"!=typeof r.paintStartRowIndex||(r={paintStartRowIndex:0,paintRowCount:l.length},!1)}(),R="#fff 0px, #fff "+(n.body.columnHeight-n.body.columnBorderWidth)+"px, #eee "+(n.body.columnHeight-n.body.columnBorderWidth)+"px, #eee "+n.body.columnHeight+"px";for(C&&h.push('<div style="background:repeating-linear-gradient(to top, '+R+");font-size:0;line-height:0;height: "+(r.paintStartRowIndex-this.xvar.frozenRowIndex)*r.bodyTrHeight+'px;"></div>'),h.push('<table border="0" cellpadding="0" cellspacing="0">'),h.push("<colgroup>"),u=0,g=e.length;u<g;u++)h.push('<col style="width:'+e[u]._width+'px;"  />');for(h.push("<col  />"),h.push("</colgroup>"),f=r.paintStartRowIndex,x=function(){var t=void 0;return t=l.length,r.paintRowCount+r.paintStartRowIndex<t&&(t=r.paintRowCount+r.paintStartRowIndex),t}();f<x;f++)if(l[f]){var S=!1,$=void 0,z="undefined"!=typeof l[f].__origin_index__?l[f].__origin_index__:f;a&&"__isGrouping"in l[f]?($=a,S=!0):$=o;for(p=0,m=$.rows.length;p<m;p++){for(h.push('<tr class="tr-'+f%4,n.body.trStyleClass?i.isFunction(n.body.trStyleClass)?" "+n.body.trStyleClass.call({item:l[f],index:f},l[f],f):" "+n.body.trStyleClass:"",'"',S?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-tr-data-o-index="'+z+'"',' data-ax5grid-selected="'+(l[f][n.columnKeys.selected]||"false")+'"',' data-ax5grid-disable-selection="'+(l[f][n.columnKeys.disableSelection]||"false")+'"',">"),y=0,b=$.rows[p].cols.length;y<b;y++)w=$.rows[p].cols[y],I=n.body.columnHeight*w.rowspan-n.body.columnBorderWidth,_=w.align||E,h.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-data-o-index="'+z+'" ','data-ax5grid-column-row="'+p+'" ','data-ax5grid-column-col="'+y+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[f],index:f})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(e+="hasBorder "),y==b-1&&(e+="isLastColumn "),e}.call(this,w)+'" ','style="height: '+I+'px;min-height: 1px;">'),h.push(function(t){var i=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return w.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(_?'data-ax5grid-text-align="'+_+'"':"")+'" style="height:'+t+"px;"+(w.multiLine?"":"line-height: "+i+"px;")+'">'}(I),S?d.call(this,l[f],f,w):s.call(this,l,l[f],f,w),"</span>"),h.push("</td>");h.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-data-o-index="'+z+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),h.push("</tr>")}}return h.push("</table>"),C&&l.length&&h.push('<div style="background:repeating-linear-gradient(to bottom, '+R+");font-size:0;line-height:0;height: "+(l.length-f)*r.bodyTrHeight+'px;"></div>'),c.empty(),h=h.join(""),c.get(0).innerHTML=h,this.$.livePanelKeys.push(t),!0},T=function(t,e,o,a,l){var r=this.$.panel[t];if(!v&&!l)return this.$.livePanelKeys.push(t),!1;var s=[],d=void 0,h=void 0,u=void 0,g=void 0,f=void 0,x=void 0,p=void 0,m=void 0,y=void 0;for(s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>"),d=0,h=e.length;d<h;d++)s.push('<col style="width:'+e[d]._width+'px;"  />');for(s.push("<col  />"),s.push("</colgroup>"),u=0,g=o.rows.length;u<g;u++){for(s.push('<tr class="tr-sum">'),f=0,x=o.rows[u].cols.length;f<x;f++)p=o.rows[u].cols[f],m=n.body.columnHeight*p.rowspan-n.body.columnBorderWidth,y=p.align||E,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn["sum_"+p.colIndex+"_"+u],this.selectedColumn["sum_"+p.colIndex+"_"+u]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(e+="hasBorder "),f==x-1&&(e+="isLastColumn "),e}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),s.push(function(t){var i=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return p.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;"+(p.multiLine?"":"line-height: "+i+"px;")+'">'}(m),c.call(this,a,p),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),r.empty(),s=s.join(""),r.get(0).innerHTML=s,this.$.livePanelKeys.push(t),!0},H=function(t,e,o,a,l){for(var r=[],s=this.$.panel[t],d={},c=void 0,h=s.find("tr"),u=0,g=h.length;u<g;u++){var f=void 0,x=void 0;f=h[u].childNodes,x=[];for(var p=0,v=f.length;p<v;p++){var m={$:jQuery(f[p])};"null"!=m.$.attr("data-ax5grid-column-col")&&(m.dindex=m.$.attr("data-ax5grid-data-index"),m.tri=m.$.attr("data-ax5grid-column-row"),m.ci=m.$.attr("data-ax5grid-column-col"),m.rowIndex=m.$.attr("data-ax5grid-column-rowIndex"),m.colIndex=m.$.attr("data-ax5grid-column-colIndex"),m.rowspan=m.$.attr("rowspan"),m.text=m.$.text(),x.push(m)),m=null}r.push(x)}if(r.length>1){c=!1;for(var y=function(t,o){for(var a=[],l=function(o,l){!e[o].editor&&function(){return!i.isArray(n.body.mergeCells)||ax5.util.search(n.body.mergeCells,e[o].key)>-1}()&&(d[o]&&function(){if(a.length>0){var i=!0;return a.forEach(function(e){r[t-1][e].text!=r[t][e].text&&(i=!1)}),i}return!0}()&&d[o].text==r[t][o].text?(r[t][o].rowspan=0,r[d[o].ri][o].rowspan++,c=!0):d[o]={ri:t,ci:o,text:r[t][o].text},a.push(o))},s=0,h=r[t].length;s<h;s++)l(s,h)},b=0,w=r.length;b<w;b++)y(b,w);if(c)for(var I=0,_=r.length;I<_;I++)for(var C=0,R=r[I].length;C<R;C++)0==r[I][C].rowspan?r[I][C].$.remove():r[I][C].rowspan>1&&r[I][C].$.attr("rowspan",r[I][C].rowspan).addClass("merged")}},N={paintStartRowIndex:a,paintRowCount:$,paintStartColumnIndex:h,paintEndColumnIndex:u,nopaintLeftColumnsWidth:g,nopaintRightColumnsWidth:f,bodyTrHeight:this.xvar.bodyTrHeight,virtualScrollX:this.config.virtualScrollX,virtualScrollY:this.config.virtualScrollY},D=jQuery.extend({},N,{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex});n.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&k.call(this,"top-aside-body",this.asideColGroup,y,C,o.slice(0,this.xvar.frozenRowIndex),D),k.call(this,"aside-body-scroll",this.asideColGroup,y,C,o,N),n.footSum&&T.call(this,"bottom-aside-body",this.asideColGroup,y,null,this.list)),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&k.call(this,"top-left-body",this.leftHeaderColGroup,b,R,o.slice(0,this.xvar.frozenRowIndex),D),k.call(this,"left-body-scroll",this.leftHeaderColGroup,b,R,o,N),n.footSum&&this.needToPaintSum&&T.call(this,"bottom-left-body",this.leftHeaderColGroup,I,this.list)),this.xvar.frozenRowIndex>0&&k.call(this,"top-body-scroll",m,w,S,o.slice(0,this.xvar.frozenRowIndex),D),k.call(this,"body-scroll",m,w,S,o,N),n.footSum&&this.needToPaintSum&&T.call(this,"bottom-body-scroll",m,_,this.list,N),n.rightSum,n.body.mergeCells&&o.length&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&H.call(this,"top-left-body",this.leftHeaderColGroup,b,o.slice(0,this.xvar.frozenRowIndex)),H.call(this,"left-body-scroll",this.leftHeaderColGroup,b,o,N)),this.xvar.frozenRowIndex>0&&H.call(this,"top-body-scroll",this.headerColGroup,w,o.slice(0,this.xvar.frozenRowIndex)),H.call(this,"body-scroll",this.headerColGroup,w,o,N)),this.xvar.virtualPaintStartRowIndex=l,this.xvar.paintStartRowIndex=a,this.xvar.paintRowCount=$,this.xvar.virtualPaintRowCount=z,this.xvar.paintStartColumnIndex=h,this.xvar.paintEndColumnIndex=u,this.xvar.nopaintLeftColumnsWidth=g,this.xvar.nopaintRightColumnsWidth=f,this.xvar.dataRowCount=o.length,this.needToPaintSum=!1,t.page.statusUpdate.call(this)},u=function(e,n,o,a,l,r){var h=this,u=this.config,g=this.list,f=this.$.panel[e].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+a+'"][data-ax5grid-column-colindex="'+l+'"]').find("[data-ax5grid-cellholder]"),x=this.colGroup,p=x[l];f.html(s.call(this,g,g[n],n,p)),p.editor&&p.editor.updateWith&&p.editor.updateWith.forEach(function(i){x.forEach(function(e){if(e.key==i){var o=e.rowIndex,a=e.colIndex,l=t.util.findPanelByColumnIndex.call(h,n,a,o).panelName,r=h.$.panel[l].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+a+'"]').find("[data-ax5grid-cellholder]");r.html(s.call(h,g,g[n],n,e))}})});var v=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,m=this.headerColGroup,y=this.leftFootSumData,b=this.footSumData,w=this.leftBodyGroupingData,I=this.bodyGroupingData,_=u.body.align,C=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,R={paintStartRowIndex:v,paintRowCount:C,bodyTrHeight:this.xvar.bodyTrHeight};(this.xvar.nopaintLeftColumnsWidth||this.xvar.nopaintRightColumnsWidth)&&(m=[].concat(m).splice(this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex-this.xvar.paintStartColumnIndex+1),u.body.grouping&&(I=t.util.getTableByStartEndColumnIndex(I,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)),u.footSum&&(b=t.util.getTableByStartEndColumnIndex(b,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)));var S=function(t,e,n,o,a){var l=this.$.panel[t],r=[],s=void 0,d=void 0,h=void 0,g=void 0,f=void 0,x=void 0,p=void 0,v=void 0,m=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,d=e.length;s<d;s++)r.push('<col style="width:'+e[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=0,g=n.rows.length;h<g;h++){for(r.push('<tr class="tr-sum">'),f=0,x=n.rows[h].cols.length;f<x;f++)p=n.rows[h].cols[f],v=u.body.columnHeight*p.rowspan-u.body.columnBorderWidth,m=p.align||_,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn["sum_"+p.colIndex+"_"+h],this.selectedColumn["sum_"+p.colIndex+"_"+h]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),u.body.columnBorderWidth&&(e+="hasBorder "),f==x-1&&(e+="isLastColumn "),e}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){var i=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return p.multiLine||(t=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;"+(p.multiLine?"":"line-height: "+i+"px;")+'">'}(v),c.call(this,o,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),l.empty().get(0).innerHTML=r.join(""),!0},E=function(t,e,n,o,a){var l=this.$.panel[t],r=[],s=void 0,c=void 0,h=void 0,g=void 0,f=void 0,x=void 0,p=void 0,v=void 0,m=void 0;for(s=a.paintStartRowIndex,c=function(){var t=void 0;return t=o.length,a.paintRowCount+a.paintStartRowIndex<t&&(t=a.paintRowCount+a.paintStartRowIndex),t}();s<c;s++)if(o[s]&&n&&"__isGrouping"in o[s]){var y=n;for(r=[],h=0,g=y.rows.length;h<g;h++){for(f=0,x=y.rows[h].cols.length;f<x;f++)p=y.rows[h].cols[f],v=u.body.columnHeight*p.rowspan-u.body.columnBorderWidth,m=p.align||_,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+s+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+p.rowIndex+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[s+"_"+p.colIndex+"_"+p.rowIndex],this.selectedColumn[s+"_"+p.colIndex+"_"+p.rowIndex]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:o[s],index:s})+" ":t.styleClass+" "),u.body.columnBorderWidth&&(e+="hasBorder "),f==x-1&&(e+="isLastColumn "),e}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){var i=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return p.multiLine||(t=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;"+(p.multiLine?"":"line-height: "+i+"px;")+'">'}(v),d.call(this,o[s],s,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+s+'" ','data-ax5grid-column-attr="default" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>")}l.find('tr[data-ax5grid-tr-data-index="'+s+'"]').empty().get(0).innerHTML=r.join("")}};u.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&E.call(this,"top-left-body",m,w,g.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),E.call(this,"left-body-scroll",m,w,g,R)),this.xvar.frozenRowIndex>0&&E.call(this,"top-body-scroll",m,I,g.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),E.call(this,"body-scroll",m,I,g,R)),this.xvar.frozenColumnIndex>0&&u.footSum&&this.needToPaintSum&&S.call(this,"bottom-left-body",m,y,g),u.footSum&&this.needToPaintSum&&S.call(this,"bottom-body-scroll",m,b,g,R)},g=function(t){var e=this.config,n=this.list,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,a=(this.asideBodyRowData,this.leftBodyRowData),l=this.bodyRowData,r=this.leftFootSumData,h=this.footSumData,u=(this.asideBodyGroupingData,this.leftBodyGroupingData),g=this.bodyGroupingData,f=e.body.align,x=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,p={paintStartRowIndex:o,paintRowCount:x,bodyTrHeight:this.xvar.bodyTrHeight},v=function(t,n,o,a){var l=this.$.panel[t],r=[],s=void 0,d=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,v=void 0,m=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,d=n.length;s<d;s++)r.push('<col style="width:'+n[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=0,u=o.rows.length;h<u;h++){for(r.push('<tr class="tr-sum">'),g=0,x=o.rows[h].cols.length;g<x;g++)p=o.rows[h].cols[g],v=e.body.columnHeight*p.rowspan-e.body.columnBorderWidth,m=p.align||f,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+g+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn["sum_"+p.colIndex+"_"+h],this.selectedColumn["sum_"+p.colIndex+"_"+h]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),e.body.columnBorderWidth&&(n+="hasBorder "),g==x-1&&(n+="isLastColumn "),n}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){var i=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return p.multiLine||(t=e.body.columnHeight-e.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+i+'px;">'}(v),c.call(this,a,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),l.empty().get(0).innerHTML=r.join(""),!0},m=function(t,n,o,a,l){var r=this.$.panel[t],s=[],c=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,v=void 0,m=void 0,y=void 0;for("undefined"!=typeof l&&"undefined"!=typeof l.paintStartRowIndex||(l={paintStartRowIndex:0,paintRowCount:a.length}),c=l.paintStartRowIndex,h=function(){var t=void 0;return t=a.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();c<h;c++)if(a[c]&&o&&"__isGrouping"in a[c]){var b=o;for(s=[],u=0,g=b.rows.length;u<g;u++){for(x=0,p=b.rows[u].cols.length;x<p;x++)v=b.rows[u].cols[x],m=e.body.columnHeight*v.rowspan-e.body.columnBorderWidth,y=v.align||f,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ','data-ax5grid-column-rowIndex="'+v.rowIndex+'" ','data-ax5grid-column-colIndex="'+v.colIndex+'" ','data-ax5grid-column-attr="'+(v.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[c+"_"+v.colIndex+"_"+v.rowIndex],this.selectedColumn[c+"_"+v.colIndex+"_"+v.rowIndex]),'colspan="'+v.colspan+'" ','rowspan="'+v.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[c],index:c})+" ":t.styleClass+" "),e.body.columnBorderWidth&&(n+="hasBorder "),x==p-1&&(n+="isLastColumn "),n}.call(this,v)+'" ','style="height: '+m+'px;min-height: 1px;">'),s.push(function(t){var i=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return v.multiLine||(t=e.body.columnHeight-e.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(v.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;line-height: "+i+'px;">'}(m),d.call(this,a[c],c,v),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-attr="default" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>")}r.find('tr[data-ax5grid-tr-data-index="'+c+'"]').empty().get(0).innerHTML=s.join("")}},y=function(t,n,o,a,l){var r=this.$.panel[t],d=[],c=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,v=void 0,m=o,y="undefined"!=typeof a[l].__origin_index__?a[l].__origin_index__:l,b=r.find('tr[data-ax5grid-tr-data-index="'+l+'"]').empty().get(0);if(b){for(c=0,h=m.rows.length;c<h;c++){for(u=0,g=m.rows[c].cols.length;u<g;u++)x=m.rows[c].cols[u],p=e.body.columnHeight*x.rowspan-e.body.columnBorderWidth,v=x.align||f,d.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-data-o-index="'+y+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+x.rowIndex+'" ','data-ax5grid-column-colIndex="'+x.colIndex+'" ','data-ax5grid-column-attr="'+(x.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[l+"_"+x.colIndex+"_"+x.rowIndex],this.selectedColumn[l+"_"+x.colIndex+"_"+x.rowIndex]),'colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[l],index:l})+" ":t.styleClass+" "),e.body.columnBorderWidth&&(n+="hasBorder "),u==g-1&&(n+="isLastColumn "),n}.call(this,x)+'" ','style="height: '+p+'px;min-height: 1px;">'),d.push(function(t){var i=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return x.multiLine||(t=e.body.columnHeight-e.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(x.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+t+"px;"+(x.multiLine?"":"line-height: "+i+"px;")+'">'}(p),s.call(this,a,a[l],l,x),"</span>"),d.push("</td>");d.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>")}b.innerHTML=d.join("")}};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?y.call(this,"top-left-body",this.leftHeaderColGroup,a,n.slice(0,this.xvar.frozenRowIndex),t):y.call(this,"left-body-scroll",this.leftHeaderColGroup,a,n,t)),this.xvar.frozenRowIndex>t?y.call(this,"top-body-scroll",this.headerColGroup,l,n.slice(0,this.xvar.frozenRowIndex),t):y.call(this,"body-scroll",this.headerColGroup,l,n,t),e.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?m.call(this,"top-left-body",this.leftHeaderColGroup,u,n.slice(0,this.xvar.frozenRowIndex)):m.call(this,"left-body-scroll",this.leftHeaderColGroup,u,n,p)),this.xvar.frozenRowIndex>t?m.call(this,"top-body-scroll",this.headerColGroup,g,n.slice(0,this.xvar.frozenRowIndex)):m.call(this,"body-scroll",this.headerColGroup,g,n,p)),this.xvar.frozenColumnIndex>0&&e.footSum&&this.needToPaintSum&&v.call(this,"bottom-left-body",this.leftHeaderColGroup,r,n),e.footSum&&this.needToPaintSum&&v.call(this,"bottom-body-scroll",this.headerColGroup,h,n,p)},f=function(i,e){if("undefined"==typeof e&&(e={timeoutUnUse:!1}),this.isInlineEditing)for(var n in this.inlineEditing)t.body.inlineEdit.deActive.call(this,"ESC",n);this.config.asidePanelWidth>0&&"top"in i&&this.$.panel["aside-body-scroll"].css({top:i.top}),this.xvar.frozenColumnIndex>0&&"top"in i&&this.$.panel["left-body-scroll"].css({
//    top:i.top}),this.xvar.frozenRowIndex>0&&"left"in i&&this.$.panel["top-body-scroll"].css({left:i.left}),this.$.panel["body-scroll"].css(i),this.config.footSum&&"left"in i&&this.$.panel["bottom-body-scroll"].css({left:i.left}),this.__throttledScroll?this.__throttledScroll(i,e):(this.config.virtualScrollY&&!e.noRepaint&&"top"in i?h.call(this):this.config.virtualScrollX&&!e.noRepaint&&"left"in i&&h.call(this),e.callback&&e.callback())},x=function(){e.focusClear.call(this),e.clear.call(this),this.isInlineEditing&&v.deActive.call(this)},p=function(i){var n={UD:function(i){var n=!0,o=void 0,a=void 0,l=void 0,r=void 0;for(var s in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[s],!0);break}if(!o)return!1;for(a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],e.focusClear.call(this),e.clear.call(this),i>0?o.rowIndex+(a.rowspan-1)+i>this.bodyRowTable.rows.length-1?(o.dindex=o.dindex+i,o.doindex=o.doindex+i,o.rowIndex=0,o.dindex>this.list.length-1&&(o.dindex=o.doindex=this.list.length-1,n=!1)):o.rowIndex=o.rowIndex+i:o.rowIndex+i<0?(o.dindex=o.dindex+i,o.doindex=o.doindex+i,o.rowIndex=this.bodyRowTable.rows.length-1,o.dindex<0&&(o.dindex=o.doindex=0,n=!1)):o.rowIndex=o.rowIndex+i,l=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];){if(0==o.rowIndex||l%2==(i>0?0:1)?o.colIndex--:o.rowIndex--,o.rowIndex<=0&&o.colIndex<=0){n=!1;break}l++}if(r=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex),this.config.body.mergeCells&&this.list.length){for(;!(this.$.panel[r.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').get(0)||(i>0?o.dindex++:o.dindex--,o.dindex<0||o.dindex>this.list.length-1)););r=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex)}if(o.panelName=r.panelName,o.dindex+1>this.xvar.frozenRowIndex)if(o.dindex<=this.xvar.virtualPaintStartRowIndex){var d=(o.dindex-this.xvar.frozenRowIndex-1)*this.xvar.bodyTrHeight;d<0&&(d=0),f.call(this,{top:-d,timeoutUnUse:!1}),t.scroller.resize.call(this)}else o.dindex+1>this.xvar.virtualPaintStartRowIndex+(this.xvar.virtualPaintRowCount-2)&&(f.call(this,{top:(this.xvar.virtualPaintRowCount-2-o.dindex)*this.xvar.bodyTrHeight,timeoutUnUse:!1}),t.scroller.resize.call(this));return this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n},LR:function(i){var n=!0,o=void 0,a=void 0,l=!1,r="",s=void 0;for(var d in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[d],!0);break}if(!o)return!1;if(a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],e.focusClear.call(this),e.clear.call(this),i<0?(o.colIndex=o.colIndex+i,o.colIndex<0&&(o.colIndex=0,n=!1)):(o.colIndex=o.colIndex+i,o.colIndex>this.colGroup.length-1&&(o.colIndex=this.colGroup.length-1,n=!1)),"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.rowIndex=0),this.list[o.dindex]&&this.list[o.dindex].__isGrouping){if(i<0){for(;"undefined"==typeof this.bodyGroupingMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex--,o.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyGroupingMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex++,o.colIndex>=this.colGroup.length){n=!1;break}}else if(i<0){for(;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex--,o.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex++,o.colIndex>=this.colGroup.length){n=!1;break}if(s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex),this.config.body.mergeCells&&this.list.length&&o.dindex>1){for(;!(this.$.panel[s.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').get(0)||(o.dindex--,o.dindex<0||o.dindex>this.list.length-1)););s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex)}o.panelName=s.panelName;var c=function(){if(!this.config.virtualScrollX)return!1;var i=0;if(o.colIndex+1>this.xvar.frozenColumnIndex){if(o.colIndex<=this.xvar.paintStartColumnIndex&&this.colGroup[o.colIndex])return i=-this.colGroup[Number(o.colIndex)]._sx,f.call(this,{left:i}),t.header.scrollTo.call(this,{left:i}),t.scroller.resize.call(this),!0;if(o.colIndex>=this.xvar.paintEndColumnIndex&&this.colGroup[Number(o.colIndex)])return this.colGroup[Number(o.colIndex)]._ex>this.xvar.bodyWidth&&(i=this.colGroup[Number(o.colIndex)]._ex-this.xvar.bodyWidth,f.call(this,{left:-i}),t.header.scrollTo.call(this,{left:-i}),t.scroller.resize.call(this)),!0}return i=null,!1}.call(this);r=s.containerPanelName,l=s.isScrollPanel,this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o;var h=this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(!c&&h&&l){var u=function(){return h.position().left+h.outerWidth()>Math.abs(this.$.panel[o.panelName].position().left)+this.$.panel[r].width()?h.position().left+h.outerWidth()-this.$.panel[r].width():Math.abs(this.$.panel[o.panelName].position().left)>h.position().left?h.position().left:void 0}.call(this);"undefined"!=typeof u&&(t.header.scrollTo.call(this,{left:-u}),f.call(this,{left:-u}),t.scroller.resize.call(this))}return n},INDEX:function(i){var n=!0,o=void 0,a=void 0,l=void 0;for(var r in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[r],!0);break}for(o||(o={rowIndex:0,colIndex:0}),a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],e.focusClear.call(this),e.clear.call(this),"end"==i&&(i=this.list.length-1),o.dindex=i,o.rowIndex=0,l=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(0==o.rowIndex||l%2==(_dy>0?0:1)?o.colIndex--:o.rowIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)l++;var s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex);if(o.panelName=s.panelName,o.dindex+1>this.xvar.frozenRowIndex){var d=this.xvar.virtualPaintStartRowIndex||0;if(o.dindex<d)f.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this);else if(o.dindex+1>d+(this.xvar.virtualPaintRowCount-2)){var c=this.config.virtualScrollY?o.dindex-this.xvar.frozenRowIndex-this.xvar.virtualPaintRowCount+3:o.dindex-this.xvar.frozenRowIndex;f.call(this,{top:-c*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)}}return this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n}},o={UP:function(){return n.UD.call(this,-1)},DOWN:function(){return n.UD.call(this,1)},LEFT:function(){return n.LR.call(this,-1)},RIGHT:function(){return n.LR.call(this,1)},HOME:function(){return n.INDEX.call(this,0)},END:function(){return n.INDEX.call(this,"end")},position:function(t){return n.INDEX.call(this,t)}};return i in o?o[i].call(this):o.position.call(this,i)},v={active:function(e,n,a){var l=this,r=void 0,s=void 0,d=void 0,c=void 0,h=void 0,u=void 0,g=void 0,f=void 0;for(var x in e){if(h=e[x].panelName,r=e[x].dindex,s=e[x].doindex,d=e[x].colIndex,c=e[x].rowIndex,u=e[x].colspan,g=this.colGroup[d],!(f=g.editor))return this;if(i.isFunction(f.disabled)&&f.disabled.call({list:this.list,dindex:r,item:this.list[r],key:g.key,value:a}))return this;if(!function(i,e){if(i.type in t.inlineEditor)return"popup"==t.inlineEditor[i.type].editMode}(f)){if("checkbox"==f.type){var p=void 0,v=void 0;v=f.config&&f.config.trueValue?(p=!(a==f.config.trueValue))?f.config.trueValue:f.config.falseValue:p=0==a||"false"==a||a<"1"?"true":"false",t.data.setValue.call(l,r,s,g.key,v),o.call(l,["cellChecked"],r,s,{key:g.key,rowIndex:c,colIndex:d,editorConfig:g.editor.config,checked:p})}return this}if(this.list[r].__isGrouping)return!1;if(x in this.inlineEditing)return!1;this.inlineEditing[x]={editor:f,panelName:h,columnKey:x,column:e[x],useReturnToSave:t.inlineEditor[f.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var m=t.data.getValue.call(l,r,s,g.key),y=function(t,e){return i.isNothing(t)&&(t=i.isNothing(m)?"":m),"money"==e.type?i.number(t,{money:!0}):t}.call(this,a,f);return this.inlineEditing[x].$inlineEditorCell=this.$.panel[h].find('[data-ax5grid-tr-data-index="'+r+'"]').find('[data-ax5grid-column-rowindex="'+c+'"][data-ax5grid-column-colindex="'+d+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[x].$inlineEditor=t.inlineEditor[f.type].init(this,x,f,this.inlineEditing[x].$inlineEditorCell,y),!0}},deActive:function(e,n,o){if(!this.inlineEditing[n])return this;var a=this.inlineEditing[n].panelName,l=this.inlineEditing[n].column.dindex,r=this.inlineEditing[n].column.doindex,s=this.inlineEditing[n].column.rowIndex,d=this.inlineEditing[n].column.colIndex,c=this.bodyRowMap[this.inlineEditing[n].column.rowIndex+"_"+this.inlineEditing[n].column.colIndex],h=function(t){return"undefined"==typeof o?"SELECT"==t.get(0).tagName||"INPUT"==t.get(0).tagName||"TEXTAREA"==t.get(0).tagName?t.val():(e="CANCEL",!1):o}(this.inlineEditing[n].$inlineEditor),u=function(t,e){return"money"==e.type?i.number(t):t}.call(this,h,c.editor),g={CANCEL:function(t,i,e){g.__clear.call(this)},RETURN:function(i,e,n,o){t.data.setValue.call(this,i,e,n.key,o)?(g.__clear.call(this),t.body.repaintCell.call(this,a,i,e,s,d,o)):g.__clear.call(this)},__clear:function(){if(this.isInlineEditing=!1,this.inlineEditing[n]&&this.inlineEditing[n].$inlineEditor){var t=this.inlineEditing[n].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[n].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[n].$inlineEditor.ax5select("close"),this.inlineEditing[n].$inlineEditor.remove(),this.inlineEditing[n].$inlineEditor=null,this.inlineEditing[n].$inlineEditorCell=null}this.inlineEditing[n]=void 0,delete this.inlineEditing[n]}};e in g?g[e||"RETURN"].call(this,l,r,c,u):g.__clear.call(this)},keydown:function(i,e,n){var a={ESC:function(){for(var t in this.inlineEditing)v.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing){if(!this.inlineEditing[e]||!this.inlineEditing[e].useReturnToSave)return!1;v.deActive.call(this,"RETURN",e)}else for(var i in this.focusedColumn){var a=this.focusedColumn[i],l=this.bodyRowMap[a.rowIndex+"_"+a.colIndex],r=a.dindex,s=a.doindex,d="",c=this.colGroup[a.colIndex];if(l&&(this.list[r].__isGrouping||(d=t.data.getValue.call(this,r,s,l.key))),c.editor&&"inline"===t.inlineEditor[c.editor.type].editMode){if(n&&n.moveFocus);else if(l.editor&&"checkbox"==l.editor.type){d=t.data.getValue.call(this,r,s,l.key);var h=void 0,u=void 0;l.editor.config&&l.editor.config.trueValue?d!=l.editor.config.trueValue?(u=l.editor.config.trueValue,h=!0):(u=l.editor.config.falseValue,h=!1):u=h=0==d||"false"==d||d<"1"?"true":"false",t.data.setValue.call(this,r,s,l.key,u),o.call(this,["cellChecked"],r,s,{key:l.key,rowIndex:a.rowIndex,colIndex:a.colIndex,editorConfig:l.editor.config,checked:h})}}else t.body.inlineEdit.active.call(this,this.focusedColumn,null,d)}return!0}};i in a&&a[i].call(this,i,e,n)}},m=function(){var t=this.config,i=this.list,e=this.bodyRowTable,n=this.footSumTable,o=this.bodyGroupingTable,a=function(t,i,e,n){var o=[],a=void 0,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0,g=void 0,f=void 0;for(a=0,l=n.length;a<l;a++){var x=!1,p=void 0;e&&"__isGrouping"in n[a]?(p=e,x=!0):p=i;for(r=0,c=p.rows.length;r<c;r++){for(o.push("\n<tr>"),h=0,u=p.rows[r].cols.length;h<u;h++)g=p.rows[r].cols[h],o.push("<td ",'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ',">",(x?d.call(this,n[a],a,g):s.call(this,n,n[a],a,g,f,"text"))||"&nbsp;","</td>");o.push("\n</tr>")}}return o.join("")},l=function(t,i,e){var n=[],o=void 0,a=void 0,l=void 0,r=void 0,s=void 0;for(o=0,a=i.rows.length;o<a;o++){for(n.push("\n<tr>"),l=0,r=i.rows[o].cols.length;l<r;l++)s=i.rows[o].cols[l],n.push("<td ",'colspan="'+s.colspan+'" ','rowspan="'+s.rowspan+'" ',">",c.call(this,e,s),"</td>");n.push("\n</tr>")}return n.join("")},r=[];return r.push(a.call(this,this.headerColGroup,e,o,i)),t.footSum&&r.push(l.call(this,this.headerColGroup,n,i)),t.rightSum,r.join("")},y=function(i,e,n){t.data.toggleCollapse.call(this,i,e,n)&&(this.proxyList=t.data.getProxyList.call(this,this.list),this.align())},b=function(t,i){var e={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};p.call(this,t),this.config.body.onClick&&this.config.body.onClick.call(e,e),e=null},w=function(t,i){var e={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};p.call(this,t),this.config.body.onDBLClick&&this.config.body.onDBLClick.call(e),e=null};t.body={init:l,repaint:h,repaintCell:u,repaintRow:g,updateRowState:o,updateRowStateAll:a,scrollTo:f,blur:x,moveFocus:p,inlineEdit:v,getExcelString:m,toggleCollapse:y,click:b,dblClick:w}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){for(var t=0,e=this.list.length;e--;)"__groupingList"in this.list[e]||(t+=i.number(this.list[e][this.key]));return t},n=function(){for(var t=0,e=this.list.length,n=0;e--;)"__groupingList"in this.list[e]||(t+=i.number(this.list[e][this.key]),n++);return i.number(t/(n||1),{round:2})};t.collector={sum:e,avg:n}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){},n=function(t){for(var i=0,e=t.length,n=[];i<e;i++)t[i]&&!t[i].__isGrouping&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),n.push(jQuery.extend({},t[i])));return n},o=function(t){this.selectedDataIndexs=[];var e=0,n=t.length,o=[],a=0,l=0,r=0;if(this.config.body.grouping)for(var s=i.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),d=0,c=s.length,h=void 0,u=[],g=void 0;e<n+1;e++)if(d=0,t[e]&&t[e][this.config.columnKeys.deleted])this.deletedList.push(t[e]);else{for(h="",u=[];d<c;d++){if(t[e]&&(h+="$|$"+t[e][s[d].key]),a>0&&h!=s[d].compareString){for(var f={keys:[],labels:[],list:s[d].list},x=0;x<d+1;x++)f.keys.push(s[x].key),f.labels.push(t[e-1][s[x].key]);u.push(f),s[d].list=[]}s[d].list.push(t[e]),s[d].compareString=h}for(g=u.length;g--;)o.push({__isGrouping:!0,__groupingList:u[g].list,__groupingBy:{keys:u[g].keys,labels:u[g].labels}});t[e]&&(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),t[e].__original_index=t[e].__index=r,o.push(t[e]),l++,a++,r++)}else for(;e<n;e++)t[e]&&(t[e][this.config.columnKeys.deleted]?this.deletedList.push(t[e]):(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),"undefined"==typeof t[e].__original_index&&(t[e].__original_index=r),t[e].__index=r,l++,r++,o.push(t[e])));return this.xvar.dataRealRowCount=l,o},a=function(t){this.selectedDataIndexs=[],this.deletedList=[];for(var e=0,n=0,o=0,a=0,l=t.length,r=this.config.tree.columnKeys,s=this.config.tree.hashDigit,d={};l--;)delete t[l][r.parentHash],delete t[l][r.selfHash];for(e=0,n=0,l=t.length;e<l;e++)t[e]&&(d[t[e][r.selfKey]]=e,(i.isNothing(t[e][r.parentKey])||"top"===t[e][r.parentKey])&&(t[e][r.parentKey]="top",t[e][r.children]=[],t[e][r.parentHash]=i.setDigit("0",s),t[e][r.selfHash]=i.setDigit("0",s)+"."+i.setDigit(n,s),t[e][r.depth]=0,t[e][r.hidden]=!1,n++));for(e=0,a=0;e<l;e++){var c=void 0,h=void 0;t[e]&&"top"!==t[e][r.parentKey]&&"undefined"==typeof t[e][r.parentHash]&&((c=t[d[t[e][r.parentKey]]])?(h=c[r.selfHash],t[e][r.children]=[],t[e][r.parentHash]=h,t[e][r.selfHash]=h+"."+i.setDigit(c[r.children].length,s),t[e][r.depth]=c[r.depth]+1,(c[r.collapse]||c[r.hidden])&&(t[e][r.hidden]=!0),c[r.children].push(t[e][r.selfKey])):(t[e][r.parentKey]="top",t[e][r.children]=[],t[e][r.parentHash]=i.setDigit("0",s),t[e][r.selfHash]=i.setDigit("0",s)+"."+i.setDigit(n,s),t[e][r.hidden]=!1,n++)),t[e]&&(t[e][this.config.columnKeys.deleted]?(this.deletedList.push(t[e]),t[e][r.hidden]=!0):t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),t[e].__index=a,o++,a++)}return this.listIndexMap=d,this.xvar.dataRealRowCount=o,t},l=function(t){for(var i=0,e=t.length,n=[];i<e;i++)t[i]&&!t[i][this.config.tree.columnKeys.hidden]&&(t[i].__origin_index__=i,n.push(t[i]));return n},r=function(e){var n=void 0;return i.isArray(e)?(this.page=null,n=e):"page"in e&&(this.page=jQuery.extend({},e.page),n=e.list),this.config.tree.use?(this.list=a.call(this,n),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))):(this.proxyList=null,this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?b.call(this,this.sortInfo,n):n)),this.selectedDataIndexs=[],this.deletedList=[],this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this.config.body.grouping,this},s=function(t){return{list:this.list,page:this.page}},d=function(i){var e=[],n=this.list,o=0,a=n.length;switch(i){case"modified":for(;o<a;o++)n[o]&&!n[o].__isGrouping&&n[o][this.config.columnKeys.modified]&&e.push(jQuery.extend({},n[o]));break;case"selected":for(;o<a;o++)n[o]&&!n[o].__isGrouping&&n[o][this.config.columnKeys.selected]&&e.push(jQuery.extend({},n[o]));break;case"deleted":e=[].concat(this.deletedList);break;default:e=t.data.clearGroupingData.call(this,n)}return e},c=function(e,r,s){var d=this.config.body.grouping?n.call(this,this.list):this.list,c={first:function(){d=[].concat(e).concat(d)},last:function(){d=d.concat([].concat(e))}};if(this.config.tree.use){var h=this.list.concat([].concat(e));this.list=a.call(this,h),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))}else{if("undefined"==typeof r&&(r="last"),r in c)e[this.config.columnKeys.modified]=!0,c[r].call(this,e);else{if(!i.isNumber(r))throw"invalid argument _dindex";if(i.isArray(e))for(var u=0,g=e.length;u<g;u++)d.splice(r+u,0,e[u]);else d.splice(r,0,e)}d=this.config.body.grouping?o.call(this,b.call(this,this.sortInfo,d)):s&&s.sort&&Object.keys(this.sortInfo).length?o.call(this,b.call(this,this.sortInfo,d)):o.call(this,d),this.list=d}return this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},h=function(e){var r=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){this.config.tree.use?s.tree.call(this,0):r.splice(0,1)},last:function(){this.config.tree.use?s.tree.call(this,r.length-1):r.splice(r.length-1,1)},index:function(t){this.config.tree.use?s.tree.call(this,t):r.splice(t,1)},selected:function(){if(this.config.tree.use)s.tree.call(this,"selected");else{var t=[],i=void 0,e=void 0;for(i=0,e=r.length;i<e;i++)r[i][this.config.columnKeys.selected]||t.push(r[i]);r=t,t=null,i=null}},tree:function(t){var e=this.config.tree.columnKeys,n=r[t][this.config.tree.columnKeys.selfHash];r=i.filter(r,function(){return this[e.selfHash].substr(0,n.length)!=n}),e=null,n=null}};if("undefined"==typeof e&&(e="last"),e in s)s[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _dindex";s.index.call(this,e)}return this.config.tree.use?(this.list=a.call(this,r),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))):(r=this.config.body.grouping?o.call(this,b.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length?o.call(this,b.call(this,this.sortInfo,r)):o.call(this,r),this.list=r),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},u=function(e){var r=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){this.config.tree.use?s.tree.call(this,0):r[0][this.config.columnKeys.deleted]=!0},last:function(){this.config.tree.use?s.tree.call(this,r.length-1):r[r.length-1][this.config.columnKeys.deleted]=!0},selected:function(){if(this.config.tree.use)s.tree.call(this,"selected");else{for(var t=r.length;t--;)r[t][this.config.columnKeys.selected]&&(r[t][this.config.columnKeys.deleted]=!0);t=null}},tree:function(t){var i=this.config.columnKeys,e=this.config.tree.columnKeys;if("selected"===t){for(var n=r.length;n--;)if(r[n][this.config.columnKeys.selected]){r[n][this.config.columnKeys.deleted]=!0;for(var o=r[n][e.selfHash],a=r.length;a--;)r[a][e.selfHash].substr(0,o.length)===o&&(r[a][i.deleted]=!0);o=null,a=null}n=null}else{for(var l=r[t][e.selfHash],s=r.length;s--;)r[s][e.selfHash].substr(0,l.length)!==l&&(r[s][i.deleted]=!0);l=null,s=null}i=null,e=null}};if("undefined"==typeof e&&(e="last"),e in s)s[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _dindex";r[e][this.config.columnKeys.deleted]=!0}return this.config.tree.use?(this.list=a.call(this,r),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))):(r=this.config.body.grouping?o.call(this,b.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length?o.call(this,b.call(this,this.sortInfo,r)):o.call(this,r),this.list=r),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},g=function(t,e){if(!i.isNumber(e))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(e,1,t),this.config.body.grouping&&(this.list=o.call(this,n.call(this,this.list)))},f=function(t,i,e){var n=this.config.tree.columnKeys,o=void 0,a=void 0;if("undefined"==typeof t)return!1;if(a=this.proxyList[t].__origin_index__,this.list[a][n.children]){if(this.proxyList=[],e&&e.filter){if(e.filter.call({item:this.list[a],dindex:a},this.list[a]))for(var l in i)this.list[a][l]=i[l]}else for(var r in i)this.list[a][r]=i[r];o=this.list[a][n.selfHash];for(var s=0,d=this.list.length;s<d;s++)if(this.list[s]){if(this.list[s][n.parentHash].substr(0,o.length)===o)if(e&&e.filter){if(e.filter.call({item:this.list[s],dindex:s},this.list[s]))for(var c in i)this.list[s][c]=i[c]}else for(var h in i)this.list[s][h]=i[h];this.list[s][n.hidden]||this.proxyList.push(this.list[s])}return!0}return!1},x=function(i,e,n,o){var a=p.call(this,i,e,n),l=this.list,r="undefined"==typeof e?i:e;if(this.needToPaintSum=!0,a!==o){if(/[\.\[\]]/.test(n))try{l[r][this.config.columnKeys.modified]=!0,Function("val","this"+t.util.getRealPathForDataItem(n)+" = val;").call(l[r],o)}catch(s){}else l[r][this.config.columnKeys.modified]=!0,l[r][n]=o;this.onDataChanged&&this.onDataChanged.call({self:this,list:this.list,dindex:i,doindex:e,item:this.list[i],key:n,value:o})}return!0},p=function(i,e,n,o){var a=this.list,l="undefined"==typeof e?i:e;if(/[\.\[\]]/.test(n))try{o=Function("","return this"+t.util.getRealPathForDataItem(n)+";").call(a[l])}catch(r){}else o=a[l][n];return o},v=function(){this.selectedDataIndexs=[]},m=function(t,e,n,o){var a=this.config;return"undefined"==typeof e&&(e=t),!!this.list[e]&&(!this.list[e].__isGrouping&&(!this.list[e][a.columnKeys.disableSelection]&&("undefined"==typeof n?(this.list[e][a.columnKeys.selected]=!this.list[e][a.columnKeys.selected])?this.selectedDataIndexs.push(e):this.selectedDataIndexs.splice(i.search(this.selectedDataIndexs,function(){return this==e}),1):(this.list[e][a.columnKeys.selected]=n)?this.selectedDataIndexs.push(e):this.selectedDataIndexs.splice(i.search(this.selectedDataIndexs,function(){return this==e}),1),this.onDataChanged&&o&&o.internalCall&&this.onDataChanged.call({self:this,list:this.list,dindex:t,doindex:e,item:this.list[e],key:a.columnKeys.selected,value:this.list[e][a.columnKeys.selected]}),this.list[e][a.columnKeys.selected])))},y=function(t,i){var e=this.config,n=this.list.length;if(this.selectedDataIndexs=[],"undefined"==typeof t)for(;n--;)this.list[n].__isGrouping||i&&i.filter&&i.filter.call(this.list[n])!==!0||this.list[n][e.columnKeys.disableSelection]||(this.list[n][e.columnKeys.selected]=!this.list[n][e.columnKeys.selected])&&this.selectedDataIndexs.push(n);else for(;n--;)this.list[n].__isGrouping||i&&i.filter&&i.filter.call(this.list[n])!==!0||this.list[n][e.columnKeys.disableSelection]||(this.list[n][e.columnKeys.selected]=t)&&this.selectedDataIndexs.push(n);return this.onDataChanged&&i&&i.internalCall&&this.onDataChanged.call({self:this,list:this.list}),this.list},b=function(e,n,o){var a=n||this.list,l=[],r=0,s=function(i,e,n){if(/[\.\[\]]/.test(e))try{n=Function("","return this"+t.util.getRealPathForDataItem(e)+";").call(i)}catch(o){}else n=i[e];return n};for(var d in e)l[e[d].seq]={key:d,order:e[d].orderBy};l=i.filter(l,function(){return"undefined"!=typeof this}),o&&o.resetLineNumber&&0===l.length&&(l[0]={key:"__original_index",order:"asc"});var c=0,h=l.length,u=void 0,g=void 0;if(a.sort(function(t,i){for(c=0;c<h;c++){if(u=s(t,l[c].key),g=s(i,l[c].key),("undefined"==typeof u?"undefined":_typeof(u))!==("undefined"==typeof g?"undefined":_typeof(g))&&(u=""+u,g=""+g),u<g)return"asc"===l[c].order?-1:1;if(u>g)return"asc"===l[c].order?1:-1}}),o&&o.resetLineNumber)for(c=0,h=a.length,r=0;c<h;c++)n[c]&&!n[c].__isGrouping&&(n[c].__index=r++);return n?a:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this)},w=function(i,e){var n=this;if(this.config.tree.use){var o=this.list.concat([].concat(i));this.list=a.call(this,o),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list)),o=null}else this.list=this.list.concat([].concat(i));if(this.appendProgress=!0,t.page.statusUpdate.call(this),this.appendDebouncer){if(!(n.appendDebounceTimes<this.config.debounceTime/10))return n.appendDebounceTimes=0,I.call(n),e(),!1;clearTimeout(this.appendDebouncer),n.appendDebounceTimes++}this.appendDebouncer=setTimeout(function(){n.appendDebounceTimes=0,I.call(n),e()},this.config.debounceTime)},I=function(){this.appendProgress=!1,this.config.body.grouping?this.list=o.call(this,b.call(this,this.sortInfo,this.list)):this.list=o.call(this,this.list),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this)},_=function(t,i,e){var n=this.config.tree.columnKeys,o=void 0,a=void 0;if("undefined"==typeof t)return!1;if(a=this.proxyList[t].__origin_index__,this.list[a][n.children]){this.proxyList=[],"undefined"==typeof e&&(e=!this.list[a][n.collapse]),this.list[a][n.collapse]=e,o=this.list[a][n.selfHash];for(var l=this.list.length;l--;)this.list[l]&&(this.list[l][n.parentHash].substr(0,o.length)===o&&(this.list[l][n.hidden]=e),this.list[l][n.hidden]||this.proxyList.push(this.list[l]));return!0}return!1};t.data={init:e,set:r,get:s,getList:d,getProxyList:l,setValue:x,getValue:p,clearSelect:v,select:m,selectAll:y,add:c,remove:h,deleteRow:u,update:g,updateChild:f,sort:b,initData:o,clearGroupingData:n,append:w,toggleCollapse:_}}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(){return"\ufeff\n{{#tables}}{{{body}}}{{/tables}}\n"}),e=function(t,e){var n=void 0,o=[].concat(t);n=ax5.mustache.render(i(),{worksheet:function(){var t=[];return o.forEach(function(i,e){t.push({name:"Sheet"+(e+1)})}),t}(),tables:function(){var t=[];return o.forEach(function(i,e){t.push({body:i})}),t}()});var a=navigator.userAgent.indexOf("Chrome")>-1,l=!a&&navigator.userAgent.indexOf("Safari")>-1,r=!!document.documentMode,s=void 0,d=void 0,c=void 0,h=void 0,u=void 0;return navigator.msSaveOrOpenBlob?(s=new Blob([n],{type:"text/html"}),window.navigator.msSaveOrOpenBlob(s,e)):l?(d=window.open("about:blank",this.id+"-excel-export","width=600,height=400"),d.document.write(n),d=null):r&&"undefined"==typeof Blob?(c=jQuery('<iframe id="'+this.id+'-excel-export" style="display:none"></iframe>'),jQuery(document.body).append(c),h=window[this.id+"-excel-export"],h.document.open("text/html","replace"),h.document.write(n),h.document.close(),h.focus(),h.document.execCommand("SaveAs",!0,e),c.remove()):(u=document.body.appendChild(document.createElement("a")),"download"in u&&(u.download=e,u.href=URL.createObjectURL(new Blob([n],{type:"text/csv"})),u.click(),document.body.removeChild(u))),!0};t.excel={"export":e}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){if("undefined"!=typeof this.value){var t=(""+this.value).replace(/[^0-9^\.^\-]/g,""),e=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),n=t.split(".");n[0]+=".";do n[0]=n[0].replace(e,"$1,$2");while(e.test(n[0]));return n.length>1?n[0]+i.left(n[1],2):n[0].split(".")[0]}return""};t.formatter={money:e}}(),function(){var t=ax5.ui.grid,i=ax5.util,e={on:function(n,o){var a=this,l=$(n),r=l.offset().left,s=a.$.container.root.offset().left;a.xvar.columnResizerIndex=o;var d={min:-a.colGroup[o]._width+2,max:a.$.container.root.width()-a.colGroup[o]._width};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(i){var e=t.util.getMousePosition(i);a.xvar.__da=e.clientX-a.xvar.mousePosition.clientX,d.min>a.xvar.__da?a.xvar.__da=d.min:d.max<a.xvar.__da&&(a.xvar.__da=d.max),a.xvar.columnResizerLived||a.$.resizer.horizontal.addClass("live"),a.xvar.columnResizerLived=!0,a.$.resizer.horizontal.css({left:r+a.xvar.__da-s})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){e.off.call(a),i.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){e.off.call(a),i.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,"undefined"==typeof this.xvar.__da||this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(){var n=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(e){var o=this.getAttribute("data-ax5grid-column-key"),a=this.getAttribute("data-ax5grid-column-colindex"),l=n.colGroup[a];if("__checkbox_header__"===o&&n.config.header.selector){var r=this.getAttribute("data-ax5grid-selected");r=!!i.isNothing(r)||"true"!==r,$(this).attr("data-ax5grid-selected",r),n.selectAll({selected:r}),r=null}else o&&l&&l.sortable!==!1&&!l.sortFixed&&(l.sortable!==!0&&n.config.sortable!==!0||s.call(n,l.key));t.body.blur.call(n),o=null,a=null,l=null}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(o){var a=this.getAttribute("data-ax5grid-column-resizer");n.xvar.mousePosition=t.util.getMousePosition(o),e.on.call(n,this,Number(a)),i.stopEvent(o),a=null}).on("dragstart",function(t){return i.stopEvent(t),!1}),o.call(this)},o=function(){var i=this.config,e=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.xvar.frozenColumnIndex);this.asideHeaderData=function(t){for(var e=[],n={rows:[]},o=0,a=t.rows.length;o<a;o++)if(n.rows[o]={cols:[]},0===o){var l={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},r={};i.showLineNumber&&(r=jQuery.extend({},l,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,columnAttr:"lineNumber",key:"__index_header__",label:"&nbsp;"}),e.push(r),n.rows[o].cols.push(r)),i.showRowSelector&&(r=jQuery.extend({},l,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,columnAttr:"rowSelector",key:"__checkbox_header__",label:""}),e.push(r),n.rows[o].cols.push(r)),
//    l=null}return this.asideColGroup=e,n}.call(this,this.headerTable),this.leftHeaderData=e.leftData,this.headerData=e.rightData},a=function(t){return"__checkbox_header__"===t.key?this.config.header.selector?'<div class="checkBox" style="max-height: '+(t.width-10)+"px;min-height: "+(t.width-10)+'px;"></div>':"&nbsp;":t.label||"&nbsp;"},l=function(t){var e=this.config,n=this.colGroup;t&&(o.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0);var l=this.asideHeaderData,r=this.leftHeaderData,s=this.headerData,d=e.header.align;this.leftHeaderColGroup=n.slice(0,this.config.frozenColumnIndex),this.headerColGroup=n.slice(this.config.frozenColumnIndex);var c=function(t,o,l){var r=0,s=[];s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>");for(var c=0,h=o.length;c<h;c++)s.push('<col style="width:'+o[c]._width+'px;"  />'),r+=o[c]._width;s.push("<col  />"),s.push("</colgroup>");for(var u=0,g=l.rows.length;u<g;u++){var f="";s.push('<tr class="'+f+'">');for(var x=0,p=l.rows[u].cols.length;x<p;x++){var v=l.rows[u].cols[x],m=e.header.columnHeight*v.rowspan-e.header.columnBorderWidth,y=d||v.align;s.push("<td ",'data-ax5grid-column-attr="'+(v.columnAttr||"default")+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ',function(){return"undefined"!=typeof v.key?'data-ax5grid-column-key="'+v.key+'" ':""}(),'data-ax5grid-column-colindex="'+v.colIndex+'" ','data-ax5grid-column-rowindex="'+v.rowIndex+'" ','colspan="'+v.colspan+'" ','rowspan="'+v.rowspan+'" ','class="'+function(t){var n="";return t.headerStyleClass&&(n+=i.isFunction(t.headerStyleClass)?t.headerStyleClass.call({column:t,key:t.key})+" ":t.headerStyleClass+" "),e.header.columnBorderWidth&&(n+="hasBorder "),x==p-1&&(n+="isLastColumn "),n}.call(this,v)+'" ','style="height: '+m+'px;min-height: 1px;">'),s.push(function(){var t=e.header.columnHeight-2*e.header.columnPadding-e.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" '+(y?'data-ax5grid-text-align="'+y+'"':"")+' style="height: '+(e.header.columnHeight-e.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),function(){var t="";return i.isNothing(v.key)||i.isNothing(v.colIndex)||e.sortable!==!0&&v.sortable!==!0||v.sortable===!1||(t+='<span data-ax5grid-column-sort="'+v.colIndex+'" data-ax5grid-column-sort-order="'+(n[v.colIndex].sort||"")+'" />'),t}(),a.call(this,v),"</span>"),i.isNothing(v.colIndex)||e.enableFilter&&s.push('<span data-ax5grid-column-filter="'+v.colIndex+'" data-ax5grid-column-filter-value=""  />'),s.push("</td>")}s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+e.header.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),t.html(s.join("")),function(){for(var n=e.header.columnHeight*l.rows.length-e.header.columnBorderWidth,a=0,r=[],s=0,d=o.length;s<d;s++){var c=o[s];i.isNothing(c.colIndex)||(a+=c._width,r.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+n+"px;left: "+(a-4)+'px;"  />'))}t.append(r)}.call(this),r};e.asidePanelWidth>0&&c.call(this,this.$.panel["aside-header"],this.asideColGroup,l),e.frozenColumnIndex>0&&c.call(this,this.$.panel["left-header"],this.leftHeaderColGroup,r),this.xvar.scrollContentWidth=c.call(this,this.$.panel["header-scroll"],this.headerColGroup,s),e.rightSum},r=function(t){return this.$.panel["header-scroll"].css(t),this},s=function(t){var i="",e={},n=0;for(var o in this.sortInfo)this.sortInfo[o].fixed&&(e[o]=this.sortInfo[o],n++);for(var a=0,l=this.colGroup.length;a<l;a++)this.colGroup[a].key==t?(""==i&&(i="undefined"==typeof this.colGroup[a].sort?"desc":"desc"===this.colGroup[a].sort?"asc":void 0),this.colGroup[a].sort=i):this.config.multiSort||(this.colGroup[a].sort=void 0),"undefined"!=typeof this.colGroup[a].sort&&(e[this.colGroup[a].key]||(e[this.colGroup[a].key]={seq:n++,orderBy:this.colGroup[a].sort}));return this.setColumnSort(e),this},d=function(t){for(var i=0,e=this.colGroup.length;i<e;i++)for(var n in t)this.colGroup[i].key==n&&(this.colGroup[i].sort=t[n].orderBy);return this},c=function(){var t=(this.config,this.colGroup),i=this.headerTable,e=function(t,i){for(var e=[],n=0,o=i.rows.length;n<o;n++){e.push("<tr>");for(var l=0,r=i.rows[n].cols.length;l<r;l++){var s=i.rows[n].cols[l];e.push("<td ",'colspan="'+s.colspan+'" ','rowspan="'+s.rowspan+'" ',">",a.call(this,s),"</td>")}e.push("</tr>")}return e.join("")};return e.call(this,t,i)};t.header={init:n,repaint:l,scrollTo:r,toggleSort:s,applySortStatus:d,getExcelString:c}}(),function(){var t=ax5.ui.grid,i={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){if("undefined"!=typeof e.attributes){var o="";for(var a in e.attributes)o+=" "+a+"='"+e.attributes[a]+"'"}return'<input type="text" data-ax5grid-editor="text" value="'+n+'" '+o+">"},init:function(i,e,n,o,a){var l;return o.append(l=jQuery(this.getHtml(i,e,n,a))),this.bindUI(i,e,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(i,"RETURN",e)}),l},bindUI:function(t,i,e,n,o,a){e.focus().select()}},e={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){var o="";if("undefined"!=typeof e.attributes)for(var a in e.attributes)o+=" "+a+"='"+e.attributes[a]+"'";return'<input type="text" data-ax5grid-editor="money" value="'+n+'" '+o+'" />'},init:function(i,e,n,o,a){var l=void 0;return o.append(l=jQuery(this.getHtml(i,e,n,a))),this.bindUI(i,e,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(i,"RETURN",e)}),l},bindUI:function(t,i,e,n,o,a){e.data("binded-ax5ui","ax5formater"),e.ax5formatter($.extend(!0,{pattern:"money"},n.config)),e.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){var o="";if("undefined"!=typeof e.attributes)for(var a in e.attributes)o+=" "+a+"='"+e.attributes[a]+"'";return'<input type="text" data-ax5grid-editor="number" value="'+n+'" '+o+'" />'},init:function(i,e,n,o,a){var l;return o.append(l=jQuery(this.getHtml(i,e,n,a))),this.bindUI(i,e,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(i,"RETURN",e)}),l},bindUI:function(t,i,e,n,o,a){e.data("binded-ax5ui","ax5formater"),e.ax5formatter($.extend(!0,{pattern:"number"},n.config)),e.focus().select()}},o={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){return'<input type="text" data-ax5grid-editor="calendar" value="'+n+'" >'},init:function(t,i,e,n,o){var a;return n.append(a=jQuery(this.getHtml(t,i,e,o))),this.bindUI(t,i,a,e,n,o),a},bindUI:function(i,e,n,o,a,l){var r=i;n.data("binded-ax5ui","ax5picker"),n.ax5picker($.extend(!0,{direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&t.body.inlineEdit.deActive.call(r,"RETURN",e)}},o.config)),n.focus().select()}},a={useReturnToSave:!1,editMode:"popup",getHtml:function(t,i,e,n){var o=[];return o.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),o.push("</div>"),o.join("")},init:function(t,i,e,n,o){var a;return n.append(a=jQuery(this.getHtml(t,i,e,o))),this.bindUI(t,i,a,e,n,o),a},bindUI:function(i,e,n,o,a,l){var r={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,r,o.config),r.options.forEach(function(t){t[r.columnKeys.optionValue]==l&&(t[r.columnKeys.optionSelected]=!0)});var s=i;n.data("binded-ax5ui","ax5select"),n.ax5select($.extend(!0,{tabIndex:1,direction:"auto",columnKeys:r.columnKeys,options:r.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?t.body.inlineEdit.deActive.call(s,"RETURN",e,this.value[0][r.columnKeys.optionValue]):"close"==this.state&&t.body.inlineEdit.deActive.call(s,"ESC",e)}},o.config)),n.ax5select("open"),n.ax5select("setValue",l),n.find("a").focus()}},l={editMode:"inline",getHtml:function(t,i,e){var n,o=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=i.config&&i.config.trueValue?e==i.config.trueValue?"true":"false":0==e||"false"==e||e<"1"?"false":"true";var a={marginTop:2,height:o-4};return jQuery.extend(!0,a,i.config),a.marginTop=(o-a.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+n+'" style="height:'+a.height+"px;width:"+a.height+"px;margin-top:"+a.marginTop+'px;"></div>'}},r={useReturnToSave:!1,editMode:"popup",_getHtml:function(t,i,e,n){return'<div data-ax5grid-editor="textarea"></div>'},_bindUI:function(i,e,n,o,a,l){var r=n.offset(),s={width:n.width()},d=150,c=30,h=jQuery('<div data-ax5grid-popup="textarea" style="z-index: 9999;">\n    <textarea style="width:100%;height:'+(d-c)+'px;" class="form-control">'+l+'</textarea>\n    <div style="height:'+c+'px;padding:5px;text-align: right;">\n        <button class="btn btn-default">OK</button>\n    </div>\n</div>'),u=h.find("textarea");h.css({position:"absolute",left:r.left,top:r.top,width:s.width,height:d}),h.find("textarea"),jQuery(document.body).append(h),u.focus().select(),u.on("blur",function(n){t.body.inlineEdit.deActive.call(i,"RETURN",e,this.value),h.remove(),ax5.util.stopEvent(n.originalEvent)}),u.on("keydown",function(n){n.which==ax5.info.eventKeys.ESC&&(t.body.inlineEdit.deActive.call(i,"ESC",e),h.remove(),ax5.util.stopEvent(n.originalEvent))})},init:function(t,i,e,n,o){var a=void 0;return n.append(a=jQuery(this._getHtml(t,i,e,o))),this._bindUI(t,i,a,e,n,o),a}};t.inlineEditor={text:i,money:e,number:n,date:o,select:a,checkbox:l,textarea:r}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(t){var i=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},e={first:function(){i.call(this,0)},prev:function(){var t=this.page.currentPage-1;t<0&&(t=0),i.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),i.call(this,t)},last:function(){i.call(this,this.page.totalPages-1)}};t in e?e[t].call(this):i.call(this,t-1)},n=function(){var i=this;if(this.page){var n={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},o=this.config.page.navigationItemCount;n["@paging"]=function(){var t=[],i=void 0,e=void 0;i=n.currentPage-Math.floor(o/2),i<0&&(i=0),e=n.currentPage+o,e>n.totalPages&&(e=n.totalPages),e-i>o&&(e=i+o),e-i<o&&(i=e-o),i<0&&(i=0);for(var a=i,l=e;a<l;a++)t.push({pageNo:a+1,selected:n.currentPage==a});return t}(),n["@paging"].length>0&&(n.hasPage=!0),this.$.page.navigation.html(t.tmpl.get("page_navigation",n)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){e.call(i,this.getAttribute("data-ax5grid-page-move"))})}else this.$.page.navigation.empty()},o=function(){if(this.config.page.statusDisplay){var e=void 0,n=Math.min(this.xvar.dataRowCount,this.xvar.virtualPaintRowCount),o={};e=this.xvar.virtualPaintStartRowIndex+n,e>this.xvar.dataRowCount&&(e=this.xvar.dataRowCount),o.fromRowIndex=i.number(this.xvar.virtualPaintStartRowIndex+1,{money:!0}),o.toRowIndex=i.number(e,{money:!0}),o.totalElements=!1,o.dataRealRowCount=this.xvar.dataRowCount!==this.xvar.dataRealRowCount&&i.number(this.xvar.dataRealRowCount,{money:!0}),o.dataRowCount=i.number(this.xvar.dataRowCount,{money:!0}),o.progress=this.appendProgress?this.config.appendProgressIcon:"",this.page&&(o.fromRowIndex_page=i.number(this.xvar.virtualPaintStartRowIndex+this.page.currentPage*this.page.pageSize+1,{money:!0}),o.toRowIndex_page=i.number(this.xvar.virtualPaintStartRowIndex+n+this.page.currentPage*this.page.pageSize,{money:!0}),o.totalElements=i.number(this.page.totalElements,{money:!0}),o.toRowIndex_page>this.page.totalElements&&(o.toRowIndex_page=this.page.totalElements)),this.$.page.status.html(t.tmpl.get("page_status",o))}};t.page={navigationUpdate:n,statusUpdate:o}}(),function(){var t=ax5.ui.grid,i=ax5.util,e={vertical:function(t,i){var e=i._content_height-i._panel_height,n=i._vertical_scroller_height-i.verticalScrollBarHeight,o=e*t.top/n;return o<0?o=0:e<o&&(o=e),{top:-o}},horizontal:function(t,i){var e=i._content_width-i._panel_width,n=i._horizontal_scroller_width-i.horizontalScrollBarWidth,o=e*t.left/n;return o<0?o=0:e<o&&(o=e),{left:-o}}},n={vertical:function(i,n){var o=this,a="vertical",l=n._content_height-n._panel_height,r=n._vertical_scroller_height-n.verticalScrollBarHeight,s=r*i/l,d=void 0;return-s>r&&(s=-r,d=e[a].call(this,{top:-s},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.body.scrollTo.call(o,d)),-s},horizontal:function(i,n){var o=this,a="horizontal",l=n._content_width-n._panel_width,r=n._horizontal_scroller_width-n.horizontalScrollBarWidth,s=r*i/l,d=void 0;return-s>r&&(s=-r,d=e[a].call(this,{left:-s},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.header.scrollTo.call(o,d),t.body.scrollTo.call(o,d)),-s}},o={click:function(i,n,o,a){if((new Date).getTime()-t.scroller.moveout_timer<20)return!1;var l=this,r=i.offset(),s={width:n.outerWidth(),height:n.outerHeight()},d={width:i.innerWidth(),height:i.innerHeight()},c=l.$.scroller.vertical.innerHeight(),h=l.$.panel.body.height(),u=l.$.scroller.horizontal.innerWidth(),g=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,x=l.xvar.scrollContentWidth,p=l.$.scroller["vertical-bar"].outerHeight(),v=l.$.scroller["horizontal-bar"].outerWidth(),m={vertical:function(i){var e=t.util.getMousePosition(i),n=e.clientY-r.top;return n<0?n=0:n+s.height>d.height&&(n=d.height-s.height),{top:n}},horizontal:function(i){var e=t.util.getMousePosition(i),n=e.clientX-r.left;return n<0?n=0:n+s.width>d.width&&(n=d.width-s.width),{left:n}}},y=m[o](a);n.css(y);var b=e[o].call(l,y,{_content_width:x,_content_height:f,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:v});"horizontal"===o&&t.header.scrollTo.call(l,b),t.body.scrollTo.call(l,b),b=null},on:function(i,n,a,l){var r=this,s=n.position(),d={width:n.outerWidth(),height:n.outerHeight()},c={width:i.innerWidth(),height:i.innerHeight()},h=r.$.scroller.vertical.innerHeight(),u=r.$.panel.body.height(),g=r.$.scroller.horizontal.innerWidth(),f=r.$.panel.body.width(),x=r.xvar.scrollContentHeight,p=r.xvar.scrollContentWidth,v=r.$.scroller["vertical-bar"].outerHeight(),m=r.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(i){var e=t.util.getMousePosition(i);r.xvar.__da=e.clientY-r.xvar.mousePosition.clientY;var n=s.top+r.xvar.__da;return n<0?n=0:n+d.height>c.height&&(n=c.height-d.height),{top:n}},horizontal:function(i){var e=t.util.getMousePosition(i);r.xvar.__da=e.clientX-r.xvar.mousePosition.clientX;var n=s.left+r.xvar.__da;return n<0?n=0:n+d.width>c.width&&(n=c.width-d.width),{left:n}}};r.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(i){var o=y[a](i);n.css(o);var l=e[a].call(r,o,{_content_width:p,_content_height:x,_panel_width:f,_panel_height:u,_horizontal_scroller_width:g,_vertical_scroller_height:h,verticalScrollBarHeight:v,horizontalScrollBarWidth:m});"horizontal"===a&&t.header.scrollTo.call(r,l),t.body.scrollTo.call(r,l)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){o.off.call(r,t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){o.off.call(r,t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(i){ax5.util.stopEvent(i.originalEvent),t.scroller.moveout_timer=(new Date).getTime(),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a={wheel:function(i){var e=this,n=e.$.panel["body-scroll"].position(),o=e.xvar.body_panel_height,a=e.xvar.body_panel_width,l=e.xvar.scrollContentHeight,s=e.xvar.scrollContentWidth;if(isNaN(l)||isNaN(s))return!1;var d=void 0,c=void 0,h=!1,u=!1;return d=n.left-i.x,c=n.top-i.y,c>=0?(c=0,h=!0):c<=o-l?(c=o-l,c>=0&&(c=0),h=!0):0==i.y&&(h=!0),d>=0?(d=0,u=!0):d<=a-s?(d=a-s,d>=0&&(d=0),u=!0):0==i.x&&(u=!0),t.header.scrollTo.call(e,{left:d}),t.body.scrollTo.call(e,{left:d,top:c},{callback:function(){r.call(e)}}),!h||!u},on:function(){var e=this,n=e.$.panel["body-scroll"].position(),o=e.xvar.body_panel_height,l=e.xvar.body_panel_width,s=e.xvar.scrollContentHeight,d=e.xvar.scrollContentWidth,c=function(i){var a=t.util.getMousePosition(i),r=void 0,c=void 0;return e.xvar.__x_da=a.clientX-e.xvar.mousePosition.clientX,e.xvar.__y_da=a.clientY-e.xvar.mousePosition.clientY,r=n.left+e.xvar.__x_da,c=n.top+e.xvar.__y_da,c>=0?c=0:c<=o-s&&(c=o-s,c>=0&&(c=0)),r>=0?r=0:r<=l-d&&(r=l-d,r>=0&&(r=0)),{left:r,top:c}};this.xvar.__x_da=0,this.xvar.__y_da=0,this.xvar.touchmoved=!1,jQuery(document.body).on("touchmove.ax5grid-"+this.instanceId,function(n){var o=c(n);r.call(e),t.header.scrollTo.call(e,{left:o.left}),t.body.scrollTo.call(e,o,{noRepaint:"noRepaint"}),i.stopEvent(n.originalEvent),e.xvar.touchmoved=!0}).on("touchend.ax5grid-"+this.instanceId,function(n){if(e.xvar.touchmoved){var o=c(n);r.call(e),t.header.scrollTo.call(e,{left:o.left}),t.body.scrollTo.call(e,o),i.stopEvent(n.originalEvent),a.off.call(e)}}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).off("touchmove.ax5grid-"+this.instanceId).off("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l=function(){var e=this,n=this.config.scroller.trackPadding;0==n?(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size,left:-1}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size,top:-1})):(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(n+1),left:n/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(n+1),top:n/2})),this.$.scroller["vertical-bar"].on(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),o.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",i)}.bind(this)).on("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.vertical.on("click",function(t){"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].on(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),o.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",i)}.bind(this)).on("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.horizontal.on("click",function(t){"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.on("mousewheel DOMMouseScroll",function(t){var e=t.originalEvent,n={x:0,y:0};e.detail?n.y=10*e.detail:"undefined"==typeof e.deltaY?(n.y=-e.wheelDelta,n.x=0):(n.y=e.deltaY,n.x=e.deltaX),a.wheel.call(this,n)&&i.stopEvent(t)}.bind(this)),ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(i){e.xvar.mousePosition=t.util.getMousePosition(i),a.on.call(e)}),this.xvar.body_panel_height=this.$.panel.body.height(),this.xvar.body_panel_width=this.$.panel.body.width()},r=function(){var t=this.$.scroller.vertical.height(),i=this.$.scroller.horizontal.width(),e=this.$.panel.body.height(),o=this.$.panel.body.width(),a=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,r=e*t/a,s=o*i/l;r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:n.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:l,_content_height:a,_panel_width:o,_panel_height:e,_horizontal_scroller_width:i,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),height:r}),this.$.scroller["horizontal-bar"].css({left:n.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:l,_content_height:a,_panel_width:o,_panel_height:e,_horizontal_scroller_width:i,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),width:s}),this.xvar.body_panel_height=e,this.xvar.body_panel_width=o,t=null,i=null,e=null,o=null,a=null,l=null,r=null,s=null};t.scroller={moveout_timer:(new Date).getTime(),init:l,resize:r}}(),function(){var t=ax5.ui.grid,i=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},e=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button type="button" data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button type="button" data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button type="button" data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button type="button" data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button type="button" data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},n=function(){return"<span>{{{progress}}} {{fromRowIndex}} - {{toRowIndex}} of {{dataRowCount}} {{#totalElements}}&nbsp; Total {{.}}{{/totalElements}}</span>"};t.tmpl={main:i,page_navigation:e,page_status:n,get:function(i,e,n){var o=t.tmpl[i].call(this,n);return ax5.mustache.parse(o),ax5.mustache.render(o,e)}}}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(t,i){for(var e={rows:[]},n={rows:[]},o=0,a=t.rows.length;o<a;o++){var l=t.rows[o];e.rows[o]={cols:[]},n.rows[o]={cols:[]};for(var r=0,s=l.cols.length;r<s;r++){var d=jQuery.extend({},l.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;if(c<i)if(h<=i)e.rows[o].cols.push(d);else{var u=jQuery.extend({},d),g=jQuery.extend({},u);u.colspan=i-u.colIndex,g.colIndex=i,g.colspan=d.colspan-u.colspan,e.rows[o].cols.push(u),g.colspan&&n.rows[o].cols.push(g)}else n.rows[o].cols.push(d);d=null,c=null,h=null}l=null}return{leftData:e,rightData:n}}),e=function(t,i,e){for(var n={rows:[]},o=0,a=t.rows.length;o<a;o++){var l=t.rows[o];n.rows[o]={cols:[]};for(var r=0,s=l.cols.length;r<s;r++){var d=jQuery.extend({},l.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;(i<=c||h<=e)&&(i<=c&&h<=e?n.rows[o].cols.push(d):i>c&&h>i?(d.colspan=h-i,n.rows[o].cols.push(d)):h>e&&c<=e&&n.rows[o].cols.push(d))}}return n},n=function(t){var i=void 0,e=t.originalEvent?t.originalEvent:t;return i="changedTouches"in e&&e.changedTouches?e.changedTouches[0]:e,{clientX:i.pageX,clientY:i.pageY}},o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var i=t,e=this.config,n={rows:[]},o=0,a=function c(t,i,a){for(var l={cols:[]},r=0,s=t.length,d=1;r<s;r++){var h=jQuery.extend({},t[r]);d=1,h.hidden||(h.colspan=1,h.rowspan=1,h.rowIndex=i,h.colIndex=function(){return a?(o=a.colIndex+r+1,a.colIndex+r):o++}(),l.cols.push(h),"columns"in h?d=c(h.columns,i+1,h):h.width="width"in h?h.width:e.columnMinWidth,h.colspan=d)}return l.cols.length>0?(n.rows[i]||(n.rows[i]={cols:[]}),n.rows[i].cols=n.rows[i].cols.concat(l.cols),l.cols.length-1+d):d};a(i,0);for(var l=0,r=n.rows.length;l<r;l++)for(var s=0,d=n.rows[l].cols.length;s<d;s++)"columns"in n.rows[l].cols[s]||(n.rows[l].cols[s].rowspan=r-l);return n},l=function(t){var i=t,e={rows:[]},n=0,o=function a(t,i,o){for(var l={cols:[]},r=0,s=t.length,d=1,c=(function u(t){for(var e=0,r=t.length;e<r;e++){var s=jQuery.extend({},t[e]),d=1;s.hidden||("key"in s?(s.colspan=1,s.rowspan=1,s.rowIndex=i,s.colIndex=function(){return o?(n=o.colIndex+e+1,o.colIndex+e):n++}(),l.cols.push(s),"columns"in s&&(d=a(s.columns,i+1,s)),s.colspan=d):"columns"in s&&u(s.columns,i))}});r<s;r++){var h=jQuery.extend({},t[r]);d=1,h.hidden||("key"in h?(h.colspan=1,h.rowspan=1,h.rowIndex=i,h.colIndex=function(){return o?(n=o.colIndex+r+1,o.colIndex+r):n++}(),l.cols.push(h),"columns"in h&&(d=a(h.columns,i+1,h)),h.colspan=d):"columns"in h&&c(h.columns,i)),h=null}return l.cols.length>0?(e.rows[i]||(e.rows[i]={cols:[]}),e.rows[i].cols=e.rows[i].cols.concat(l.cols),l.cols.length-1+d):d};return o(i,0),function(t){for(var i=0,e=t.rows.length;i<e;i++){for(var n=t.rows[i],o=0,a=n.cols.length;o<a;o++){var l=n.cols[o];"columns"in l||(l.rowspan=e-i),l=null}n=null}}(e),e},r=function(t){var i={};return t.rows.forEach(function(t){t.cols.forEach(function(t){i[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),i},s=function(t){for(var i={rows:[]},e=0,n=t.length;e<n;e++){var o=t[e],a=0;i.rows[e]={cols:[]};for(var l=0,r=o.length;l<r&&!(a>this.colGroup.length);l++){var s=o[l].colspan||1;o[l].label||o[l].key?i.rows[e].cols.push({colspan:s,rowspan:1,colIndex:a,columnAttr:"sum",align:o[l].align,label:o[l].label,key:o[l].key,collector:o[l].collector,formatter:o[l].formatter}):i.rows[e].cols.push({colIndex:a,colspan:s,rowspan:1,label:"&nbsp;"}),a+=s,s=null}if(a<this.colGroup.length)for(var d=a;d<this.colGroup.length;d++)i.rows[e].cols.push({colIndex:d,colspan:1,rowspan:1,label:"&nbsp;"});o=null,a=null}return i},d=function(t){var i={rows:[]},e=0,n=0;i.rows[e]={cols:[]};for(var o=0,a=t.length;o<a&&!(n>this.colGroup.length);o++){var l=t[o].colspan||1;t[o].label||t[o].key?i.rows[e].cols.push({colspan:l,rowspan:1,rowIndex:0,colIndex:n,columnAttr:"default",align:t[o].align,label:t[o].label,key:t[o].key,collector:t[o].collector,formatter:t[o].formatter}):i.rows[e].cols.push({rowIndex:0,colIndex:n,colspan:l,rowspan:1,label:"&nbsp;"}),n+=l}if(n<this.colGroup.length)for(var r=n;r<this.colGroup.length;r++)i.rows[e].cols.push({rowIndex:0,colIndex:r,colspan:1,rowspan:1,label:"&nbsp;"});return i},c=function(t,i,e){var n=void 0,o=!1,a=[];return this.xvar.frozenRowIndex>t&&a.push("top"),this.xvar.frozenColumnIndex>i&&a.push("left"),a.push("body"),(this.xvar.frozenColumnIndex<=i||this.xvar.frozenRowIndex<=t)&&(n=a.join("-"),a.push("scroll"),o=!0),{panelName:a.join("-"),containerPanelName:n,isScrollPanel:o}},h=function(t){var i=[],e=[].concat(t.split(/[\.\[\]]/g));return e.forEach(function(t){""!==t&&i.push('["'+t.replace(/['\"]/g,"")+'"]')}),e=null,i.join("")};t.util={divideTableByFrozenColumnIndex:i,getTableByStartEndColumnIndex:e,getMousePosition:n,ENM:o,makeHeaderTable:a,makeBodyRowTable:l,makeBodyRowMap:r,makeFootSumTable:s,makeBodyGroupingTable:d,findPanelByColumnIndex:c,getRealPathForDataItem:h}}();
//# sourceMappingURL=ax5grid.min.js.map
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t=ax5.ui,i=ax5.util,e=void 0;t.addClass({className:"grid"},function(){return function(){var n=this,o=void 0,a={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,debounceTime:250,appendDebouncer:null,appendDebounceTimes:0,appendProgressIcon:"...",appendProgress:!1,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!0,virtualScrollY:!0,virtualScrollX:!0,headerSelect:!0,virtualScrollYCountMargin:0,virtualScrollAccelerated:!0,virtualScrollAcceleratedDelayTime:10,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,remoteSort:!1,header:{display:!0,align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,selector:!0},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1,mergeCells:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,statusDisplay:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__",disableSelection:"__disable_selection__"},tree:{use:!1,hashDigit:8,indentWidth:10,arrowWidth:15,iconWidth:18,icons:{openedArrow:"▾",collapsedArrow:"▸",groupIcon:"⊚",collapsedGroupIcon:"⊚",itemIcon:"⊙"},columnKeys:{parentKey:"pid",selfKey:"id",collapse:"collapse",hidden:"hidden",parentHash:"__hp__",selfHash:"__hs__",children:"__children__",depth:"__depth__"}}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0,scrollTimer:null},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.proxyList=null,this.page=null,this.selectedDataIndexs=[],this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.listIndexMap={},this.contextMenu=null,this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.bodyGroupingMap={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,o=this.config;var l=function(){var t={instanceId:this.id};return this.$target.html(e.tmpl.get("main",t)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height||this.config._height}),this},r=function(t){i.isArray(t)||(t=[]),this.columns=i.deepCopy(t),this.headerTable=e.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=o.frozenColumnIndex||0,this.bodyRowTable=e.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=e.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var n={},a=0,l=this.headerTable.rows.length;a<l;a++)for(var r=this.headerTable.rows[a],s=0,d=r.cols.length;s<d;s++)n[r.cols[s].colIndex]=jQuery.extend({},r.cols[s]);this.colGroup=[];for(var c in n)this.colGroup.push(n[c]);return this},s=function(){r.call(this,this.config.columns),d.call(this),this.config.footSum&&(c.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&h.call(this,this.config.body.grouping),u.call(this,!0),e.header.repaint.call(this,!0),e.body.repaint.call(this,!0),e.scroller.resize.call(this)},d=function(){var t=this.$.container.root.width()-function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t+=o.scroller.size}(),e=0,n=void 0,a=[],l=this.colGroup,r=void 0,s=void 0;for(r=0,s=l.length;r<s;r++)i.isNumber(l[r].width)?e+=l[r]._width=l[r].width:"*"===l[r].width?a.push(r):"%"===i.right(l[r].width,1)&&(e+=l[r]._width=t*i.left(l[r].width,"%")/100);if(a.length>0)for(n=(t-e)/a.length,r=0,s=a.length;r<s;r++)l[a[r]]._width=n},c=function(t){i.isArray(t)?this.footSumTable=e.util.makeFootSumTable.call(this,this.footSumColumns=t):(this.footSumColumns=[],this.footSumTable={})},h=function(t){var i=jQuery.extend({},t);"by"in i&&"columns"in i?(this.bodyGrouping={by:i.by,columns:i.columns},this.bodyGroupingTable=e.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},i=0,e=this.bodyGrouping.by.length;i<e;i++){t[this.bodyGrouping.by[i]]={orderBy:"asc",seq:i,fixed:!0};for(var n=0,o=this.colGroup.length;n<o;n++)this.colGroup[n].key===this.bodyGrouping.by[i]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):o.body.grouping=!1},u=function(t){var i=this.proxyList?this.proxyList:this.list;if(Math.min(this.$target.innerWidth(),this.$target.innerHeight())<5)return!1;this.config.height||this.$.container.root.css({height:this.config._height=this.$target.height()});var e=this.$.container.root.width(),n=this.$.container.root.height(),a=e,l=n,r=o.asidePanelWidth=function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t}(),s=o.frozenPanelWidth=function(t,i){for(var e=0,n=0,o=i;n<o;n++)e+=t[n]._width;return e}(this.colGroup,o.frozenColumnIndex),d=void 0,c=void 0,h=void 0,u=0,g=function(t){return o.frozenRowIndex*t}(this.xvar.bodyTrHeight),f=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),x=o.header.display?this.headerTable.rows.length*o.header.columnHeight:0,p=o.page.display?o.page.height:0;(function(){d=n-x-p-f<i.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,c=function(){for(var t=0,i=e-r-d,n=0,o=this.colGroup.length;n<o;n++)t+=this.colGroup[n]._width;return t>i?this.config.scroller.size:0}.call(this),c>0&&(d=n-x-p-f-c<i.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),a=e-d,l=n-p-c,h=l-x;var v=function(t,i,e,n){var l={},d=!1;switch(e){case"aside":0===r?d=!0:(l.left=0,l.width=r);break;case"left":0===o.frozenColumnIndex?d=!0:(l.left=r,l.width=s);break;case"right":o.rightSum||(d=!0);break;default:"page"!==n&&(0===o.frozenColumnIndex?l.left=r:l.left=s+r,l.width=a-r-s-u)}if(d)return t.hide(),this;if("body"===n)switch(i){case"top":0==o.frozenRowIndex?d=!0:(l.top=0,l.height=g);break;case"bottom":o.footSum?(l.top=h-f,l.height=f):d=!0;break;default:l.top=g,l.height=h-g-f}else"header"===n?l.height=x:"page"===n&&(0==p?d=!0:l.height=p);return d?(t.hide(),this):(t.show().css(l),this)},m=function(t,i,e,n){var o={},r=!1;switch(n){case"vertical":i>0?(o.width=i,o.height=l,o.bottom=e+p):r=!0;break;case"horizontal":e>0?(o.width=a,o.height=e,o.right=i,o.bottom=p):r=!0;break;case"corner":i>0&&e>0?(o.width=i,o.height=e,o.bottom=p):r=!0}return r?(t.hide(),this):void t.show().css(o)};return this.$.container.header.css({height:x}),this.$.container.body.css({height:h}),v.call(this,this.$.panel["aside-header"],"","aside","header"),v.call(this,this.$.panel["left-header"],"","left","header"),v.call(this,this.$.panel.header,"","","header"),v.call(this,this.$.panel["right-header"],"","right","header"),v.call(this,this.$.panel["top-aside-body"],"top","aside","body"),v.call(this,this.$.panel["top-left-body"],"top","left","body"),v.call(this,this.$.panel["top-body"],"top","","body"),v.call(this,this.$.panel["top-right-body"],"top","right","body"),v.call(this,this.$.panel["aside-body"],"","aside","body"),v.call(this,this.$.panel["left-body"],"","left","body"),v.call(this,this.$.panel.body,"","","body"),v.call(this,this.$.panel["right-body"],"","right","body"),v.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),v.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),v.call(this,this.$.panel["bottom-body"],"bottom","","body"),v.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),m.call(this,this.$.scroller.vertical,d,c,"vertical"),m.call(this,this.$.scroller.horizontal,d,c,"horizontal"),m.call(this,this.$.scroller.corner,d,c,"corner"),v.call(this,this.$.container.page,"","","page"),this.xvar.bodyHeight=this.$.panel.body.height(),this.xvar.bodyWidth=this.$.panel.body.width(),!0},g=function(t){if(e.header.repaint.call(this),i.isFunction(this.config.remoteSort)){var n={sortInfo:[]};for(var o in t)n.sortInfo.push({key:o,orderBy:t[o].orderBy,seq:t[o].seq});n.sortInfo.sort(function(t,i){return t.seq>i.seq}),this.config.remoteSort.call(n,n)}else this.config.body.grouping?this.list=e.data.initData.call(this,e.data.sort.call(this,t,e.data.clearGroupingData.call(this,this.list))):this.list=e.data.sort.call(this,t,e.data.clearGroupingData.call(this,this.list),{resetLineNumber:!0}),e.body.repaint.call(this,!0),e.scroller.resize.call(this)};this.init=function(t){if(o=jQuery.extend(!0,{},o,t),!o.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.onStateChanged=o.onStateChanged,this.onClick=o.onClick,this.onLoad=o.onLoad,this.onDataChanged=o.body.onDataChanged,this.$target=jQuery(o.target),function(t){i.isObject(t)&&!t.error&&(o=jQuery.extend(!0,o,t))}.call(this,i.parseJson(this.$target.attr("data-ax5grid-config"),!0));var s=this.config=o;return this.config.height||(this.config._height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+this.instanceId,this.$target.data("data-ax5grid-id",s.id)),e.data.init.call(this),this.config.tree.use&&(this.sortInfo={},this.sortInfo[this.config.tree.columnKeys.selfHash]={orderBy:"asc",seq:0,fixed:!0}),l.call(this),r.call(this,s.columns),d.call(this),s.footSum&&c.call(this,s.footSum),s.body.grouping&&h.call(this,s.body.grouping),u.call(this,!0),e.header.init.call(this),e.header.repaint.call(this),e.body.init.call(this),e.body.repaint.call(this),e.scroller.init.call(this),e.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.id,function(){u.call(n),e.scroller.resize.call(n),e.body.repaint.call(n)}),jQuery(document.body).on("click.ax5grid-"+this.id,function(t){var o=!1,a=i.findParentNode(t.target,function(t){return!!(o=t.getAttribute("data-ax5grid-inline-edit-picker"))||"root"===t.getAttribute("data-ax5grid-container")});a&&a.getAttribute("data-ax5grid-instance")===this.id?n.focused=!0:(n.focused=!1,e.body.blur.call(this))}.bind(this)),jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing?t.which==ax5.info.eventKeys.ESC?n.keyDown("ESC",t.originalEvent):t.which==ax5.info.eventKeys.RETURN?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?(n.keyDown("TAB",t.originalEvent),i.stopEvent(t)):t.which==ax5.info.eventKeys.UP?n.keyDown("RETURN",{shiftKey:!0}):t.which==ax5.info.eventKeys.DOWN&&n.keyDown("RETURN",{}):t.metaKey||t.ctrlKey?67==t.which&&n.copySelect():a[t.which]?(n.keyDown(a[t.which],t.originalEvent),i.stopEvent(t)):t.which==ax5.info.eventKeys.ESC?n.focused&&e.body.blur.call(n):t.which==ax5.info.eventKeys.RETURN||t.which==ax5.info.eventKeys.SPACE?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?i.stopEvent(t):Object.keys(n.focusedColumn).length)}),jQuery(window).on("keyup.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing||t.metaKey||t.ctrlKey||a[t.which]||t.which==ax5.info.eventKeys.ESC||t.which==ax5.info.eventKeys.RETURN||t.which==ax5.info.eventKeys.SPACE||t.which==ax5.info.eventKeys.TAB||Object.keys(n.focusedColumn).length&&n.keyDown("INLINE_EDIT",t.originalEvent))}),setTimeout(function(){this.onLoad&&this.onLoad.call({self:this})}.bind(this)),this},this.align=function(){return u.call(this)&&(e.body.repaint.call(this),e.scroller.resize.call(this)),this},this.repaint=function(){return e.header.repaint.call(this),e.body.repaint.call(this,!0),e.scroller.resize.call(this),this},this.keyDown=function(){var t={KEY_UP:function(){e.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){e.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){e.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){e.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){e.body.moveFocus.call(this,"HOME")},KEY_END:function(){e.body.moveFocus.call(this,"END")},INLINE_EDIT:function(t){e.body.inlineEdit.active.call(this,this.focusedColumn,t),/[0-9a-zA-Z]/.test(t.key)||i.stopEvent(t)},ESC:function(t){e.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(t){var n=0;for(var o in this.inlineEditing){if(n++,!e.body.inlineEdit.keydown.call(this,"RETURN",o))return!1;1==n&&e.body.moveFocus.call(this,t.shiftKey?"UP":"DOWN")&&e.body.inlineEdit.keydown.call(this,"RETURN")}0==n&&(e.body.inlineEdit.keydown.call(this,"RETURN"),i.stopEvent(t))},TAB:function(t){var i=0;for(var n in this.inlineEditing)i++,e.body.inlineEdit.keydown.call(this,"RETURN",n,{moveFocus:!0}),1==i&&e.body.moveFocus.call(this,t.shiftKey?"LEFT":"RIGHT")&&e.body.inlineEdit.keydown.call(this,"RETURN",void 0,{moveFocus:!0})}};return function(i,e){return i in t&&t[i].call(this,e),this}}(),this.copySelect=function(){var t=void 0,i=this.$.form.clipboard,e=[],n="",o=void 0,a=void 0,l=void 0,r=0;for(var s in this.selectedColumn){var d=this.selectedColumn[s];if(d){"undefined"==typeof l&&(l=d.dindex,o=d.rowIndex,a=d.rowIndex),l==d.dindex&&o==d.rowIndex||r++,e[r]||(e[r]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?this.list[d.dindex].__isGrouping?e[r].push(this.list[d.dindex][d.colIndex]):e[r].push(this.list[d.dindex][c.key]):e[r].push(""),l=d.dindex,o=d.rowIndex}}e.forEach(function(t){n+=t.join("\t")+"\n"}),i.get(0).innerText=n,i.select();try{t=document.execCommand("copy")}catch(h){t=!1}return t},this.setData=function(t){var i="undefined"==typeof this.xvar.paintStartRowIndex;return e.data.set.call(this,t),e.body.repaint.call(this),i||e.body.scrollTo.call(this,{top:0}),u.call(this),e.scroller.resize.call(this),e.page.navigationUpdate.call(this),i=null,this},this.getList=function(t){return e.data.getList.call(this,t)},this.setHeight=function(t){return"100%"==t&&(t=this.$target.offsetParent().innerHeight()),this.$target.css({height:t}),this.$.container.root.css({height:t}),u.call(this),e.body.repaint.call(this,"reset"),e.scroller.resize.call(this),this},this.addRow=function(t,i,n){var o=this;return e.data.add.call(this,t,i,n),u.call(this),e.body.repaint.call(this,"reset"),n&&n.focus?setTimeout(function(){e.body.moveFocus.call(o,n.focus)},1):e.scroller.resize.call(this),this},this.appendToList=function(t){return e.data.append.call(this,t,function(){u.call(this),e.body.repaint.call(this),e.scroller.resize.call(this)}.bind(this)),this},this.removeRow=function(t){return e.data.remove.call(this,t),u.call(this),e.body.repaint.call(this,"reset"),e.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),e.scroller.resize.call(this),this},this.updateRow=function(t,i){return e.data.update.call(this,t,i),e.body.repaintRow.call(this,i),this},this.updateChildRows=function(t,i,n){return e.data.updateChild.call(this,t,i,n),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0,e.body.repaint.call(this),this},this.deleteRow=function(t){return e.data.deleteRow.call(this,t),u.call(this),e.body.repaint.call(this,"reset"),e.scroller.resize.call(this),this},this.setValue=function(t,i,n){var o=void 0;if(e.data.setValue.call(this,t,o,i,n)){var a=function(t,i,n,o,a,l){for(var r=0,s=i.length;r<s;r++)for(var d=0,c=i[r].cols.length;d<c;d++)i[r].cols[d].key==a&&(this.xvar.frozenRowIndex>n?e.body.repaintCell.call(this,"top-"+t,n,o,r,d,l):e.body.repaintCell.call(this,t+"-scroll",n,o,r,d,l))};a.call(this,"left-body",this.leftBodyRowData.rows,t,o,i,n),a.call(this,"body",this.bodyRowData.rows,t,o,i,n)}return this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(e,n){if("undefined"==typeof e)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,e);else{if(!i.isNumber(n))throw"invalid argument _cindex";if(i.isArray(e))for(var o=0,a=e.length;o<a;o++)this.config.columns.splice(n+o,0,e[o]);else this.config.columns.splice(n,0,e)}return s.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(e){if("undefined"==typeof e&&(e="last"),e in t)t[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _cindex";this.config.columns.splice(e,1)}return s.call(this),this}}(),this.updateColumn=function(t,e){if(!i.isNumber(e))throw"invalid argument _cindex";return this.config.columns.splice(e,1,t),s.call(this),this},this.setColumnWidth=function(t,i){return this.colGroup[this.xvar.columnResizerIndex]._width=t,this.needToPaintSum=!0,e.header.repaint.call(this),e.body.repaint.call(this,!0),e.scroller.resize.call(this),u.call(this),this},this.getColumnSortInfo=function(){var t={sortInfo:[]};for(var i in this.sortInfo)t.sortInfo.push({key:i,orderBy:this.sortInfo[i].orderBy,seq:this.sortInfo[i].seq});return t.sortInfo.sort(function(t,i){return t.seq>i.seq}),t.sortInfo},this.setColumnSort=function(t){return"undefined"!=typeof t&&(this.sortInfo=t,e.header.applySortStatus.call(this,t)),g.call(this,t||this.sortInfo),this},this.select=function(t,n){if(i.isNumber(t)){var o=t;this.config.multipleSelect?n&&n.selectedClear&&this.clearSelect():this.clearSelect(),e.data.select.call(this,o,void 0,n&&n.selected),e.body.updateRowState.call(this,["selected"],o,void 0)}return this},this.clickBody=function(t){return e.body.click.call(this,t),this},this.DBLClickBody=function(t){return e.body.dblClick.call(this,t),this},this.clearSelect=function(){return e.body.updateRowState.call(this,["selectedClear"]),e.data.clearSelect.call(this),this},this.selectAll=function(t){return e.data.selectAll.call(this,t&&t.selected,t),e.body.updateRowStateAll.call(this,["selected"]),this},this.exportExcel=function(t){var i=[];return i.push('<table border="1">'),i.push(e.header.getExcelString.call(this)),i.push(e.body.getExcelString.call(this)),i.push("</table>"),"undefined"==typeof t?i.join(""):(e.excel["export"].call(this,[i.join("")],t),this)},this.focus=function(t){if(e.body.moveFocus.call(this,t)){var i=void 0;for(var n in this.focusedColumn){i=jQuery.extend({},this.focusedColumn[n],!0);break}i&&this.select(i.dindex,{selectedClear:!0})}else if("undefined"==typeof this.selectedDataIndexs[0])this.select(0);else{var o=this.selectedDataIndexs[0],a={UP:function(){o>0&&(this.select(o-1,{selectedClear:!0}),e.body.moveFocus.call(this,o-1))},DOWN:function(){o<this.list.length-1&&(this.select(o+1,{selectedClear:!0}),e.body.moveFocus.call(this,o+1))},HOME:function(){this.select(0,{selectedClear:!0}),e.body.moveFocus.call(this,0)},END:function(){this.select(this.list.length-1,{selectedClear:!0}),e.body.moveFocus.call(this,this.list.length-1)}};t in a&&a[t].call(this)}return this},this.destroy=function(){var i=this.instanceId;return this.$target.empty(),this.list=[],t.grid_instance=ax5.util.filter(t.grid_instance,function(){return this.instanceId!=i}),null},this.main=function(){t.grid_instance=t.grid_instance||[],t.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),e=ax5.ui.grid}(),function(){var t=ax5.ui.grid,i=ax5.util,e={focusClear:function(){var t=this,i=void 0;for(var e in t.focusedColumn)i=t.focusedColumn[e],i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-focused");t.focusedColumn={}},clear:function(){var t=this,i=void 0;for(var e in t.selectedColumn)i=t.selectedColumn[e],i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-selected");t.selectedColumn={}},init:function(i){var n=this;if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==i.dindex+"_"+i.colIndex+"_"+i.rowIndex)return this;e.focusClear.call(n),n.focusedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]={panelName:i.panelName,dindex:i.dindex,doindex:i.doindex,rowIndex:i.rowIndex,colIndex:i.colIndex,colspan:i.colspan},e.clear.call(n),n.xvar.selectedRange={start:[i.dindex,i.rowIndex,i.colIndex,i.colspan-1],end:null},n.selectedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]=function(t){return!t&&{panelName:i.panelName,dindex:i.dindex,doindex:i.doindex,rowIndex:i.rowIndex,colIndex:i.colIndex,colspan:i.colspan}}(n.selectedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]),this.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&t.body.inlineEdit.deActive.call(this,"RETURN")},update:function(t){var i=this,n=void 0,o=void 0,a=void 0,l=void 0,r=void 0;i.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],e.clear.call(i);var s={r:{s:Math.min(i.xvar.selectedRange.start[0],i.xvar.selectedRange.end[0]),e:Math.max(i.xvar.selectedRange.start[0],i.xvar.selectedRange.end[0])},c:{s:Math.min(i.xvar.selectedRange.start[2],i.xvar.selectedRange.end[2]),e:Math.max(i.xvar.selectedRange.start[2]+i.xvar.selectedRange.start[3],i.xvar.selectedRange.end[2]+i.xvar.selectedRange.end[3])}};for(n=s.r.s;n<=s.r.e;n++)for(r=this.bodyRowTable.rows.length,l=0;l<r;l++)for(a=s.c.s;a<=s.c.e;a++){var d=[],c="";i.xvar.frozenRowIndex>n&&d.push("top"),i.xvar.frozenColumnIndex>a&&d.push("left"),d.push("body"),"top"!==d[0]&&d.push("scroll"),c=d.join("-"),i.selectedColumn[n+"_"+a+"_"+l]={panelName:c,dindex:n,rowIndex:l,colIndex:a,colspan:t.colspan},d=null,c=null}n=null,o=null,a=null,l=null;for(var h in i.selectedColumn){var u=i.selectedColumn[h];u&&i.$.panel[u.panelName].find('[data-ax5grid-tr-data-index="'+u.dindex+'"]').find('[data-ax5grid-column-rowindex="'+u.rowIndex+'"][data-ax5grid-column-colindex="'+u.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},n={on:function(t){var o=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(e.init.call(o,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&(e.update.call(o,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),doindex:Number(this.getAttribute("data-ax5grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),i.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){n.off.call(o)}).on("mouseleave.ax5grid-"+this.instanceId,function(){n.off.call(o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o=function(t,i,e,n){var o=this,a=this.config,l={selected:function(t,i){if(this.list[i])for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[i][a.columnKeys.selected])},selectedClear:function(){var t=this.list.length,i=void 0;if(this.proxyList){for(;t--;)this.list[t][a.columnKeys.selected]=!1;for(t=this.proxyList.length;t--;){if(this.list[e][a.columnKeys.selected])for(i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1);this.proxyList[t][a.columnKeys.selected]=!1;var e=this.proxyList[t].__original_index__}}else for(;t--;){if(this.list[t][a.columnKeys.selected])for(i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1);this.list[t][a.columnKeys.selected]=!1}},cellChecked:function(t,i,e){var n=(e.key,e.rowIndex),o=e.colIndex,a=function(){var i=[];return this.xvar.frozenRowIndex>t&&i.push("top"),this.xvar.frozenColumnIndex>o&&i.push("left"),i.push("body"),"top"!==i[0]&&i.push("scroll"),i.join("-")}.call(this);this.$.panel[a].find('[data-ax5grid-tr-data-index="'+t+'"]').find('[data-ax5grid-column-rowIndex="'+n+'"][data-ax5grid-column-colIndex="'+o+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+e.checked)}};"undefined"==typeof e&&(e=i),t.forEach(function(t){if(!l[t])throw"invaild state name";l[t].call(o,i,e,n)})},a=function(i,e){var n=this,o=(this.config,{selected:function(i){t.body.repaint.call(this,!0)}});i.forEach(function(t){if(!o[t])throw"invaild state name";o[t].call(n,e)})},l=function(){var e=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(i){var n=void 0,a=void 0,l=void 0,r=void 0,s=void 0,d=void 0,c=void 0,h=void 0,u={"default":function(n){var a=e.bodyRowMap[n.rowIndex+"_"+n.colIndex],l={self:e,page:e.page,list:e.list,item:e.list[n.doindex],dindex:n.dindex,doindex:n.doindex,rowIndex:n.rowIndex,colIndex:n.colIndex,column:a,value:e.list[n.dindex][a.key]};if(a.editor&&"checkbox"===a.editor.type){var r=t.data.getValue.call(e,n.dindex,n.doindex,a.key),s=void 0,d=void 0;d=a.editor.config&&a.editor.config.trueValue?(s=!(r==a.editor.config.trueValue))?a.editor.config.trueValue:a.editor.config.falseValue:s=0==r||"false"==r||r<"1"?"true":"false",t.data.setValue.call(e,n.dindex,n.doindex,a.key,d),o.call(e,["cellChecked"],n.dindex,n.doindex,{key:a.key,rowIndex:n.rowIndex,colIndex:n.colIndex,editorConfig:a.editor.config,checked:s})}e.config.body.onClick&&e.config.body.onClick.call(l,l,i)},rowSelector:function(i){var n=e.list[i.doindex];return!n[e.config.columnKeys.disableSelection]&&(e.config.multipleSelect||e.selectedDataIndexs[0]===i.doindex||(o.call(e,["selectedClear"]),t.data.clearSelect.call(e)),t.data.select.call(e,i.dindex,i.doindex,void 0,{internalCall:!0}),void o.call(e,["selected"],i.dindex,i.doindex))},lineNumber:function(t){},"tree-control":function(t,i){y.call(e,t.dindex,t.doindex)}};n=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),c=Number(this.getAttribute("data-ax5grid-column-rowIndex")),h=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),d=Number(this.getAttribute("data-ax5grid-data-o-index")),a in u&&u[a]({panelName:n,attr:a,row:l,col:r,dindex:s,doindex:d,rowIndex:c,colIndex:h},this)}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(n){var o=void 0,a=void 0,l=void 0,r=void 0,s=void 0,d=void 0,c=void 0,h=void 0,u={"default":function(o){if(e.isInlineEditing)for(var a in e.inlineEditing)if(a==o.dindex+"_"+o.colIndex+"_"+o.rowIndex)return this;var l=e.bodyRowMap[o.rowIndex+"_"+o.colIndex],r="";l&&(e.list[s].__isGrouping||(r=t.data.getValue.call(e,s,d,l.key)));var c=e.colGroup[o.colIndex].editor;if(i.isObject(c))t.body.inlineEdit.active.call(e,e.focusedColumn,n,r);else if(e.config.body.onDBLClick){var h={self:e,page:e.page,list:e.list,item:e.list[o.dindex],dindex:o.dindex,doindex:o.doindex,rowIndex:o.rowIndex,colIndex:o.colIndex,column:l,value:e.list[o.dindex][l.key]};e.config.body.onDBLClick.call(h)}},rowSelector:function(t){},lineNumber:function(t){}};o=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),c=Number(this.getAttribute("data-ax5grid-column-rowIndex")),h=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),d=Number(this.getAttribute("data-ax5grid-data-o-index")),a in u&&u[a]({panelName:o,attr:a,row:l,col:r,dindex:s,doindex:d,rowIndex:c,colIndex:h})}),this.config.contextMenu&&this.$.container.body.on("contextmenu",function(t){var n=void 0,o=void 0,a=void 0,l=void 0,r=void 0,s=void 0,d=void 0,c={};n=i.findParentNode(t.target,function(t){if(t.getAttribute("data-ax5grid-column-attr"))return!0}),n&&(l=Number(n.getAttribute("data-ax5grid-column-rowIndex")),r=Number(n.getAttribute("data-ax5grid-column-colIndex")),o=Number(n.getAttribute("data-ax5grid-data-index")),a=Number(n.getAttribute("data-ax5grid-data-o-index")),d=e.bodyRowMap[l+"_"+r],s=e.list[o]),e.contextMenu||(e.contextMenu=new ax5.ui.menu),e.contextMenu.setConfig(e.config.contextMenu),c={element:n,dindex:o,doindex:a,rowIndex:l,colIndex:r,item:s,column:d,gridSelf:e},e.contextMenu.popup(t,{filter:function(){
    return e.config.contextMenu.popupFilter.call(this,this,c)},param:c}),i.stopEvent(t.originalEvent),n=null,o=null,a=null,l=null,r=null,s=null,d=null,c=null}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){return!e.xvar.touchmoved&&void(this.getAttribute("data-ax5grid-column-rowIndex")&&n.on.call(e,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),doindex:Number(this.getAttribute("data-ax5grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}))}).on("dragstart",function(t){return i.stopEvent(t),!1}),r.call(this),this.xvar.paintRowCountMargin=this.config.virtualScrollYCountMargin,this.xvar.paintRowCountTopMargin=this.config.virtualScrollYCountMargin-Math.floor(this.config.virtualScrollYCountMargin/2),this.config.virtualScrollAccelerated?this.__throttledScroll=i.throttle(function(t,i){this.config.virtualScrollY&&!i.noRepaint&&"top"in t?h.call(this):this.config.virtualScrollX&&!i.noRepaint&&"left"in t&&h.call(this),i.callback&&i.callback()},this.config.virtualScrollAcceleratedDelayTime):this.__throttledScroll=!1},r=function(){var i=this.config,e=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var e={rows:[]},n=0,o=t.rows.length;n<o;n++)if(e.rows[n]={cols:[]},0===n){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};i.showLineNumber&&(l=jQuery.extend({},a,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),e.rows[n].cols.push(l)),i.showRowSelector&&(l=jQuery.extend({},a,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),e.rows[n].cols.push(l))}return e}.call(this,this.bodyRowTable),this.leftBodyRowData=e.leftData,this.bodyRowData=e.rightData,i.body.grouping){var n=t.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(t){for(var e={rows:[]},n=0,o=t.rows.length;n<o;n++)if(e.rows[n]={cols:[]},0===n){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};i.showLineNumber&&(l=jQuery.extend({},a,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),e.rows[n].cols.push(l)),i.showRowSelector&&(l=jQuery.extend({},a,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),e.rows[n].cols.push(l))}return e}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=n.leftData,this.bodyGroupingData=n.rightData,this.bodyGroupingMap=t.util.makeBodyRowMap.call(this,this.bodyGroupingTable)}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},s=function(e,n,o,a,l,r){var s=a.key,d={"<":"&lt;",">":"&gt;"};if("__d-index__"===s)return"undefined"!=typeof n.__index?n.__index+1:"";if("__d-checkbox__"===s)return'<div class="checkBox" style="max-height: '+(a.width-10)+"px;min-height: "+(a.width-10)+'px;"></div>';if(a.editor&&function(i){return i.type in t.inlineEditor&&"inline"==t.inlineEditor[i.type].editMode}(a.editor))return l=l||t.data.getValue.call(this,o,n.__origin_index__,s),i.isFunction(a.editor.disabled)&&a.editor.disabled.call({list:e,dindex:o,item:e[o],key:s,value:l})?l:r?l:t.inlineEditor[a.editor.type].getHtml(this,a.editor,l);var c={formatter:function(){var r={key:s,value:l||t.data.getValue.call(this,o,n.__origin_index__,s),dindex:o,item:n,list:e};return i.isFunction(a.formatter)?a.formatter.call(r):t.formatter[a.formatter].call(r)},"default":function(){var i="";return"undefined"!=typeof l?i=l:(l=/[\.\[\]]/.test(s)?t.data.getValue.call(this,o,n.__origin_index__,s):n[s],null!==l&&"undefined"!=typeof l&&(i=l)),"string"!=typeof i?i:i.replace(/[<>]/g,function(t){return d[t]||t})},treeControl:function(t){var i=this.config,e=this.config.tree.columnKeys,a="";return n[e.children].length?(a+='<a data-ax5grid-data-index="'+o+'" data-ax5grid-column-attr="tree-control" data-ax5grid-tnode-arrow="" style="width: '+i.tree.arrowWidth+"px;padding-left:"+n[e.depth]*i.tree.indentWidth+'px;">',a+=n[e.collapse]?i.tree.icons.collapsedArrow:i.tree.icons.openedArrow,a+="</a>"):a+='<span data-ax5grid-tnode-arrow="" style="width: '+i.tree.arrowWidth+"px;padding-left:"+n[e.depth]*i.tree.indentWidth+'px;">&nbsp;</span>',a+='<span data-ax5grid-tnode-item="'+(n[e.children].length?"group":"item")+'" style="width: '+i.tree.iconWidth+'px;">',a+=n[e.children].length?n[e.collapse]?i.tree.icons.collapsedGroupIcon:i.tree.icons.groupIcon:i.tree.icons.itemIcon,a+="</span>",a+t}},h=a.formatter?c.formatter.call(this):c["default"].call(this);return this.config.tree.use&&a.treeControl&&(h=c.treeControl.call(this,h)),h},d=function(e,n,o){var a=void 0,l=void 0,r=o.key,s=o.label;return"undefined"==typeof r?(l={key:r,list:e.__groupingList,groupBy:e.__groupingBy},a=i.isFunction(s)?s.call(l):s,e[o.colIndex]=a,a):"__d-index__"===r?"":"__d-checkbox__"===r?"":o.collector?(l={key:r,list:e.__groupingList},a=i.isFunction(o.collector)?o.collector.call(l):t.collector[o.collector].call(l),e[o.colIndex]=a,o.formatter?(l.value=a,i.isFunction(o.formatter)?o.formatter.call(l):t.formatter[o.formatter].call(l)):a):"&nbsp;"},c=function(e,n){var o=n.key,a=n.label;if("undefined"==typeof o)return a;if("__d-index__"===o||"__d-checkbox__"===o)return"&nbsp;";if(n.collector){var l={key:o,list:e},r=void 0;return r=i.isFunction(n.collector)?n.collector.call(l):t.collector[n.collector].call(l),n.formatter?(l.value=r,i.isFunction(n.formatter)?n.formatter.call(l):t.formatter[n.formatter].call(l)):r}return"&nbsp;"},h=function(e){var n=this.config,o=this.proxyList?this.proxyList:this.list;e&&(r.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0);var a=void 0,l=void 0;if(this.config.virtualScrollY?(l=a=Math.floor(-this.$.panel["body-scroll"].position().top/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,this.xvar.paintRowCountTopMargin<a&&(a-=this.xvar.paintRowCountTopMargin)):a=this.xvar.frozenRowIndex,isNaN(a))return this;var h=0,u=0,g=null,f=null,x=-this.$.panel["body-scroll"].position().left;if(this.config.virtualScrollX){for(var p=this.xvar.frozenColumnIndex;p<this.colGroup.length;p++)this.colGroup[p]._sx=p==this.xvar.frozenColumnIndex?0:this.colGroup[p-1]._ex,this.colGroup[p]._ex=this.colGroup[p]._sx+this.colGroup[p]._width,this.colGroup[p]._sx<=x&&this.colGroup[p]._ex>=x&&(h=p),this.colGroup[p]._sx<=x+this.xvar.bodyWidth&&this.colGroup[p]._ex>=x+this.xvar.bodyWidth&&(u=p,null===g&&(g=this.colGroup[h]._sx),null===f&&(f=this.xvar.scrollContentWidth-this.colGroup[p]._ex));null===g&&(g=0),null===f&&(f=0),this.$.panel["top-body-scroll"].css({"padding-left":g,"padding-right":f}),this.$.panel["body-scroll"].css({"padding-left":g,"padding-right":f}),this.$.panel["bottom-body-scroll"].css({"padding-left":g,"padding-right":f})}var v="undefined"==typeof this.xvar.paintStartRowIndex,m=this.headerColGroup,y=this.asideBodyRowData,b=this.leftBodyRowData,w=this.bodyRowData,I=this.leftFootSumData,_=this.footSumData,C=this.asideBodyGroupingData,R=this.leftBodyGroupingData,S=this.bodyGroupingData,E=n.body.align,$=void 0,z=void 0;if(this.config.virtualScrollY?(z=Math.ceil(this.xvar.bodyHeight/this.xvar.bodyTrHeight),$=z+(this.xvar.paintRowCountMargin||1)):z=$=o.length,this.xvar.paintRowCountTopMargin<a&&Math.abs(this.xvar.paintStartRowIndex-a)<=this.xvar.paintRowCountTopMargin&&(a=this.xvar.paintStartRowIndex),this.xvar.dataRowCount===o.length&&this.xvar.paintStartRowIndex===a&&this.xvar.paintRowCount===$&&this.xvar.paintStartColumnIndex===h&&this.xvar.paintEndColumnIndex===u)return this;(g||f)&&(m=[].concat(m).splice(h-this.xvar.frozenColumnIndex,u-h+1+this.xvar.frozenColumnIndex),w=t.util.getTableByStartEndColumnIndex(w,h,u),n.body.grouping&&(S=t.util.getTableByStartEndColumnIndex(S,h,u)),n.footSum&&(_=t.util.getTableByStartEndColumnIndex(_,h,u)),this.xvar.paintStartColumnIndex===h&&this.xvar.paintEndColumnIndex===u||(this.needToPaintSum=!0)),this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(o.length-this.xvar.frozenRowIndex),this.xvar.scrollContentHeight<0&&(this.xvar.scrollContentHeight=0),this.$.livePanelKeys=[];var k=function(t,e,o,a,l,r){var c=this.$.panel[t];if(!v&&!r)return this.$.livePanelKeys.push(t),!1;var h=[],u=void 0,g=void 0,f=void 0,x=void 0,p=void 0,m=void 0,y=void 0,b=void 0,w=void 0,I=void 0,_=void 0,C=function(){return"undefined"!=typeof r&&"undefined"!=typeof r.paintStartRowIndex||(r={paintStartRowIndex:0,paintRowCount:l.length},!1)}(),R="#fff 0px, #fff "+(n.body.columnHeight-n.body.columnBorderWidth)+"px, #eee "+(n.body.columnHeight-n.body.columnBorderWidth)+"px, #eee "+n.body.columnHeight+"px";for(C&&h.push('<div style="background:repeating-linear-gradient(to top, '+R+");font-size:0;line-height:0;height: "+(r.paintStartRowIndex-this.xvar.frozenRowIndex)*r.bodyTrHeight+'px;"></div>'),h.push('<table border="0" cellpadding="0" cellspacing="0">'),h.push("<colgroup>"),u=0,g=e.length;u<g;u++)h.push('<col style="width:'+e[u]._width+'px;"  />');for(h.push("<col  />"),h.push("</colgroup>"),f=r.paintStartRowIndex,x=function(){var t=void 0;return t=l.length,r.paintRowCount+r.paintStartRowIndex<t&&(t=r.paintRowCount+r.paintStartRowIndex),t}();f<x;f++)if(l[f]){var S=!1,$=void 0,z="undefined"!=typeof l[f].__origin_index__?l[f].__origin_index__:f;a&&"__isGrouping"in l[f]?($=a,S=!0):$=o;for(p=0,m=$.rows.length;p<m;p++){for(h.push('<tr class="tr-'+f%4,n.body.trStyleClass?i.isFunction(n.body.trStyleClass)?" "+n.body.trStyleClass.call({item:l[f],index:f},l[f],f):" "+n.body.trStyleClass:"",'"',S?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-tr-data-o-index="'+z+'"',' data-ax5grid-selected="'+(l[f][n.columnKeys.selected]||"false")+'"',' data-ax5grid-disable-selection="'+(l[f][n.columnKeys.disableSelection]||"false")+'"',">"),y=0,b=$.rows[p].cols.length;y<b;y++)w=$.rows[p].cols[y],I=n.body.columnHeight*w.rowspan-n.body.columnBorderWidth,_=w.align||E,h.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-data-o-index="'+z+'" ','data-ax5grid-column-row="'+p+'" ','data-ax5grid-column-col="'+y+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[f],index:f})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(e+="hasBorder "),y==b-1&&(e+="isLastColumn "),e}.call(this,w)+'" ','style="height: '+I+'px;min-height: 1px;">'),h.push(function(t){var i=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return w.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(_?'data-ax5grid-text-align="'+_+'"':"")+'" style="height:'+t+"px;"+(w.multiLine?"":"line-height: "+i+"px;")+'">'}(I),S?d.call(this,l[f],f,w):s.call(this,l,l[f],f,w),"</span>"),h.push("</td>");h.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-data-o-index="'+z+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),h.push("</tr>")}}return h.push("</table>"),C&&l.length&&h.push('<div style="background:repeating-linear-gradient(to bottom, '+R+");font-size:0;line-height:0;height: "+(l.length-f)*r.bodyTrHeight+'px;"></div>'),c.empty(),h=h.join(""),c.get(0).innerHTML=h,this.$.livePanelKeys.push(t),!0},T=function(t,e,o,a,l){var r=this.$.panel[t];if(!v&&!l)return this.$.livePanelKeys.push(t),!1;var s=[],d=void 0,h=void 0,u=void 0,g=void 0,f=void 0,x=void 0,p=void 0,m=void 0,y=void 0;for(s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>"),d=0,h=e.length;d<h;d++)s.push('<col style="width:'+e[d]._width+'px;"  />');for(s.push("<col  />"),s.push("</colgroup>"),u=0,g=o.rows.length;u<g;u++){for(s.push('<tr class="tr-sum">'),f=0,x=o.rows[u].cols.length;f<x;f++)p=o.rows[u].cols[f],m=n.body.columnHeight*p.rowspan-n.body.columnBorderWidth,y=p.align||E,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn["sum_"+p.colIndex+"_"+u],this.selectedColumn["sum_"+p.colIndex+"_"+u]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(e+="hasBorder "),f==x-1&&(e+="isLastColumn "),e}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),s.push(function(t){var i=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return p.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;"+(p.multiLine?"":"line-height: "+i+"px;")+'">'}(m),c.call(this,a,p),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),r.empty(),s=s.join(""),r.get(0).innerHTML=s,this.$.livePanelKeys.push(t),!0},H=function(t,e,o,a,l){for(var r=[],s=this.$.panel[t],d={},c=void 0,h=s.find("tr"),u=0,g=h.length;u<g;u++){var f=void 0,x=void 0;f=h[u].childNodes,x=[];for(var p=0,v=f.length;p<v;p++){var m={$:jQuery(f[p])};"null"!=m.$.attr("data-ax5grid-column-col")&&(m.dindex=m.$.attr("data-ax5grid-data-index"),m.tri=m.$.attr("data-ax5grid-column-row"),m.ci=m.$.attr("data-ax5grid-column-col"),m.rowIndex=m.$.attr("data-ax5grid-column-rowIndex"),m.colIndex=m.$.attr("data-ax5grid-column-colIndex"),m.rowspan=m.$.attr("rowspan"),m.text=m.$.text(),x.push(m)),m=null}r.push(x)}if(r.length>1){c=!1;for(var y=function(t,o){for(var a=[],l=function(o,l){!e[o].editor&&function(){return!i.isArray(n.body.mergeCells)||ax5.util.search(n.body.mergeCells,e[o].key)>-1}()&&(d[o]&&function(){if(a.length>0){var i=!0;return a.forEach(function(e){r[t-1][e].text!=r[t][e].text&&(i=!1)}),i}return!0}()&&d[o].text==r[t][o].text?(r[t][o].rowspan=0,r[d[o].ri][o].rowspan++,c=!0):d[o]={ri:t,ci:o,text:r[t][o].text},a.push(o))},s=0,h=r[t].length;s<h;s++)l(s,h)},b=0,w=r.length;b<w;b++)y(b,w);if(c)for(var I=0,_=r.length;I<_;I++)for(var C=0,R=r[I].length;C<R;C++)0==r[I][C].rowspan?r[I][C].$.remove():r[I][C].rowspan>1&&r[I][C].$.attr("rowspan",r[I][C].rowspan).addClass("merged")}},N={paintStartRowIndex:a,paintRowCount:$,paintStartColumnIndex:h,paintEndColumnIndex:u,nopaintLeftColumnsWidth:g,nopaintRightColumnsWidth:f,bodyTrHeight:this.xvar.bodyTrHeight,virtualScrollX:this.config.virtualScrollX,virtualScrollY:this.config.virtualScrollY},D=jQuery.extend({},N,{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex});n.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&k.call(this,"top-aside-body",this.asideColGroup,y,C,o.slice(0,this.xvar.frozenRowIndex),D),k.call(this,"aside-body-scroll",this.asideColGroup,y,C,o,N),n.footSum&&T.call(this,"bottom-aside-body",this.asideColGroup,y,null,this.list)),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&k.call(this,"top-left-body",this.leftHeaderColGroup,b,R,o.slice(0,this.xvar.frozenRowIndex),D),k.call(this,"left-body-scroll",this.leftHeaderColGroup,b,R,o,N),n.footSum&&this.needToPaintSum&&T.call(this,"bottom-left-body",this.leftHeaderColGroup,I,this.list)),this.xvar.frozenRowIndex>0&&k.call(this,"top-body-scroll",m,w,S,o.slice(0,this.xvar.frozenRowIndex),D),k.call(this,"body-scroll",m,w,S,o,N),n.footSum&&this.needToPaintSum&&T.call(this,"bottom-body-scroll",m,_,this.list,N),n.rightSum,n.body.mergeCells&&o.length&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&H.call(this,"top-left-body",this.leftHeaderColGroup,b,o.slice(0,this.xvar.frozenRowIndex)),H.call(this,"left-body-scroll",this.leftHeaderColGroup,b,o,N)),this.xvar.frozenRowIndex>0&&H.call(this,"top-body-scroll",this.headerColGroup,w,o.slice(0,this.xvar.frozenRowIndex)),H.call(this,"body-scroll",this.headerColGroup,w,o,N)),this.xvar.virtualPaintStartRowIndex=l,this.xvar.paintStartRowIndex=a,this.xvar.paintRowCount=$,this.xvar.virtualPaintRowCount=z,this.xvar.paintStartColumnIndex=h,this.xvar.paintEndColumnIndex=u,this.xvar.nopaintLeftColumnsWidth=g,this.xvar.nopaintRightColumnsWidth=f,this.xvar.dataRowCount=o.length,this.needToPaintSum=!1,t.page.statusUpdate.call(this)},u=function(e,n,o,a,l,r){var h=this,u=this.config,g=this.list,f=this.$.panel[e].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+a+'"][data-ax5grid-column-colindex="'+l+'"]').find("[data-ax5grid-cellholder]"),x=this.colGroup,p=x[l];f.html(s.call(this,g,g[n],n,p)),p.editor&&p.editor.updateWith&&p.editor.updateWith.forEach(function(i){x.forEach(function(e){if(e.key==i){var o=e.rowIndex,a=e.colIndex,l=t.util.findPanelByColumnIndex.call(h,n,a,o).panelName,r=h.$.panel[l].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+a+'"]').find("[data-ax5grid-cellholder]");r.html(s.call(h,g,g[n],n,e))}})});var v=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,m=this.headerColGroup,y=this.leftFootSumData,b=this.footSumData,w=this.leftBodyGroupingData,I=this.bodyGroupingData,_=u.body.align,C=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,R={paintStartRowIndex:v,paintRowCount:C,bodyTrHeight:this.xvar.bodyTrHeight};(this.xvar.nopaintLeftColumnsWidth||this.xvar.nopaintRightColumnsWidth)&&(m=[].concat(m).splice(this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex-this.xvar.paintStartColumnIndex+1),u.body.grouping&&(I=t.util.getTableByStartEndColumnIndex(I,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)),u.footSum&&(b=t.util.getTableByStartEndColumnIndex(b,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)));var S=function(t,e,n,o,a){var l=this.$.panel[t],r=[],s=void 0,d=void 0,h=void 0,g=void 0,f=void 0,x=void 0,p=void 0,v=void 0,m=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,d=e.length;s<d;s++)r.push('<col style="width:'+e[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=0,g=n.rows.length;h<g;h++){for(r.push('<tr class="tr-sum">'),f=0,x=n.rows[h].cols.length;f<x;f++)p=n.rows[h].cols[f],v=u.body.columnHeight*p.rowspan-u.body.columnBorderWidth,m=p.align||_,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn["sum_"+p.colIndex+"_"+h],this.selectedColumn["sum_"+p.colIndex+"_"+h]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),u.body.columnBorderWidth&&(e+="hasBorder "),f==x-1&&(e+="isLastColumn "),e}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){var i=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return p.multiLine||(t=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;"+(p.multiLine?"":"line-height: "+i+"px;")+'">'}(v),c.call(this,o,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),l.empty().get(0).innerHTML=r.join(""),!0},E=function(t,e,n,o,a){var l=this.$.panel[t],r=[],s=void 0,c=void 0,h=void 0,g=void 0,f=void 0,x=void 0,p=void 0,v=void 0,m=void 0;for(s=a.paintStartRowIndex,c=function(){var t=void 0;return t=o.length,a.paintRowCount+a.paintStartRowIndex<t&&(t=a.paintRowCount+a.paintStartRowIndex),t}();s<c;s++)if(o[s]&&n&&"__isGrouping"in o[s]){var y=n;for(r=[],h=0,g=y.rows.length;h<g;h++){for(f=0,x=y.rows[h].cols.length;f<x;f++)p=y.rows[h].cols[f],v=u.body.columnHeight*p.rowspan-u.body.columnBorderWidth,m=p.align||_,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+s+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+p.rowIndex+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[s+"_"+p.colIndex+"_"+p.rowIndex],this.selectedColumn[s+"_"+p.colIndex+"_"+p.rowIndex]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var e="";return t.styleClass&&(e+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:o[s],index:s})+" ":t.styleClass+" "),u.body.columnBorderWidth&&(e+="hasBorder "),f==x-1&&(e+="isLastColumn "),e}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){var i=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return p.multiLine||(t=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;"+(p.multiLine?"":"line-height: "+i+"px;")+'">'}(v),d.call(this,o[s],s,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+s+'" ','data-ax5grid-column-attr="default" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>")}l.find('tr[data-ax5grid-tr-data-index="'+s+'"]').empty().get(0).innerHTML=r.join("")}};u.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&E.call(this,"top-left-body",m,w,g.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),E.call(this,"left-body-scroll",m,w,g,R)),this.xvar.frozenRowIndex>0&&E.call(this,"top-body-scroll",m,I,g.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),E.call(this,"body-scroll",m,I,g,R)),this.xvar.frozenColumnIndex>0&&u.footSum&&this.needToPaintSum&&S.call(this,"bottom-left-body",m,y,g),u.footSum&&this.needToPaintSum&&S.call(this,"bottom-body-scroll",m,b,g,R)},g=function(t){var e=this.config,n=this.list,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,a=(this.asideBodyRowData,this.leftBodyRowData),l=this.bodyRowData,r=this.leftFootSumData,h=this.footSumData,u=(this.asideBodyGroupingData,this.leftBodyGroupingData),g=this.bodyGroupingData,f=e.body.align,x=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,p={paintStartRowIndex:o,paintRowCount:x,bodyTrHeight:this.xvar.bodyTrHeight},v=function(t,n,o,a){var l=this.$.panel[t],r=[],s=void 0,d=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,v=void 0,m=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,d=n.length;s<d;s++)r.push('<col style="width:'+n[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=0,u=o.rows.length;h<u;h++){for(r.push('<tr class="tr-sum">'),g=0,x=o.rows[h].cols.length;g<x;g++)p=o.rows[h].cols[g],v=e.body.columnHeight*p.rowspan-e.body.columnBorderWidth,m=p.align||f,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+g+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn["sum_"+p.colIndex+"_"+h],this.selectedColumn["sum_"+p.colIndex+"_"+h]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),e.body.columnBorderWidth&&(n+="hasBorder "),g==x-1&&(n+="isLastColumn "),n}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){var i=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return p.multiLine||(t=e.body.columnHeight-e.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+i+'px;">'}(v),c.call(this,a,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),l.empty().get(0).innerHTML=r.join(""),!0},m=function(t,n,o,a,l){var r=this.$.panel[t],s=[],c=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,v=void 0,m=void 0,y=void 0;for("undefined"!=typeof l&&"undefined"!=typeof l.paintStartRowIndex||(l={paintStartRowIndex:0,paintRowCount:a.length}),c=l.paintStartRowIndex,h=function(){var t=void 0;return t=a.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();c<h;c++)if(a[c]&&o&&"__isGrouping"in a[c]){var b=o;for(s=[],u=0,g=b.rows.length;u<g;u++){for(x=0,p=b.rows[u].cols.length;x<p;x++)v=b.rows[u].cols[x],m=e.body.columnHeight*v.rowspan-e.body.columnBorderWidth,y=v.align||f,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ','data-ax5grid-column-rowIndex="'+v.rowIndex+'" ','data-ax5grid-column-colIndex="'+v.colIndex+'" ','data-ax5grid-column-attr="'+(v.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[c+"_"+v.colIndex+"_"+v.rowIndex],this.selectedColumn[c+"_"+v.colIndex+"_"+v.rowIndex]),'colspan="'+v.colspan+'" ','rowspan="'+v.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[c],index:c})+" ":t.styleClass+" "),e.body.columnBorderWidth&&(n+="hasBorder "),x==p-1&&(n+="isLastColumn "),n}.call(this,v)+'" ','style="height: '+m+'px;min-height: 1px;">'),s.push(function(t){var i=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return v.multiLine||(t=e.body.columnHeight-e.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(v.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;line-height: "+i+'px;">'}(m),d.call(this,a[c],c,v),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-attr="default" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>")}r.find('tr[data-ax5grid-tr-data-index="'+c+'"]').empty().get(0).innerHTML=s.join("")}},y=function(t,n,o,a,l){var r=this.$.panel[t],d=[],c=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,v=void 0,m=o,y="undefined"!=typeof a[l].__origin_index__?a[l].__origin_index__:l,b=r.find('tr[data-ax5grid-tr-data-index="'+l+'"]').empty().get(0);if(b){for(c=0,h=m.rows.length;c<h;c++){for(u=0,g=m.rows[c].cols.length;u<g;u++)x=m.rows[c].cols[u],p=e.body.columnHeight*x.rowspan-e.body.columnBorderWidth,v=x.align||f,d.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-data-o-index="'+y+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+x.rowIndex+'" ','data-ax5grid-column-colIndex="'+x.colIndex+'" ','data-ax5grid-column-attr="'+(x.columnAttr||"default")+'" ',function(t,i){var e="";return t&&(e+='data-ax5grid-column-focused="true" '),i&&(e+='data-ax5grid-column-selected="true" '),e}(this.focusedColumn[l+"_"+x.colIndex+"_"+x.rowIndex],this.selectedColumn[l+"_"+x.colIndex+"_"+x.rowIndex]),'colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=i.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[l],index:l})+" ":t.styleClass+" "),e.body.columnBorderWidth&&(n+="hasBorder "),u==g-1&&(n+="isLastColumn "),n}.call(this,x)+'" ','style="height: '+p+'px;min-height: 1px;">'),d.push(function(t){var i=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return x.multiLine||(t=e.body.columnHeight-e.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(x.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+t+"px;"+(x.multiLine?"":"line-height: "+i+"px;")+'">'}(p),s.call(this,a,a[l],l,x),"</span>"),d.push("</td>");d.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>")}b.innerHTML=d.join("")}};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?y.call(this,"top-left-body",this.leftHeaderColGroup,a,n.slice(0,this.xvar.frozenRowIndex),t):y.call(this,"left-body-scroll",this.leftHeaderColGroup,a,n,t)),this.xvar.frozenRowIndex>t?y.call(this,"top-body-scroll",this.headerColGroup,l,n.slice(0,this.xvar.frozenRowIndex),t):y.call(this,"body-scroll",this.headerColGroup,l,n,t),e.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?m.call(this,"top-left-body",this.leftHeaderColGroup,u,n.slice(0,this.xvar.frozenRowIndex)):m.call(this,"left-body-scroll",this.leftHeaderColGroup,u,n,p)),this.xvar.frozenRowIndex>t?m.call(this,"top-body-scroll",this.headerColGroup,g,n.slice(0,this.xvar.frozenRowIndex)):m.call(this,"body-scroll",this.headerColGroup,g,n,p)),this.xvar.frozenColumnIndex>0&&e.footSum&&this.needToPaintSum&&v.call(this,"bottom-left-body",this.leftHeaderColGroup,r,n),e.footSum&&this.needToPaintSum&&v.call(this,"bottom-body-scroll",this.headerColGroup,h,n,p)},f=function(i,e){if("undefined"==typeof e&&(e={timeoutUnUse:!1}),this.isInlineEditing)for(var n in this.inlineEditing)t.body.inlineEdit.deActive.call(this,"ESC",n);this.config.asidePanelWidth>0&&"top"in i&&this.$.panel["aside-body-scroll"].css({top:i.top}),this.xvar.frozenColumnIndex>0&&"top"in i&&this.$.panel["left-body-scroll"].css({
    top:i.top}),this.xvar.frozenRowIndex>0&&"left"in i&&this.$.panel["top-body-scroll"].css({left:i.left}),this.$.panel["body-scroll"].css(i),this.config.footSum&&"left"in i&&this.$.panel["bottom-body-scroll"].css({left:i.left}),this.__throttledScroll?this.__throttledScroll(i,e):(this.config.virtualScrollY&&!e.noRepaint&&"top"in i?h.call(this):this.config.virtualScrollX&&!e.noRepaint&&"left"in i&&h.call(this),e.callback&&e.callback())},x=function(){e.focusClear.call(this),e.clear.call(this),this.isInlineEditing&&v.deActive.call(this)},p=function(i){var n={UD:function(i){var n=!0,o=void 0,a=void 0,l=void 0,r=void 0;for(var s in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[s],!0);break}if(!o)return!1;for(a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],e.focusClear.call(this),e.clear.call(this),i>0?o.rowIndex+(a.rowspan-1)+i>this.bodyRowTable.rows.length-1?(o.dindex=o.dindex+i,o.doindex=o.doindex+i,o.rowIndex=0,o.dindex>this.list.length-1&&(o.dindex=o.doindex=this.list.length-1,n=!1)):o.rowIndex=o.rowIndex+i:o.rowIndex+i<0?(o.dindex=o.dindex+i,o.doindex=o.doindex+i,o.rowIndex=this.bodyRowTable.rows.length-1,o.dindex<0&&(o.dindex=o.doindex=0,n=!1)):o.rowIndex=o.rowIndex+i,l=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];){if(0==o.rowIndex||l%2==(i>0?0:1)?o.colIndex--:o.rowIndex--,o.rowIndex<=0&&o.colIndex<=0){n=!1;break}l++}if(r=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex),this.config.body.mergeCells&&this.list.length){for(;!(this.$.panel[r.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').get(0)||(i>0?o.dindex++:o.dindex--,o.dindex<0||o.dindex>this.list.length-1)););r=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex)}if(o.panelName=r.panelName,o.dindex+1>this.xvar.frozenRowIndex)if(o.dindex<=this.xvar.virtualPaintStartRowIndex){var d=(o.dindex-this.xvar.frozenRowIndex-1)*this.xvar.bodyTrHeight;d<0&&(d=0),f.call(this,{top:-d,timeoutUnUse:!1}),t.scroller.resize.call(this)}else o.dindex+1>this.xvar.virtualPaintStartRowIndex+(this.xvar.virtualPaintRowCount-2)&&(f.call(this,{top:(this.xvar.virtualPaintRowCount-2-o.dindex)*this.xvar.bodyTrHeight,timeoutUnUse:!1}),t.scroller.resize.call(this));return this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n},LR:function(i){var n=!0,o=void 0,a=void 0,l=!1,r="",s=void 0;for(var d in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[d],!0);break}if(!o)return!1;if(a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],e.focusClear.call(this),e.clear.call(this),i<0?(o.colIndex=o.colIndex+i,o.colIndex<0&&(o.colIndex=0,n=!1)):(o.colIndex=o.colIndex+i,o.colIndex>this.colGroup.length-1&&(o.colIndex=this.colGroup.length-1,n=!1)),"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.rowIndex=0),this.list[o.dindex]&&this.list[o.dindex].__isGrouping){if(i<0){for(;"undefined"==typeof this.bodyGroupingMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex--,o.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyGroupingMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex++,o.colIndex>=this.colGroup.length){n=!1;break}}else if(i<0){for(;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex--,o.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex++,o.colIndex>=this.colGroup.length){n=!1;break}if(s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex),this.config.body.mergeCells&&this.list.length&&o.dindex>1){for(;!(this.$.panel[s.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').get(0)||(o.dindex--,o.dindex<0||o.dindex>this.list.length-1)););s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex)}o.panelName=s.panelName;var c=function(){if(!this.config.virtualScrollX)return!1;var i=0;if(o.colIndex+1>this.xvar.frozenColumnIndex){if(o.colIndex<=this.xvar.paintStartColumnIndex&&this.colGroup[o.colIndex])return i=-this.colGroup[Number(o.colIndex)]._sx,f.call(this,{left:i}),t.header.scrollTo.call(this,{left:i}),t.scroller.resize.call(this),!0;if(o.colIndex>=this.xvar.paintEndColumnIndex&&this.colGroup[Number(o.colIndex)])return this.colGroup[Number(o.colIndex)]._ex>this.xvar.bodyWidth&&(i=this.colGroup[Number(o.colIndex)]._ex-this.xvar.bodyWidth,f.call(this,{left:-i}),t.header.scrollTo.call(this,{left:-i}),t.scroller.resize.call(this)),!0}return i=null,!1}.call(this);r=s.containerPanelName,l=s.isScrollPanel,this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o;var h=this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(!c&&h&&l){var u=function(){return h.position().left+h.outerWidth()>Math.abs(this.$.panel[o.panelName].position().left)+this.$.panel[r].width()?h.position().left+h.outerWidth()-this.$.panel[r].width():Math.abs(this.$.panel[o.panelName].position().left)>h.position().left?h.position().left:void 0}.call(this);"undefined"!=typeof u&&(t.header.scrollTo.call(this,{left:-u}),f.call(this,{left:-u}),t.scroller.resize.call(this))}return n},INDEX:function(i){var n=!0,o=void 0,a=void 0,l=void 0;for(var r in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[r],!0);break}for(o||(o={rowIndex:0,colIndex:0}),a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],e.focusClear.call(this),e.clear.call(this),"end"==i&&(i=this.list.length-1),o.dindex=i,o.rowIndex=0,l=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(0==o.rowIndex||l%2==(_dy>0?0:1)?o.colIndex--:o.rowIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)l++;var s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex);if(o.panelName=s.panelName,o.dindex+1>this.xvar.frozenRowIndex){var d=this.xvar.virtualPaintStartRowIndex||0;if(o.dindex<d)f.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this);else if(o.dindex+1>d+(this.xvar.virtualPaintRowCount-2)){var c=this.config.virtualScrollY?o.dindex-this.xvar.frozenRowIndex-this.xvar.virtualPaintRowCount+3:o.dindex-this.xvar.frozenRowIndex;f.call(this,{top:-c*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)}}return this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n}},o={UP:function(){return n.UD.call(this,-1)},DOWN:function(){return n.UD.call(this,1)},LEFT:function(){return n.LR.call(this,-1)},RIGHT:function(){return n.LR.call(this,1)},HOME:function(){return n.INDEX.call(this,0)},END:function(){return n.INDEX.call(this,"end")},position:function(t){return n.INDEX.call(this,t)}};return i in o?o[i].call(this):o.position.call(this,i)},v={active:function(e,n,a){var l=this,r=void 0,s=void 0,d=void 0,c=void 0,h=void 0,u=void 0,g=void 0,f=void 0;for(var x in e){if(h=e[x].panelName,r=e[x].dindex,s=e[x].doindex,d=e[x].colIndex,c=e[x].rowIndex,u=e[x].colspan,g=this.colGroup[d],!(f=g.editor))return this;if(i.isFunction(f.disabled)&&f.disabled.call({list:this.list,dindex:r,item:this.list[r],key:g.key,value:a}))return this;if(!function(i,e){if(i.type in t.inlineEditor)return"popup"==t.inlineEditor[i.type].editMode}(f)){if("checkbox"==f.type){var p=void 0,v=void 0;v=f.config&&f.config.trueValue?(p=!(a==f.config.trueValue))?f.config.trueValue:f.config.falseValue:p=0==a||"false"==a||a<"1"?"true":"false",t.data.setValue.call(l,r,s,g.key,v),o.call(l,["cellChecked"],r,s,{key:g.key,rowIndex:c,colIndex:d,editorConfig:g.editor.config,checked:p})}return this}if(this.list[r].__isGrouping)return!1;if(x in this.inlineEditing)return!1;this.inlineEditing[x]={editor:f,panelName:h,columnKey:x,column:e[x],useReturnToSave:t.inlineEditor[f.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var m=t.data.getValue.call(l,r,s,g.key),y=function(t,e){return i.isNothing(t)&&(t=i.isNothing(m)?"":m),"money"==e.type?i.number(t,{money:!0}):t}.call(this,a,f);return this.inlineEditing[x].$inlineEditorCell=this.$.panel[h].find('[data-ax5grid-tr-data-index="'+r+'"]').find('[data-ax5grid-column-rowindex="'+c+'"][data-ax5grid-column-colindex="'+d+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[x].$inlineEditor=t.inlineEditor[f.type].init(this,x,f,this.inlineEditing[x].$inlineEditorCell,y),!0}},deActive:function(e,n,o){if(!this.inlineEditing[n])return this;var a=this.inlineEditing[n].panelName,l=this.inlineEditing[n].column.dindex,r=this.inlineEditing[n].column.doindex,s=this.inlineEditing[n].column.rowIndex,d=this.inlineEditing[n].column.colIndex,c=this.bodyRowMap[this.inlineEditing[n].column.rowIndex+"_"+this.inlineEditing[n].column.colIndex],h=function(t){return"undefined"==typeof o?"SELECT"==t.get(0).tagName||"INPUT"==t.get(0).tagName||"TEXTAREA"==t.get(0).tagName?t.val():(e="CANCEL",!1):o}(this.inlineEditing[n].$inlineEditor),u=function(t,e){return"money"==e.type?i.number(t):t}.call(this,h,c.editor),g={CANCEL:function(t,i,e){g.__clear.call(this)},RETURN:function(i,e,n,o){t.data.setValue.call(this,i,e,n.key,o)?(g.__clear.call(this),t.body.repaintCell.call(this,a,i,e,s,d,o)):g.__clear.call(this)},__clear:function(){if(this.isInlineEditing=!1,this.inlineEditing[n]&&this.inlineEditing[n].$inlineEditor){var t=this.inlineEditing[n].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[n].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[n].$inlineEditor.ax5select("close"),this.inlineEditing[n].$inlineEditor.remove(),this.inlineEditing[n].$inlineEditor=null,this.inlineEditing[n].$inlineEditorCell=null}this.inlineEditing[n]=void 0,delete this.inlineEditing[n]}};e in g?g[e||"RETURN"].call(this,l,r,c,u):g.__clear.call(this)},keydown:function(i,e,n){var a={ESC:function(){for(var t in this.inlineEditing)v.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing){if(!this.inlineEditing[e]||!this.inlineEditing[e].useReturnToSave)return!1;v.deActive.call(this,"RETURN",e)}else for(var i in this.focusedColumn){var a=this.focusedColumn[i],l=this.bodyRowMap[a.rowIndex+"_"+a.colIndex],r=a.dindex,s=a.doindex,d="",c=this.colGroup[a.colIndex];if(l&&(this.list[r].__isGrouping||(d=t.data.getValue.call(this,r,s,l.key))),c.editor&&"inline"===t.inlineEditor[c.editor.type].editMode){if(n&&n.moveFocus);else if(l.editor&&"checkbox"==l.editor.type){d=t.data.getValue.call(this,r,s,l.key);var h=void 0,u=void 0;l.editor.config&&l.editor.config.trueValue?d!=l.editor.config.trueValue?(u=l.editor.config.trueValue,h=!0):(u=l.editor.config.falseValue,h=!1):u=h=0==d||"false"==d||d<"1"?"true":"false",t.data.setValue.call(this,r,s,l.key,u),o.call(this,["cellChecked"],r,s,{key:l.key,rowIndex:a.rowIndex,colIndex:a.colIndex,editorConfig:l.editor.config,checked:h})}}else t.body.inlineEdit.active.call(this,this.focusedColumn,null,d)}return!0}};i in a&&a[i].call(this,i,e,n)}},m=function(){var t=this.config,i=this.list,e=this.bodyRowTable,n=this.footSumTable,o=this.bodyGroupingTable,a=function(t,i,e,n){var o=[],a=void 0,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0,g=void 0,f=void 0;for(a=0,l=n.length;a<l;a++){var x=!1,p=void 0;e&&"__isGrouping"in n[a]?(p=e,x=!0):p=i;for(r=0,c=p.rows.length;r<c;r++){for(o.push("\n<tr>"),h=0,u=p.rows[r].cols.length;h<u;h++)g=p.rows[r].cols[h],o.push("<td ",'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ',">",(x?d.call(this,n[a],a,g):s.call(this,n,n[a],a,g,f,"text"))||"&nbsp;","</td>");o.push("\n</tr>")}}return o.join("")},l=function(t,i,e){var n=[],o=void 0,a=void 0,l=void 0,r=void 0,s=void 0;for(o=0,a=i.rows.length;o<a;o++){for(n.push("\n<tr>"),l=0,r=i.rows[o].cols.length;l<r;l++)s=i.rows[o].cols[l],n.push("<td ",'colspan="'+s.colspan+'" ','rowspan="'+s.rowspan+'" ',">",c.call(this,e,s),"</td>");n.push("\n</tr>")}return n.join("")},r=[];return r.push(a.call(this,this.headerColGroup,e,o,i)),t.footSum&&r.push(l.call(this,this.headerColGroup,n,i)),t.rightSum,r.join("")},y=function(i,e,n){t.data.toggleCollapse.call(this,i,e,n)&&(this.proxyList=t.data.getProxyList.call(this,this.list),this.align())},b=function(t,i){var e={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};p.call(this,t),this.config.body.onClick&&this.config.body.onClick.call(e,e),e=null},w=function(t,i){var e={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};p.call(this,t),this.config.body.onDBLClick&&this.config.body.onDBLClick.call(e),e=null};t.body={init:l,repaint:h,repaintCell:u,repaintRow:g,updateRowState:o,updateRowStateAll:a,scrollTo:f,blur:x,moveFocus:p,inlineEdit:v,getExcelString:m,toggleCollapse:y,click:b,dblClick:w}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){for(var t=0,e=this.list.length;e--;)"__groupingList"in this.list[e]||(t+=i.number(this.list[e][this.key]));return t},n=function(){for(var t=0,e=this.list.length,n=0;e--;)"__groupingList"in this.list[e]||(t+=i.number(this.list[e][this.key]),n++);return i.number(t/(n||1),{round:2})};t.collector={sum:e,avg:n}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){},n=function(t){for(var i=0,e=t.length,n=[];i<e;i++)t[i]&&!t[i].__isGrouping&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),n.push(jQuery.extend({},t[i])));return n},o=function(t){this.selectedDataIndexs=[];var e=0,n=t.length,o=[],a=0,l=0,r=0;if(this.config.body.grouping)for(var s=i.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),d=0,c=s.length,h=void 0,u=[],g=void 0;e<n+1;e++)if(d=0,t[e]&&t[e][this.config.columnKeys.deleted])this.deletedList.push(t[e]);else{for(h="",u=[];d<c;d++){if(t[e]&&(h+="$|$"+t[e][s[d].key]),a>0&&h!=s[d].compareString){for(var f={keys:[],labels:[],list:s[d].list},x=0;x<d+1;x++)f.keys.push(s[x].key),f.labels.push(t[e-1][s[x].key]);u.push(f),s[d].list=[]}s[d].list.push(t[e]),s[d].compareString=h}for(g=u.length;g--;)o.push({__isGrouping:!0,__groupingList:u[g].list,__groupingBy:{keys:u[g].keys,labels:u[g].labels}});t[e]&&(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),t[e].__original_index=t[e].__index=r,o.push(t[e]),l++,a++,r++)}else for(;e<n;e++)t[e]&&(t[e][this.config.columnKeys.deleted]?this.deletedList.push(t[e]):(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),"undefined"==typeof t[e].__original_index&&(t[e].__original_index=r),t[e].__index=r,l++,r++,o.push(t[e])));return this.xvar.dataRealRowCount=l,o},a=function(t){this.selectedDataIndexs=[],this.deletedList=[];for(var e=0,n=0,o=0,a=0,l=t.length,r=this.config.tree.columnKeys,s=this.config.tree.hashDigit,d={};l--;)delete t[l][r.parentHash],delete t[l][r.selfHash];for(e=0,n=0,l=t.length;e<l;e++)t[e]&&(d[t[e][r.selfKey]]=e,(i.isNothing(t[e][r.parentKey])||"top"===t[e][r.parentKey])&&(t[e][r.parentKey]="top",t[e][r.children]=[],t[e][r.parentHash]=i.setDigit("0",s),t[e][r.selfHash]=i.setDigit("0",s)+"."+i.setDigit(n,s),t[e][r.depth]=0,t[e][r.hidden]=!1,n++));for(e=0,a=0;e<l;e++){var c=void 0,h=void 0;t[e]&&"top"!==t[e][r.parentKey]&&"undefined"==typeof t[e][r.parentHash]&&((c=t[d[t[e][r.parentKey]]])?(h=c[r.selfHash],t[e][r.children]=[],t[e][r.parentHash]=h,t[e][r.selfHash]=h+"."+i.setDigit(c[r.children].length,s),t[e][r.depth]=c[r.depth]+1,(c[r.collapse]||c[r.hidden])&&(t[e][r.hidden]=!0),c[r.children].push(t[e][r.selfKey])):(t[e][r.parentKey]="top",t[e][r.children]=[],t[e][r.parentHash]=i.setDigit("0",s),t[e][r.selfHash]=i.setDigit("0",s)+"."+i.setDigit(n,s),t[e][r.hidden]=!1,n++)),t[e]&&(t[e][this.config.columnKeys.deleted]?(this.deletedList.push(t[e]),t[e][r.hidden]=!0):t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),t[e].__index=a,o++,a++)}return this.listIndexMap=d,this.xvar.dataRealRowCount=o,t},l=function(t){for(var i=0,e=t.length,n=[];i<e;i++)t[i]&&!t[i][this.config.tree.columnKeys.hidden]&&(t[i].__origin_index__=i,n.push(t[i]));return n},r=function(e){var n=void 0;return i.isArray(e)?(this.page=null,n=e):"page"in e&&(this.page=jQuery.extend({},e.page),n=e.list),this.config.tree.use?(this.list=a.call(this,n),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))):(this.proxyList=null,this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?b.call(this,this.sortInfo,n):n)),this.selectedDataIndexs=[],this.deletedList=[],this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this.config.body.grouping,this},s=function(t){return{list:this.list,page:this.page}},d=function(i){var e=[],n=this.list,o=0,a=n.length;switch(i){case"modified":for(;o<a;o++)n[o]&&!n[o].__isGrouping&&n[o][this.config.columnKeys.modified]&&e.push(jQuery.extend({},n[o]));break;case"selected":for(;o<a;o++)n[o]&&!n[o].__isGrouping&&n[o][this.config.columnKeys.selected]&&e.push(jQuery.extend({},n[o]));break;case"deleted":e=[].concat(this.deletedList);break;default:e=t.data.clearGroupingData.call(this,n)}return e},c=function(e,r,s){var d=this.config.body.grouping?n.call(this,this.list):this.list,c={first:function(){d=[].concat(e).concat(d)},last:function(){d=d.concat([].concat(e))}};if(this.config.tree.use){var h=this.list.concat([].concat(e));this.list=a.call(this,h),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))}else{if("undefined"==typeof r&&(r="last"),r in c)e[this.config.columnKeys.modified]=!0,c[r].call(this,e);else{if(!i.isNumber(r))throw"invalid argument _dindex";if(i.isArray(e))for(var u=0,g=e.length;u<g;u++)d.splice(r+u,0,e[u]);else d.splice(r,0,e)}d=this.config.body.grouping?o.call(this,b.call(this,this.sortInfo,d)):s&&s.sort&&Object.keys(this.sortInfo).length?o.call(this,b.call(this,this.sortInfo,d)):o.call(this,d),this.list=d}return this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},h=function(e){var r=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){this.config.tree.use?s.tree.call(this,0):r.splice(0,1)},last:function(){this.config.tree.use?s.tree.call(this,r.length-1):r.splice(r.length-1,1)},index:function(t){this.config.tree.use?s.tree.call(this,t):r.splice(t,1)},selected:function(){if(this.config.tree.use)s.tree.call(this,"selected");else{var t=[],i=void 0,e=void 0;for(i=0,e=r.length;i<e;i++)r[i][this.config.columnKeys.selected]||t.push(r[i]);r=t,t=null,i=null}},tree:function(t){var e=this.config.tree.columnKeys,n=r[t][this.config.tree.columnKeys.selfHash];r=i.filter(r,function(){return this[e.selfHash].substr(0,n.length)!=n}),e=null,n=null}};if("undefined"==typeof e&&(e="last"),e in s)s[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _dindex";s.index.call(this,e)}return this.config.tree.use?(this.list=a.call(this,r),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))):(r=this.config.body.grouping?o.call(this,b.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length?o.call(this,b.call(this,this.sortInfo,r)):o.call(this,r),this.list=r),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},u=function(e){var r=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){this.config.tree.use?s.tree.call(this,0):r[0][this.config.columnKeys.deleted]=!0},last:function(){this.config.tree.use?s.tree.call(this,r.length-1):r[r.length-1][this.config.columnKeys.deleted]=!0},selected:function(){if(this.config.tree.use)s.tree.call(this,"selected");else{for(var t=r.length;t--;)r[t][this.config.columnKeys.selected]&&(r[t][this.config.columnKeys.deleted]=!0);t=null}},tree:function(t){var i=this.config.columnKeys,e=this.config.tree.columnKeys;if("selected"===t){for(var n=r.length;n--;)if(r[n][this.config.columnKeys.selected]){r[n][this.config.columnKeys.deleted]=!0;for(var o=r[n][e.selfHash],a=r.length;a--;)r[a][e.selfHash].substr(0,o.length)===o&&(r[a][i.deleted]=!0);o=null,a=null}n=null}else{for(var l=r[t][e.selfHash],s=r.length;s--;)r[s][e.selfHash].substr(0,l.length)!==l&&(r[s][i.deleted]=!0);l=null,s=null}i=null,e=null}};if("undefined"==typeof e&&(e="last"),e in s)s[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _dindex";r[e][this.config.columnKeys.deleted]=!0}return this.config.tree.use?(this.list=a.call(this,r),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list))):(r=this.config.body.grouping?o.call(this,b.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length?o.call(this,b.call(this,this.sortInfo,r)):o.call(this,r),this.list=r),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},g=function(t,e){if(!i.isNumber(e))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(e,1,t),this.config.body.grouping&&(this.list=o.call(this,n.call(this,this.list)))},f=function(t,i,e){var n=this.config.tree.columnKeys,o=void 0,a=void 0;if("undefined"==typeof t)return!1;if(a=this.proxyList[t].__origin_index__,this.list[a][n.children]){if(this.proxyList=[],e&&e.filter){if(e.filter.call({item:this.list[a],dindex:a},this.list[a]))for(var l in i)this.list[a][l]=i[l]}else for(var r in i)this.list[a][r]=i[r];o=this.list[a][n.selfHash];for(var s=0,d=this.list.length;s<d;s++)if(this.list[s]){if(this.list[s][n.parentHash].substr(0,o.length)===o)if(e&&e.filter){if(e.filter.call({item:this.list[s],dindex:s},this.list[s]))for(var c in i)this.list[s][c]=i[c]}else for(var h in i)this.list[s][h]=i[h];this.list[s][n.hidden]||this.proxyList.push(this.list[s])}return!0}return!1},x=function(i,e,n,o){var a=p.call(this,i,e,n),l=this.list,r="undefined"==typeof e?i:e;if(this.needToPaintSum=!0,a!==o){if(/[\.\[\]]/.test(n))try{l[r][this.config.columnKeys.modified]=!0,Function("val","this"+t.util.getRealPathForDataItem(n)+" = val;").call(l[r],o)}catch(s){}else l[r][this.config.columnKeys.modified]=!0,l[r][n]=o;this.onDataChanged&&this.onDataChanged.call({self:this,list:this.list,dindex:i,doindex:e,item:this.list[i],key:n,value:o})}return!0},p=function(i,e,n,o){var a=this.list,l="undefined"==typeof e?i:e;if(/[\.\[\]]/.test(n))try{o=Function("","return this"+t.util.getRealPathForDataItem(n)+";").call(a[l])}catch(r){}else o=a[l][n];return o},v=function(){this.selectedDataIndexs=[]},m=function(t,e,n,o){var a=this.config;return"undefined"==typeof e&&(e=t),!!this.list[e]&&(!this.list[e].__isGrouping&&(!this.list[e][a.columnKeys.disableSelection]&&("undefined"==typeof n?(this.list[e][a.columnKeys.selected]=!this.list[e][a.columnKeys.selected])?this.selectedDataIndexs.push(e):this.selectedDataIndexs.splice(i.search(this.selectedDataIndexs,function(){return this==e}),1):(this.list[e][a.columnKeys.selected]=n)?this.selectedDataIndexs.push(e):this.selectedDataIndexs.splice(i.search(this.selectedDataIndexs,function(){return this==e}),1),this.onDataChanged&&o&&o.internalCall&&this.onDataChanged.call({self:this,list:this.list,dindex:t,doindex:e,item:this.list[e],key:a.columnKeys.selected,value:this.list[e][a.columnKeys.selected]}),this.list[e][a.columnKeys.selected])))},y=function(t,i){var e=this.config,n=this.list.length;if(this.selectedDataIndexs=[],"undefined"==typeof t)for(;n--;)this.list[n].__isGrouping||i&&i.filter&&i.filter.call(this.list[n])!==!0||this.list[n][e.columnKeys.disableSelection]||(this.list[n][e.columnKeys.selected]=!this.list[n][e.columnKeys.selected])&&this.selectedDataIndexs.push(n);else for(;n--;)this.list[n].__isGrouping||i&&i.filter&&i.filter.call(this.list[n])!==!0||this.list[n][e.columnKeys.disableSelection]||(this.list[n][e.columnKeys.selected]=t)&&this.selectedDataIndexs.push(n);return this.onDataChanged&&i&&i.internalCall&&this.onDataChanged.call({self:this,list:this.list}),this.list},b=function(e,n,o){var a=n||this.list,l=[],r=0,s=function(i,e,n){if(/[\.\[\]]/.test(e))try{n=Function("","return this"+t.util.getRealPathForDataItem(e)+";").call(i)}catch(o){}else n=i[e];return n};for(var d in e)l[e[d].seq]={key:d,order:e[d].orderBy};l=i.filter(l,function(){return"undefined"!=typeof this}),o&&o.resetLineNumber&&0===l.length&&(l[0]={key:"__original_index",order:"asc"});var c=0,h=l.length,u=void 0,g=void 0;if(a.sort(function(t,i){for(c=0;c<h;c++){if(u=s(t,l[c].key),g=s(i,l[c].key),("undefined"==typeof u?"undefined":_typeof(u))!==("undefined"==typeof g?"undefined":_typeof(g))&&(u=""+u,g=""+g),u<g)return"asc"===l[c].order?-1:1;if(u>g)return"asc"===l[c].order?1:-1}}),o&&o.resetLineNumber)for(c=0,h=a.length,r=0;c<h;c++)n[c]&&!n[c].__isGrouping&&(n[c].__index=r++);return n?a:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this)},w=function(i,e){var n=this;if(this.config.tree.use){var o=this.list.concat([].concat(i));this.list=a.call(this,o),this.proxyList=l.call(this,b.call(this,this.sortInfo,this.list)),o=null}else this.list=this.list.concat([].concat(i));if(this.appendProgress=!0,t.page.statusUpdate.call(this),this.appendDebouncer){if(!(n.appendDebounceTimes<this.config.debounceTime/10))return n.appendDebounceTimes=0,I.call(n),e(),!1;clearTimeout(this.appendDebouncer),n.appendDebounceTimes++}this.appendDebouncer=setTimeout(function(){n.appendDebounceTimes=0,I.call(n),e()},this.config.debounceTime)},I=function(){this.appendProgress=!1,this.config.body.grouping?this.list=o.call(this,b.call(this,this.sortInfo,this.list)):this.list=o.call(this,this.list),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this)},_=function(t,i,e){var n=this.config.tree.columnKeys,o=void 0,a=void 0;if("undefined"==typeof t)return!1;if(a=this.proxyList[t].__origin_index__,this.list[a][n.children]){this.proxyList=[],"undefined"==typeof e&&(e=!this.list[a][n.collapse]),this.list[a][n.collapse]=e,o=this.list[a][n.selfHash];for(var l=this.list.length;l--;)this.list[l]&&(this.list[l][n.parentHash].substr(0,o.length)===o&&(this.list[l][n.hidden]=e),this.list[l][n.hidden]||this.proxyList.push(this.list[l]));return!0}return!1};t.data={init:e,set:r,get:s,getList:d,getProxyList:l,setValue:x,getValue:p,clearSelect:v,select:m,selectAll:y,add:c,remove:h,deleteRow:u,update:g,updateChild:f,sort:b,initData:o,clearGroupingData:n,append:w,toggleCollapse:_}}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(){return"\ufeff\n{{#tables}}{{{body}}}{{/tables}}\n"}),e=function(t,e){var n=void 0,o=[].concat(t);n=ax5.mustache.render(i(),{worksheet:function(){var t=[];return o.forEach(function(i,e){t.push({name:"Sheet"+(e+1)})}),t}(),tables:function(){var t=[];return o.forEach(function(i,e){t.push({body:i})}),t}()});var a=navigator.userAgent.indexOf("Chrome")>-1,l=!a&&navigator.userAgent.indexOf("Safari")>-1,r=!!document.documentMode,s=void 0,d=void 0,c=void 0,h=void 0,u=void 0;return navigator.msSaveOrOpenBlob?(s=new Blob([n],{type:"text/html"}),window.navigator.msSaveOrOpenBlob(s,e)):l?(d=window.open("about:blank",this.id+"-excel-export","width=600,height=400"),d.document.write(n),d=null):r&&"undefined"==typeof Blob?(c=jQuery('<iframe id="'+this.id+'-excel-export" style="display:none"></iframe>'),jQuery(document.body).append(c),h=window[this.id+"-excel-export"],h.document.open("text/html","replace"),h.document.write(n),h.document.close(),h.focus(),h.document.execCommand("SaveAs",!0,e),c.remove()):(u=document.body.appendChild(document.createElement("a")),"download"in u&&(u.download=e,u.href=URL.createObjectURL(new Blob([n],{type:"text/csv"})),u.click(),document.body.removeChild(u))),!0};t.excel={"export":e}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){if("undefined"!=typeof this.value){var t=(""+this.value).replace(/[^0-9^\.^\-]/g,""),e=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),n=t.split(".");n[0]+=".";do n[0]=n[0].replace(e,"$1,$2");while(e.test(n[0]));return n.length>1?n[0]+i.left(n[1],2):n[0].split(".")[0]}return""};t.formatter={money:e}}(),function(){var t=ax5.ui.grid,i=ax5.util,e={on:function(n,o){var a=this,l=$(n),r=l.offset().left,s=a.$.container.root.offset().left;a.xvar.columnResizerIndex=o;var d={min:-a.colGroup[o]._width+2,max:a.$.container.root.width()-a.colGroup[o]._width};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(i){var e=t.util.getMousePosition(i);a.xvar.__da=e.clientX-a.xvar.mousePosition.clientX,d.min>a.xvar.__da?a.xvar.__da=d.min:d.max<a.xvar.__da&&(a.xvar.__da=d.max),a.xvar.columnResizerLived||a.$.resizer.horizontal.addClass("live"),a.xvar.columnResizerLived=!0,a.$.resizer.horizontal.css({left:r+a.xvar.__da-s})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){e.off.call(a),i.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){e.off.call(a),i.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,"undefined"==typeof this.xvar.__da||this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(){var n=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(e){var o=this.getAttribute("data-ax5grid-column-key"),a=this.getAttribute("data-ax5grid-column-colindex"),l=n.colGroup[a];if("__checkbox_header__"===o&&n.config.header.selector){var r=this.getAttribute("data-ax5grid-selected");r=!!i.isNothing(r)||"true"!==r,$(this).attr("data-ax5grid-selected",r),n.selectAll({selected:r}),r=null}else o&&l&&l.sortable!==!1&&!l.sortFixed&&(l.sortable!==!0&&n.config.sortable!==!0||s.call(n,l.key));t.body.blur.call(n),o=null,a=null,l=null}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(o){var a=this.getAttribute("data-ax5grid-column-resizer");n.xvar.mousePosition=t.util.getMousePosition(o),e.on.call(n,this,Number(a)),i.stopEvent(o),a=null}).on("dragstart",function(t){return i.stopEvent(t),!1}),o.call(this)},o=function(){var i=this.config,e=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.xvar.frozenColumnIndex);this.asideHeaderData=function(t){for(var e=[],n={rows:[]},o=0,a=t.rows.length;o<a;o++)if(n.rows[o]={cols:[]},0===o){var l={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},r={};i.showLineNumber&&(r=jQuery.extend({},l,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,columnAttr:"lineNumber",key:"__index_header__",label:"&nbsp;"}),e.push(r),n.rows[o].cols.push(r)),i.showRowSelector&&(r=jQuery.extend({},l,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,columnAttr:"rowSelector",key:"__checkbox_header__",label:""}),e.push(r),n.rows[o].cols.push(r)),
    l=null}return this.asideColGroup=e,n}.call(this,this.headerTable),this.leftHeaderData=e.leftData,this.headerData=e.rightData},a=function(t){return"__checkbox_header__"===t.key?this.config.header.selector?'<div class="checkBox" style="max-height: '+(t.width-10)+"px;min-height: "+(t.width-10)+'px;"></div>':"&nbsp;":t.label||"&nbsp;"},l=function(t){var e=this.config,n=this.colGroup;t&&(o.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0);var l=this.asideHeaderData,r=this.leftHeaderData,s=this.headerData,d=e.header.align;this.leftHeaderColGroup=n.slice(0,this.config.frozenColumnIndex),this.headerColGroup=n.slice(this.config.frozenColumnIndex);var c=function(t,o,l){var r=0,s=[];s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>");for(var c=0,h=o.length;c<h;c++)s.push('<col style="width:'+o[c]._width+'px;"  />'),r+=o[c]._width;s.push("<col  />"),s.push("</colgroup>");for(var u=0,g=l.rows.length;u<g;u++){var f="";s.push('<tr class="'+f+'">');for(var x=0,p=l.rows[u].cols.length;x<p;x++){var v=l.rows[u].cols[x],m=e.header.columnHeight*v.rowspan-e.header.columnBorderWidth,y=d||v.align;s.push("<td ",'data-ax5grid-column-attr="'+(v.columnAttr||"default")+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ',function(){return"undefined"!=typeof v.key?'data-ax5grid-column-key="'+v.key+'" ':""}(),'data-ax5grid-column-colindex="'+v.colIndex+'" ','data-ax5grid-column-rowindex="'+v.rowIndex+'" ','colspan="'+v.colspan+'" ','rowspan="'+v.rowspan+'" ','class="'+function(t){var n="";return t.headerStyleClass&&(n+=i.isFunction(t.headerStyleClass)?t.headerStyleClass.call({column:t,key:t.key})+" ":t.headerStyleClass+" "),e.header.columnBorderWidth&&(n+="hasBorder "),x==p-1&&(n+="isLastColumn "),n}.call(this,v)+'" ','style="height: '+m+'px;min-height: 1px;">'),s.push(function(){var t=e.header.columnHeight-2*e.header.columnPadding-e.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" '+(y?'data-ax5grid-text-align="'+y+'"':"")+' style="height: '+(e.header.columnHeight-e.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),function(){var t="";return i.isNothing(v.key)||i.isNothing(v.colIndex)||e.sortable!==!0&&v.sortable!==!0||v.sortable===!1||(t+='<span data-ax5grid-column-sort="'+v.colIndex+'" data-ax5grid-column-sort-order="'+(n[v.colIndex].sort||"")+'" />'),t}(),a.call(this,v),"</span>"),i.isNothing(v.colIndex)||e.enableFilter&&s.push('<span data-ax5grid-column-filter="'+v.colIndex+'" data-ax5grid-column-filter-value=""  />'),s.push("</td>")}s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+e.header.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),t.html(s.join("")),function(){for(var n=e.header.columnHeight*l.rows.length-e.header.columnBorderWidth,a=0,r=[],s=0,d=o.length;s<d;s++){var c=o[s];i.isNothing(c.colIndex)||(a+=c._width,r.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+n+"px;left: "+(a-4)+'px;"  />'))}t.append(r)}.call(this),r};e.asidePanelWidth>0&&c.call(this,this.$.panel["aside-header"],this.asideColGroup,l),e.frozenColumnIndex>0&&c.call(this,this.$.panel["left-header"],this.leftHeaderColGroup,r),this.xvar.scrollContentWidth=c.call(this,this.$.panel["header-scroll"],this.headerColGroup,s),e.rightSum},r=function(t){return this.$.panel["header-scroll"].css(t),this},s=function(t){var i="",e={},n=0;for(var o in this.sortInfo)this.sortInfo[o].fixed&&(e[o]=this.sortInfo[o],n++);for(var a=0,l=this.colGroup.length;a<l;a++)this.colGroup[a].key==t?(""==i&&(i="undefined"==typeof this.colGroup[a].sort?"desc":"desc"===this.colGroup[a].sort?"asc":void 0),this.colGroup[a].sort=i):this.config.multiSort||(this.colGroup[a].sort=void 0),"undefined"!=typeof this.colGroup[a].sort&&(e[this.colGroup[a].key]||(e[this.colGroup[a].key]={seq:n++,orderBy:this.colGroup[a].sort}));return this.setColumnSort(e),this},d=function(t){for(var i=0,e=this.colGroup.length;i<e;i++)for(var n in t)this.colGroup[i].key==n&&(this.colGroup[i].sort=t[n].orderBy);return this},c=function(){var t=(this.config,this.colGroup),i=this.headerTable,e=function(t,i){for(var e=[],n=0,o=i.rows.length;n<o;n++){e.push("<tr>");for(var l=0,r=i.rows[n].cols.length;l<r;l++){var s=i.rows[n].cols[l];e.push("<td ",'colspan="'+s.colspan+'" ','rowspan="'+s.rowspan+'" ',">",a.call(this,s),"</td>")}e.push("</tr>")}return e.join("")};return e.call(this,t,i)};t.header={init:n,repaint:l,scrollTo:r,toggleSort:s,applySortStatus:d,getExcelString:c}}(),function(){var t=ax5.ui.grid,i={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){if("undefined"!=typeof e.attributes){var o="";for(var a in e.attributes)o+=" "+a+"='"+e.attributes[a]+"'"}return'<input type="text" data-ax5grid-editor="text" value="'+n+'" '+o+">"},init:function(i,e,n,o,a){var l;return o.append(l=jQuery(this.getHtml(i,e,n,a))),this.bindUI(i,e,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(i,"RETURN",e)}),l},bindUI:function(t,i,e,n,o,a){e.focus().select()}},e={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){var o="";if("undefined"!=typeof e.attributes)for(var a in e.attributes)o+=" "+a+"='"+e.attributes[a]+"'";return'<input type="text" data-ax5grid-editor="money" value="'+n+'" '+o+'" />'},init:function(i,e,n,o,a){var l=void 0;return o.append(l=jQuery(this.getHtml(i,e,n,a))),this.bindUI(i,e,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(i,"RETURN",e)}),l},bindUI:function(t,i,e,n,o,a){e.data("binded-ax5ui","ax5formater"),e.ax5formatter($.extend(!0,{pattern:"money"},n.config)),e.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){var o="";if("undefined"!=typeof e.attributes)for(var a in e.attributes)o+=" "+a+"='"+e.attributes[a]+"'";return'<input type="text" data-ax5grid-editor="number" value="'+n+'" '+o+'" />'},init:function(i,e,n,o,a){var l;return o.append(l=jQuery(this.getHtml(i,e,n,a))),this.bindUI(i,e,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(i,"RETURN",e)}),l},bindUI:function(t,i,e,n,o,a){e.data("binded-ax5ui","ax5formater"),e.ax5formatter($.extend(!0,{pattern:"number"},n.config)),e.focus().select()}},o={useReturnToSave:!0,editMode:"popup",getHtml:function(t,i,e,n){return'<input type="text" data-ax5grid-editor="calendar" value="'+n+'" >'},init:function(t,i,e,n,o){var a;return n.append(a=jQuery(this.getHtml(t,i,e,o))),this.bindUI(t,i,a,e,n,o),a},bindUI:function(i,e,n,o,a,l){var r=i;n.data("binded-ax5ui","ax5picker"),n.ax5picker($.extend(!0,{direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&t.body.inlineEdit.deActive.call(r,"RETURN",e)}},o.config)),n.focus().select()}},a={useReturnToSave:!1,editMode:"popup",getHtml:function(t,i,e,n){var o=[];return o.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),o.push("</div>"),o.join("")},init:function(t,i,e,n,o){var a;return n.append(a=jQuery(this.getHtml(t,i,e,o))),this.bindUI(t,i,a,e,n,o),a},bindUI:function(i,e,n,o,a,l){var r={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,r,o.config),r.options.forEach(function(t){t[r.columnKeys.optionValue]==l&&(t[r.columnKeys.optionSelected]=!0)});var s=i;n.data("binded-ax5ui","ax5select"),n.ax5select($.extend(!0,{tabIndex:1,direction:"auto",columnKeys:r.columnKeys,options:r.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?t.body.inlineEdit.deActive.call(s,"RETURN",e,this.value[0][r.columnKeys.optionValue]):"close"==this.state&&t.body.inlineEdit.deActive.call(s,"ESC",e)}},o.config)),n.ax5select("open"),n.ax5select("setValue",l),n.find("a").focus()}},l={editMode:"inline",getHtml:function(t,i,e){var n,o=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=i.config&&i.config.trueValue?e==i.config.trueValue?"true":"false":0==e||"false"==e||e<"1"?"false":"true";var a={marginTop:2,height:o-4};return jQuery.extend(!0,a,i.config),a.marginTop=(o-a.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+n+'" style="height:'+a.height+"px;width:"+a.height+"px;margin-top:"+a.marginTop+'px;"></div>'}},r={useReturnToSave:!1,editMode:"popup",_getHtml:function(t,i,e,n){return'<div data-ax5grid-editor="textarea"></div>'},_bindUI:function(i,e,n,o,a,l){var r=n.offset(),s={width:n.width()},d=150,c=30,h=jQuery('<div data-ax5grid-popup="textarea" style="z-index: 9999;">\n    <textarea style="width:100%;height:'+(d-c)+'px;" class="form-control">'+l+'</textarea>\n    <div style="height:'+c+'px;padding:5px;text-align: right;">\n        <button class="btn btn-default">OK</button>\n    </div>\n</div>'),u=h.find("textarea");h.css({position:"absolute",left:r.left,top:r.top,width:s.width,height:d}),h.find("textarea"),jQuery(document.body).append(h),u.focus().select(),u.on("blur",function(n){t.body.inlineEdit.deActive.call(i,"RETURN",e,this.value),h.remove(),ax5.util.stopEvent(n.originalEvent)}),u.on("keydown",function(n){n.which==ax5.info.eventKeys.ESC&&(t.body.inlineEdit.deActive.call(i,"ESC",e),h.remove(),ax5.util.stopEvent(n.originalEvent))})},init:function(t,i,e,n,o){var a=void 0;return n.append(a=jQuery(this._getHtml(t,i,e,o))),this._bindUI(t,i,a,e,n,o),a}};t.inlineEditor={text:i,money:e,number:n,date:o,select:a,checkbox:l,textarea:r}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(t){var i=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},e={first:function(){i.call(this,0)},prev:function(){var t=this.page.currentPage-1;t<0&&(t=0),i.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),i.call(this,t)},last:function(){i.call(this,this.page.totalPages-1)}};t in e?e[t].call(this):i.call(this,t-1)},n=function(){var i=this;if(this.page){var n={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},o=this.config.page.navigationItemCount;n["@paging"]=function(){var t=[],i=void 0,e=void 0;i=n.currentPage-Math.floor(o/2),i<0&&(i=0),e=n.currentPage+o,e>n.totalPages&&(e=n.totalPages),e-i>o&&(e=i+o),e-i<o&&(i=e-o),i<0&&(i=0);for(var a=i,l=e;a<l;a++)t.push({pageNo:a+1,selected:n.currentPage==a});return t}(),n["@paging"].length>0&&(n.hasPage=!0),this.$.page.navigation.html(t.tmpl.get("page_navigation",n)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){e.call(i,this.getAttribute("data-ax5grid-page-move"))})}else this.$.page.navigation.empty()},o=function(){if(this.config.page.statusDisplay){var e=void 0,n=Math.min(this.xvar.dataRowCount,this.xvar.virtualPaintRowCount),o={};e=this.xvar.virtualPaintStartRowIndex+n,e>this.xvar.dataRowCount&&(e=this.xvar.dataRowCount),o.fromRowIndex=i.number(this.xvar.virtualPaintStartRowIndex+1,{money:!0}),o.toRowIndex=i.number(e,{money:!0}),o.totalElements=!1,o.dataRealRowCount=this.xvar.dataRowCount!==this.xvar.dataRealRowCount&&i.number(this.xvar.dataRealRowCount,{money:!0}),o.dataRowCount=i.number(this.xvar.dataRowCount,{money:!0}),o.progress=this.appendProgress?this.config.appendProgressIcon:"",this.page&&(o.fromRowIndex_page=i.number(this.xvar.virtualPaintStartRowIndex+this.page.currentPage*this.page.pageSize+1,{money:!0}),o.toRowIndex_page=i.number(this.xvar.virtualPaintStartRowIndex+n+this.page.currentPage*this.page.pageSize,{money:!0}),o.totalElements=i.number(this.page.totalElements,{money:!0}),o.toRowIndex_page>this.page.totalElements&&(o.toRowIndex_page=this.page.totalElements)),this.$.page.status.html(t.tmpl.get("page_status",o))}};t.page={navigationUpdate:n,statusUpdate:o}}(),function(){var t=ax5.ui.grid,i=ax5.util,e={vertical:function(t,i){var e=i._content_height-i._panel_height,n=i._vertical_scroller_height-i.verticalScrollBarHeight,o=e*t.top/n;return o<0?o=0:e<o&&(o=e),{top:-o}},horizontal:function(t,i){var e=i._content_width-i._panel_width,n=i._horizontal_scroller_width-i.horizontalScrollBarWidth,o=e*t.left/n;return o<0?o=0:e<o&&(o=e),{left:-o}}},n={vertical:function(i,n){var o=this,a="vertical",l=n._content_height-n._panel_height,r=n._vertical_scroller_height-n.verticalScrollBarHeight,s=r*i/l,d=void 0;return-s>r&&(s=-r,d=e[a].call(this,{top:-s},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.body.scrollTo.call(o,d)),-s},horizontal:function(i,n){var o=this,a="horizontal",l=n._content_width-n._panel_width,r=n._horizontal_scroller_width-n.horizontalScrollBarWidth,s=r*i/l,d=void 0;return-s>r&&(s=-r,d=e[a].call(this,{left:-s},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.header.scrollTo.call(o,d),t.body.scrollTo.call(o,d)),-s}},o={click:function(i,n,o,a){if((new Date).getTime()-t.scroller.moveout_timer<20)return!1;var l=this,r=i.offset(),s={width:n.outerWidth(),height:n.outerHeight()},d={width:i.innerWidth(),height:i.innerHeight()},c=l.$.scroller.vertical.innerHeight(),h=l.$.panel.body.height(),u=l.$.scroller.horizontal.innerWidth(),g=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,x=l.xvar.scrollContentWidth,p=l.$.scroller["vertical-bar"].outerHeight(),v=l.$.scroller["horizontal-bar"].outerWidth(),m={vertical:function(i){var e=t.util.getMousePosition(i),n=e.clientY-r.top;return n<0?n=0:n+s.height>d.height&&(n=d.height-s.height),{top:n}},horizontal:function(i){var e=t.util.getMousePosition(i),n=e.clientX-r.left;return n<0?n=0:n+s.width>d.width&&(n=d.width-s.width),{left:n}}},y=m[o](a);n.css(y);var b=e[o].call(l,y,{_content_width:x,_content_height:f,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:v});"horizontal"===o&&t.header.scrollTo.call(l,b),t.body.scrollTo.call(l,b),b=null},on:function(i,n,a,l){var r=this,s=n.position(),d={width:n.outerWidth(),height:n.outerHeight()},c={width:i.innerWidth(),height:i.innerHeight()},h=r.$.scroller.vertical.innerHeight(),u=r.$.panel.body.height(),g=r.$.scroller.horizontal.innerWidth(),f=r.$.panel.body.width(),x=r.xvar.scrollContentHeight,p=r.xvar.scrollContentWidth,v=r.$.scroller["vertical-bar"].outerHeight(),m=r.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(i){var e=t.util.getMousePosition(i);r.xvar.__da=e.clientY-r.xvar.mousePosition.clientY;var n=s.top+r.xvar.__da;return n<0?n=0:n+d.height>c.height&&(n=c.height-d.height),{top:n}},horizontal:function(i){var e=t.util.getMousePosition(i);r.xvar.__da=e.clientX-r.xvar.mousePosition.clientX;var n=s.left+r.xvar.__da;return n<0?n=0:n+d.width>c.width&&(n=c.width-d.width),{left:n}}};r.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(i){var o=y[a](i);n.css(o);var l=e[a].call(r,o,{_content_width:p,_content_height:x,_panel_width:f,_panel_height:u,_horizontal_scroller_width:g,_vertical_scroller_height:h,verticalScrollBarHeight:v,horizontalScrollBarWidth:m});"horizontal"===a&&t.header.scrollTo.call(r,l),t.body.scrollTo.call(r,l)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){o.off.call(r,t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){o.off.call(r,t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(i){ax5.util.stopEvent(i.originalEvent),t.scroller.moveout_timer=(new Date).getTime(),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a={wheel:function(i){var e=this,n=e.$.panel["body-scroll"].position(),o=e.xvar.body_panel_height,a=e.xvar.body_panel_width,l=e.xvar.scrollContentHeight,s=e.xvar.scrollContentWidth;if(isNaN(l)||isNaN(s))return!1;var d=void 0,c=void 0,h=!1,u=!1;return d=n.left-i.x,c=n.top-i.y,c>=0?(c=0,h=!0):c<=o-l?(c=o-l,c>=0&&(c=0),h=!0):0==i.y&&(h=!0),d>=0?(d=0,u=!0):d<=a-s?(d=a-s,d>=0&&(d=0),u=!0):0==i.x&&(u=!0),t.header.scrollTo.call(e,{left:d}),t.body.scrollTo.call(e,{left:d,top:c},{callback:function(){r.call(e)}}),!h||!u},on:function(){var e=this,n=e.$.panel["body-scroll"].position(),o=e.xvar.body_panel_height,l=e.xvar.body_panel_width,s=e.xvar.scrollContentHeight,d=e.xvar.scrollContentWidth,c=function(i){var a=t.util.getMousePosition(i),r=void 0,c=void 0;return e.xvar.__x_da=a.clientX-e.xvar.mousePosition.clientX,e.xvar.__y_da=a.clientY-e.xvar.mousePosition.clientY,r=n.left+e.xvar.__x_da,c=n.top+e.xvar.__y_da,c>=0?c=0:c<=o-s&&(c=o-s,c>=0&&(c=0)),r>=0?r=0:r<=l-d&&(r=l-d,r>=0&&(r=0)),{left:r,top:c}};this.xvar.__x_da=0,this.xvar.__y_da=0,this.xvar.touchmoved=!1,jQuery(document.body).on("touchmove.ax5grid-"+this.instanceId,function(n){var o=c(n);r.call(e),t.header.scrollTo.call(e,{left:o.left}),t.body.scrollTo.call(e,o,{noRepaint:"noRepaint"}),i.stopEvent(n.originalEvent),e.xvar.touchmoved=!0}).on("touchend.ax5grid-"+this.instanceId,function(n){if(e.xvar.touchmoved){var o=c(n);r.call(e),t.header.scrollTo.call(e,{left:o.left}),t.body.scrollTo.call(e,o),i.stopEvent(n.originalEvent),a.off.call(e)}}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).off("touchmove.ax5grid-"+this.instanceId).off("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l=function(){var e=this,n=this.config.scroller.trackPadding;0==n?(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size,left:-1}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size,top:-1})):(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(n+1),left:n/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(n+1),top:n/2})),this.$.scroller["vertical-bar"].on(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),o.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",i)}.bind(this)).on("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.vertical.on("click",function(t){"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].on(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),o.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",i)}.bind(this)).on("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.horizontal.on("click",function(t){"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.on("mousewheel DOMMouseScroll",function(t){var e=t.originalEvent,n={x:0,y:0};e.detail?n.y=10*e.detail:"undefined"==typeof e.deltaY?(n.y=-e.wheelDelta,n.x=0):(n.y=e.deltaY,n.x=e.deltaX),a.wheel.call(this,n)&&i.stopEvent(t)}.bind(this)),ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(i){e.xvar.mousePosition=t.util.getMousePosition(i),a.on.call(e)}),this.xvar.body_panel_height=this.$.panel.body.height(),this.xvar.body_panel_width=this.$.panel.body.width()},r=function(){var t=this.$.scroller.vertical.height(),i=this.$.scroller.horizontal.width(),e=this.$.panel.body.height(),o=this.$.panel.body.width(),a=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,r=e*t/a,s=o*i/l;r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:n.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:l,_content_height:a,_panel_width:o,_panel_height:e,_horizontal_scroller_width:i,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),height:r}),this.$.scroller["horizontal-bar"].css({left:n.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:l,_content_height:a,_panel_width:o,_panel_height:e,_horizontal_scroller_width:i,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),width:s}),this.xvar.body_panel_height=e,this.xvar.body_panel_width=o,t=null,i=null,e=null,o=null,a=null,l=null,r=null,s=null};t.scroller={moveout_timer:(new Date).getTime(),init:l,resize:r}}(),function(){var t=ax5.ui.grid,i=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},e=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button type="button" data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button type="button" data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button type="button" data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button type="button" data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button type="button" data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},n=function(){return"<span>{{{progress}}} {{fromRowIndex}} - {{toRowIndex}} of {{dataRowCount}} {{#totalElements}}&nbsp; Total {{.}}{{/totalElements}}</span>"};t.tmpl={main:i,page_navigation:e,page_status:n,get:function(i,e,n){var o=t.tmpl[i].call(this,n);return ax5.mustache.parse(o),ax5.mustache.render(o,e)}}}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(t,i){for(var e={rows:[]},n={rows:[]},o=0,a=t.rows.length;o<a;o++){var l=t.rows[o];e.rows[o]={cols:[]},n.rows[o]={cols:[]};for(var r=0,s=l.cols.length;r<s;r++){var d=jQuery.extend({},l.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;if(c<i)if(h<=i)e.rows[o].cols.push(d);else{var u=jQuery.extend({},d),g=jQuery.extend({},u);u.colspan=i-u.colIndex,g.colIndex=i,g.colspan=d.colspan-u.colspan,e.rows[o].cols.push(u),g.colspan&&n.rows[o].cols.push(g)}else n.rows[o].cols.push(d);d=null,c=null,h=null}l=null}return{leftData:e,rightData:n}}),e=function(t,i,e){for(var n={rows:[]},o=0,a=t.rows.length;o<a;o++){var l=t.rows[o];n.rows[o]={cols:[]};for(var r=0,s=l.cols.length;r<s;r++){var d=jQuery.extend({},l.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;(i<=c||h<=e)&&(i<=c&&h<=e?n.rows[o].cols.push(d):i>c&&h>i?(d.colspan=h-i,n.rows[o].cols.push(d)):h>e&&c<=e&&n.rows[o].cols.push(d))}}return n},n=function(t){var i=void 0,e=t.originalEvent?t.originalEvent:t;return i="changedTouches"in e&&e.changedTouches?e.changedTouches[0]:e,{clientX:i.pageX,clientY:i.pageY}},o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var i=t,e=this.config,n={rows:[]},o=0,a=function c(t,i,a){for(var l={cols:[]},r=0,s=t.length,d=1;r<s;r++){var h=jQuery.extend({},t[r]);d=1,h.hidden||(h.colspan=1,h.rowspan=1,h.rowIndex=i,h.colIndex=function(){return a?(o=a.colIndex+r+1,a.colIndex+r):o++}(),l.cols.push(h),"columns"in h?d=c(h.columns,i+1,h):h.width="width"in h?h.width:e.columnMinWidth,h.colspan=d)}return l.cols.length>0?(n.rows[i]||(n.rows[i]={cols:[]}),n.rows[i].cols=n.rows[i].cols.concat(l.cols),l.cols.length-1+d):d};a(i,0);for(var l=0,r=n.rows.length;l<r;l++)for(var s=0,d=n.rows[l].cols.length;s<d;s++)"columns"in n.rows[l].cols[s]||(n.rows[l].cols[s].rowspan=r-l);return n},l=function(t){var i=t,e={rows:[]},n=0,o=function a(t,i,o){for(var l={cols:[]},r=0,s=t.length,d=1,c=(function u(t){for(var e=0,r=t.length;e<r;e++){var s=jQuery.extend({},t[e]),d=1;s.hidden||("key"in s?(s.colspan=1,s.rowspan=1,s.rowIndex=i,s.colIndex=function(){return o?(n=o.colIndex+e+1,o.colIndex+e):n++}(),l.cols.push(s),"columns"in s&&(d=a(s.columns,i+1,s)),s.colspan=d):"columns"in s&&u(s.columns,i))}});r<s;r++){var h=jQuery.extend({},t[r]);d=1,h.hidden||("key"in h?(h.colspan=1,h.rowspan=1,h.rowIndex=i,h.colIndex=function(){return o?(n=o.colIndex+r+1,o.colIndex+r):n++}(),l.cols.push(h),"columns"in h&&(d=a(h.columns,i+1,h)),h.colspan=d):"columns"in h&&c(h.columns,i)),h=null}return l.cols.length>0?(e.rows[i]||(e.rows[i]={cols:[]}),e.rows[i].cols=e.rows[i].cols.concat(l.cols),l.cols.length-1+d):d};return o(i,0),function(t){for(var i=0,e=t.rows.length;i<e;i++){for(var n=t.rows[i],o=0,a=n.cols.length;o<a;o++){var l=n.cols[o];"columns"in l||(l.rowspan=e-i),l=null}n=null}}(e),e},r=function(t){var i={};return t.rows.forEach(function(t){t.cols.forEach(function(t){i[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),i},s=function(t){for(var i={rows:[]},e=0,n=t.length;e<n;e++){var o=t[e],a=0;i.rows[e]={cols:[]};for(var l=0,r=o.length;l<r&&!(a>this.colGroup.length);l++){var s=o[l].colspan||1;o[l].label||o[l].key?i.rows[e].cols.push({colspan:s,rowspan:1,colIndex:a,columnAttr:"sum",align:o[l].align,label:o[l].label,key:o[l].key,collector:o[l].collector,formatter:o[l].formatter}):i.rows[e].cols.push({colIndex:a,colspan:s,rowspan:1,label:"&nbsp;"}),a+=s,s=null}if(a<this.colGroup.length)for(var d=a;d<this.colGroup.length;d++)i.rows[e].cols.push({colIndex:d,colspan:1,rowspan:1,label:"&nbsp;"});o=null,a=null}return i},d=function(t){var i={rows:[]},e=0,n=0;i.rows[e]={cols:[]};for(var o=0,a=t.length;o<a&&!(n>this.colGroup.length);o++){var l=t[o].colspan||1;t[o].label||t[o].key?i.rows[e].cols.push({colspan:l,rowspan:1,rowIndex:0,colIndex:n,columnAttr:"default",align:t[o].align,label:t[o].label,key:t[o].key,collector:t[o].collector,formatter:t[o].formatter}):i.rows[e].cols.push({rowIndex:0,colIndex:n,colspan:l,rowspan:1,label:"&nbsp;"}),n+=l}if(n<this.colGroup.length)for(var r=n;r<this.colGroup.length;r++)i.rows[e].cols.push({rowIndex:0,colIndex:r,colspan:1,rowspan:1,label:"&nbsp;"});return i},c=function(t,i,e){var n=void 0,o=!1,a=[];return this.xvar.frozenRowIndex>t&&a.push("top"),this.xvar.frozenColumnIndex>i&&a.push("left"),a.push("body"),(this.xvar.frozenColumnIndex<=i||this.xvar.frozenRowIndex<=t)&&(n=a.join("-"),a.push("scroll"),o=!0),{panelName:a.join("-"),containerPanelName:n,isScrollPanel:o}},h=function(t){var i=[],e=[].concat(t.split(/[\.\[\]]/g));return e.forEach(function(t){""!==t&&i.push('["'+t.replace(/['\"]/g,"")+'"]')}),e=null,i.join("")};t.util={divideTableByFrozenColumnIndex:i,getTableByStartEndColumnIndex:e,getMousePosition:n,ENM:o,makeHeaderTable:a,makeBodyRowTable:l,makeBodyRowMap:r,makeFootSumTable:s,makeBodyGroupingTable:d,findPanelByColumnIndex:c,getRealPathForDataItem:h}}();

